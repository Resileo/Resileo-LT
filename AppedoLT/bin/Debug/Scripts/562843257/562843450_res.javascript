AdfUIComponents.createComponentClass("AdfUIIterator",{componentType:"org.apache.myfaces.trinidad.Iterator",propertyKeys:["value",{name:"rows",type:"Number","default":25},{name:"first",type:"Number","default":0}],superclass:AdfUICollection});
AdfUIComponents.createComponentClass("AdfUITable",{componentType:"org.apache.myfaces.trinidad.Table",propertyKeys:[{name:"rowDisclosureListener",type:"Object",secured:!0},"disclosedRowKeys",{name:"selectionListener",type:"Object",secured:!0},"selectedRowKeys",{name:"immediate",type:"Boolean","default":!1,secured:!0},{name:"sortListener",type:"Object",secured:!0},{name:"rangeChangeListener",type:"Object",secured:!0},{name:"showAll",type:"Boolean","default":!1,secured:!0}],eventNames:["rowDisclosure",
"selection","rangeChange","sort"],superclass:AdfUIIterator});
AdfUITable.SELECTION_LISTENER_KEY="afrSelListener";AdfUITable.prototype.findComponent=function(a,b){if(b!=void 0)return a=this.getClientId()+":"+b+":"+a,AdfPage.PAGE.findComponent(a);return AdfUITable.superclass.findComponent.call(this,a)};AdfUITable.prototype.Init=function(a,b,c,d,f){AdfUITable.superclass.Init.call(this,a,b,c,d,f)};
AdfUITable.prototype.GetChanges=function(){var a=AdfUITable.superclass.GetChanges.call(this),b=a[AdfUITable.DISCLOSED_ROW_KEYS];if(b){var c=[],d=0,f;for(f in b)c[d++]=f;a[AdfUITable.DISCLOSED_ROW_KEYS]=c.join("$afr$")}if(b=a[AdfUITable.SELECTED_ROW_KEYS]){var c=[],g;for(g in b)c.push(g);a[AdfUITable.SELECTED_ROW_KEYS]=c.join("$afr$")}return a};
AdfUITable.prototype.DeliverDerivedPropertyEvents=function(a,b,c){if(a==AdfUITable.SELECTED_ROW_KEYS&&(a=this.getPeer())&&a.canDeliverSelectionEvent&&a.canDeliverSelectionEvent())(b=AdfRowKeySetChangeEvent.createRowKeySetChangeEvent(this,AdfSelectionEvent.SELECTION_EVENT_TYPE,b,c))&&b.queue()};
AdfUITable.prototype.setDisclosedRowKey=function(a,b){AdfAssert.assertString(a);AdfAssert.assertBoolean(b);if(b==this.isDisclosed(a))return!1;var c=this.getPeer();if(c&&c.isDisclosureFetchPending())return!1;var d=this.getDisclosedRowKeys(),c={};AdfCollections.copyInto(c,d);b?c[a]=!0:delete c[a];(d=AdfRowKeySetChangeEvent.createRowKeySetChangeEvent(this,AdfRowDisclosureEvent.ROW_DISCLOSURE_EVENT_TYPE,d,c))&&d.queue();if(d.isCanceled())return!1;this.setDisclosedRowKeys(c);return!0};
AdfUITable.prototype.isDisclosed=function(a){var b=this.getDisclosedRowKeys();if(b)return b[a];return!1};AdfUITable.prototype.getSelectedColumns=function(){var a=[],b=this.getPeer();if(b)for(var b=b.__getSelectedColumns(),c=0;c<b.length;c++)a.push(b[c].getClientId());return a};
AdfUIComponents.createComponentClass("AdfUITable2",{componentType:"oracle.adf.Table",propertyKeys:[{name:"filterModel",type:"Object",secured:!0},{name:"queryListener",type:"Object",secured:!0}],eventNames:["query"],superclass:AdfUITable});
AdfUIComponents.createComponentClass("AdfUIColumn",{componentType:"org.apache.myfaces.trinidad.Column",propertyKeys:[{name:"sortProperty",type:"String",secured:!0}]});
AdfUIComponents.createComponentClass("AdfRichColumn",{componentType:"oracle.adf.RichColumn",propertyKeys:[{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"persist",type:"Array"},{name:"dontPersist",type:"Array"},{name:"align",type:"String"},{name:"headerClass",type:"String"},{name:"footerClass",type:"String"},{name:"width",type:"String","default":"100"},{name:"minimumWidth",type:"String","default":"12"},{name:"headerText",type:"String"},
{name:"noWrap",type:"Boolean","default":!0},{name:"headerNoWrap",type:"Boolean","default":!1},{name:"sortable",type:"Boolean","default":!1},{name:"filterable",type:"Boolean","default":!1},{name:"separateRows",type:"Boolean","default":!1},{name:"rowHeader",type:"String","default":"false"},{name:"selected",type:"Boolean","default":!1},{name:"displayIndex",type:"Number","default":-1},{name:"frozen",type:"Boolean","default":!1},{name:"helpTopicId",type:"String"},{name:"showRequired",type:"Boolean","default":!1},
{name:"visible",type:"Boolean","default":!0}],superclass:AdfUIColumn});
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlColumnPeer",!1);AdfDhtmlColumnPeer.InitSubclass=function(){AdfRichUIPeer.addSuppressedPPRAttributes(this,AdfRichColumn.WIDTH,AdfRichColumn.MINIMUM_WIDTH,AdfRichColumn.SELECTED);AdfRichUIPeer.addComponentPropertyChanges(this,AdfRichColumn.WIDTH);AdfRichUIPeer.addComponentPropertyGetters(this,AdfRichColumn.DISPLAY_INDEX)};
AdfDhtmlColumnPeer.prototype.Init=function(a,b){AdfDhtmlColumnPeer.superclass.Init.call(this,a,b);typeof window.AdfColumnDragSource!="undefined"&&(a.setDragSource(new AdfColumnDragSource),a.setDropTarget(new AdfColumnDropTarget))};AdfDhtmlColumnPeer.prototype.GetComponentDisplayIndex=function(a,b){return AdfAgent.AGENT.getIntAttribute(b,"_d_index",-1)};
AdfDhtmlColumnPeer.prototype.ComponentWidthChanged=function(a,b,d,e){for(b=a.getParent();b&&!(b instanceof AdfUICollection);)b=b.getParent();b!=null&&b.getPeer().resizeColumn(a,d,e)};AdfDhtmlColumnPeer.prototype.ScrollIntoView=function(a,b,d){for(a=a.getParent();a&&!(a instanceof AdfUICollection);)a=a.getParent();a!=null&&a.getPeer().scrollColumnIntoView(null,this.getDomElement());d!=null&&AdfLogger.LOGGER.warning("subTargetId not supported for column ScrollIntoView");b&&AdfLogger.LOGGER.warning("Focus not supported for column ScrollIntoView")};
function AdfTableDataFetchEvent(a,b,d,e,f){this.Init(a,b,d,e,f)}AdfObject.createSubclass(AdfTableDataFetchEvent,AdfComponentEvent);AdfTableDataFetchEvent.FETCH_EVENT_TYPE="fetch";AdfTableDataFetchEvent.prototype.Init=function(a,b,d,e,f){AdfTableDataFetchEvent.superclass.Init.call(this,a,AdfTableDataFetchEvent.FETCH_EVENT_TYPE);this._id=b;this._index=e;this._clientKey=f;this._subtype=d;this._renderOnly=!1;this.setRoot(a)};
AdfTableDataFetchEvent.prototype.setClientTokens=function(a){this._clientTokens=a};AdfTableDataFetchEvent.prototype.setOldClientKey=function(a){this._oldClientKey=a};AdfTableDataFetchEvent.prototype.setColumnClientId=function(a){this._columnClientId=a};AdfTableDataFetchEvent.prototype.setOldColumnClientId=function(a){this._oldColumnClientId=a};AdfTableDataFetchEvent.prototype.setFillRows=function(a){this._fillRows=a};
AdfTableDataFetchEvent.prototype.setLastClientKey=function(a){this._lastClientKey=a};AdfTableDataFetchEvent.prototype.setActivatePreviousCell=function(){this._activatePreviousCell=!0};AdfTableDataFetchEvent.prototype.setRenderOnly=function(a){this._renderOnly=a};
AdfTableDataFetchEvent.prototype.AddMarshalledProperties=function(a){AdfTableDataFetchEvent.superclass.AddMarshalledProperties.call(this,a);a.id=this._id;a.subtype=this._subtype;if(this._index!=void 0)a.index=this._index;if(this._clientKey)a.clientKey=this._clientKey;if(this._clientTokens)a.clientTokens=this._clientTokens;if(this._oldClientKey)a.oldClientKey=this._oldClientKey;this._renderOnly&&(a.renderOnly=!0);if(this._fillRows)a.fillRows=this._fillRows;if(this._lastClientKey)a.lastClientKey=this._lastClientKey;
if(this._columnClientId)a.columnClientId=this._columnClientId;if(this._oldColumnClientId)a.oldColumnClientId=this._oldColumnClientId;if(this._activatePreviousCell)a.activatePreviousCell=this._activatePreviousCell};AdfTableDataFetchEvent.prototype.getClearMessages=function(){return!1};AdfTableDataFetchEvent.prototype.propagatesToServer=function(){return!0};
AdfTableDataFetchEvent.prototype.isValidationNeeded=function(){if(this._subtype==AdfTableDataFetchEvent.INITIAL_SUBTYPE||this._subtype==AdfTableDataFetchEvent.EXPAND_SUBTYPE||this._subtype==AdfTableDataFetchEvent.COLLAPSE_SUBTYPE)return!1;return!0};AdfTableDataFetchEvent.INITIAL_SUBTYPE=0;AdfTableDataFetchEvent.BEFORE_KEY_SUBTYPE=1;AdfTableDataFetchEvent.AFTER_KEY_SUBTYPE=2;AdfTableDataFetchEvent.FROM_INDEX_SUBTYPE=3;AdfTableDataFetchEvent.UP_TO_INDEX_SUBTYPE=4;
AdfTableDataFetchEvent.EXPAND_SUBTYPE=5;AdfTableDataFetchEvent.COLLAPSE_SUBTYPE=6;AdfTableDataFetchEvent.CLICK_EDIT_ACTIVE_ROW=7;AdfTableDataFetchEvent.AUTO_PPR=8;
function AdfTableShowColumnsEvent(a,b,d){this.Init(a,b,d)}AdfObject.createSubclass(AdfTableShowColumnsEvent,AdfComponentEvent);AdfTableShowColumnsEvent.SHOW_COLUMN_EVENT_TYPE="showColumns";AdfTableShowColumnsEvent.prototype.Init=function(a,b,d){AdfTableShowColumnsEvent.superclass.Init.call(this,a,AdfTableShowColumnsEvent.SHOW_COLUMN_EVENT_TYPE);this._columnIds=b;this._showType=d;this.setPartial(!0);this.setRoot(a)};AdfTableShowColumnsEvent.prototype.getShowType=function(){return this._showType};
AdfTableShowColumnsEvent.prototype.setTargetColumnId=function(a){this._targetColumnId=a};AdfTableShowColumnsEvent.prototype.setAfterTarget=function(a){this._afterTarget=a};AdfTableShowColumnsEvent.prototype.AddMarshalledProperties=function(a){AdfTableShowColumnsEvent.superclass.AddMarshalledProperties.call(this,a);if(this._columnIds)a.columnIds=this._columnIds;a.showType=this._showType;if(this._targetColumnId)a.targetColumnId=this._targetColumnId;if(this._afterTarget)a.afterTarget=this._afterTarget};
AdfTableShowColumnsEvent.prototype.propagatesToServer=function(){return!0};AdfTableShowColumnsEvent.prototype.isValidationNeeded=function(){return!0};
AdfUIComponents.createComponentClass("AdfRichTable",{componentType:"oracle.adf.RichTable",propertyKeys:[{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0},{name:"bodyContextMenuId",type:"String"},{name:"columnSelection",type:"String","default":"none"},{name:"columnStretching",type:"String","default":"none"},{name:"columnResizing",type:"String","default":"enabled"},
{name:"contextMenuId",type:"String"},{name:"disableColumnReordering",type:"Boolean","default":!1},{name:"horizontalGridVisible",type:"Boolean","default":!0},{name:"verticalGridVisible",type:"Boolean","default":!0},{name:"emptyText",type:"String","default":"No data to display."},{name:"columnBandingInterval",type:"Number","default":0},{name:"rowBandingInterval",type:"Number","default":1},{name:"rowSelection",type:"String","default":"none"},{name:"width",type:"String"},{name:"summary",type:"String"},
{name:"fetchSize",type:"Number","default":25},{name:"displayRow",type:"String","default":"first"},"displayRowKey","activeRowKey",{name:"contextMenuSelect",type:"Boolean","default":!0},{name:"editingMode",type:"String","default":"editAll"},{name:"scrollTop",type:"Number","default":0},{name:"scrollLeft",type:"Number","default":0},"scrollTopRowKey",{name:"contentDelivery",type:"String","default":"whenAvailable"},{name:"clearTokenCacheOnPPR",type:"Boolean","default":!0},{name:"autoHeightRows",type:"Number",
"default":-1},{name:"persist",type:"Array"},{name:"dontPersist",type:"Array"},{name:"allDetailsEnabled",type:"Boolean","default":!1},{name:"filterVisible",type:"Boolean","default":!1},"columnSelectionListener",{name:"rows",type:"Number","default":25},{name:"first",type:"Number","default":0}],eventNames:["columnSelection"],namingContainer:!0,superclass:AdfUITable2});
AdfRichTable.prototype.getAccessibleName=function(){return this.getShortDesc()};AdfRichTable.prototype.scrollColumnIntoView=function(a){this.getPeer().scrollColumnIntoView(a)};AdfRichTable.prototype.getRowIndex=function(a){return this.getPeer().getRowIndex(a)};AdfRichTable.prototype.getRowKey=function(a){return this.getPeer().getRowKey(a)};
function AdfTableUtils(){this.Init()}AdfObject.createSubclass(AdfTableUtils);AdfTableUtils.InitClass=function(){};AdfTableUtils.prototype.Init=function(){AdfTableUtils.superclass.Init.call()};AdfTableUtils.queueColumnSelectionEvent=function(a,b,d){var b=AdfTableUtils.processColumnSelectionEventChangedSets(b,d),d=[],e=[],f=0,g;for(g in b[0])d[f++]=g;f=0;for(g in b[1])e[f++]=g;AdfColumnSelectionEvent.queue(a,d,e)};
AdfTableUtils.processColumnSelectionEventChangedSets=function(a,b){var d=null,e=null;if(b)if(a)for(var f in b)a[f]||(d||(d={}),d[f]=!0);else d={},AdfCollections.copyInto(d,b);if(a)if(b)for(f in a)b[f]||(e||(e={}),e[f]=!0);else e={},AdfCollections.copyInto(e,a);return[e==null?{}:e,d==null?{}:d]};
AdfTableUtils.queueSortEvent=function(a,b,d){a.setProperty("scrollTopRowKey",null,!0,AdfUIComponent.PROPAGATE_ALWAYS);var e=a.getPeer();e&&(e=e.GetAssociatedComponent(),e!=null&&e.setProperty("scrollTopRowKey",null,!0,AdfUIComponent.PROPAGATE_ALWAYS));(new AdfSortEvent(a,b,d)).queue()};
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlTableBasePeer",!1);
AdfDhtmlTableBasePeer.InitSubclass=function(){AdfRichUIPeer.addDomEventHandlers(this,AdfDhtmlLookAndFeel.SCROLL_EVENT_TYPE,AdfDhtmlLookAndFeel.KEY_DOWN_EVENT_TYPE,AdfDhtmlLookAndFeel.MOUSE_MOVE_EVENT_TYPE);AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.CLICK_EVENT_TYPE,AdfUIInputEvent.MOUSE_DOWN_EVENT_TYPE,AdfUIInputEvent.MOUSE_UP_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE,AdfUIInputEvent.KEY_UP_EVENT_TYPE,AdfComponentEvent.FOCUS_EVENT_TYPE,AdfComponentEvent.BLUR_EVENT_TYPE,AdfUIInputEvent.DOUBLE_CLICK_EVENT_TYPE,
AdfComponentEvent.CONTEXT_MENU_EVENT_TYPE,AdfValueChangeEvent.VALUE_CHANGE_TYPE);AdfRichUIPeer.addComponentPropertyChanges(this,"selectedRowKeys","disclosedRowKeys","scrollTop","scrollLeft","activeRowKey");AdfRichUIPeer.addSuppressedPPRAttributes(this,"first");AdfRichUIPeer.addSuppressedPPRAttributes(this,"rows");AdfRichUIPeer.addSuppressedPPRAttributes(this,"scrollTop");AdfRichUIPeer.addSuppressedPPRAttributes(this,"scrollLeft");AdfRichUIPeer.addSuppressedPPRAttributes(this,"scrollTopRowKey");AdfRichUIPeer.addSuppressedPPRAttributes(this,
"activeRowKey");this._SEL_UPDATE_ALL_SELECT=0;this._SEL_UPDATE_ALL_UNSELECT=1;this._SEL_UPDATE_ALL_UPDATE=2;this.AUTO_PPR_UPDATE_BLOCK=0;this.AUTO_PPR_INSERT_BEFORE_BLOCK=1;this.AUTO_PPR_INSERT_AFTER_BLOCK=2;this.AUTO_PPR_REMOVE_BLOCK=3;this.AUTO_PPR_FETCH_ID=-99;this.MISSING_AFTER=1;this.MISSING_BEFORE=2;this.NO_BLOCKS=4;this.VIEWPORT_SATISFIED=0;this.DW_SUB_ID="dataW";this._CELL_TEXT_KEY="_afrCTK";this._ROW_KEY="_afrRK";this._ROW_HEADER="_afrRH";this._LEAF_COLUMN="_afrLeaf";this._ROOT_COLUMN="_afrRoot";
this._FILTER_COLUMN="_afrFilterCol";this._PANEL_COLLECTION_ID="_afrPCId";this._SELECT_ALL="_afrSelAll";this._COL_COUNT="_afrColCount";this._FILTERABLE="_afrFilterable";this.__SORT_INDICATOR="afrSI";this._SORT_ASCENDING="_afrSortAsc";this._SORT_DESCENDING="_afrSortDesc";this._SORTED_TYPE="_afrSorted";this._SORTED_ASCENDING="1";this._SORTED_DESCENDING="2";this._SUPPORTS_HOVER="_afrHoverable";this.SELECTALL_KEY_PROPERTY="afrSelectAll";this._SELECTED_CLASS="p_AFSelected";this._INACTIVE_CLASS="p_AFInactive";
this._DROP_TARGET_CLASS="p_AFDropTarget";this._HIGHLIGHTED_CLASS="p_AFHighlighted";this._FOCUSED_CLASS="p_AFFocused";this._AUTOSCROLL_MARGIN=40;this._HSCROLLER=0;this._VSCROLLER=1;this._SELECTION_SINGLE="single";this._SELECTION_MULTIPLE="multiple";this._SELECTION_MULTIPLE_NOSELECTALL="multipleNoSelectAll";this._SELECTION_NONE="none";this._EDIT_MODE_CLICKTOEDIT="clickToEdit";this._MAXIMUM_ROW_REVEAL=8;this._SELECT_PAGE_UP=1;this._SELECT_PAGE_DOWN=2;this._SELECT_ARROW_UP=3;this._SELECT_ARROW_DOWN=4;
this._FOCUS_RH_ARROW_UP=5;this._FOCUS_RH_ARROW_DOWN=6;this._FOCUS_ROW_ARROW_UP=7;this._FOCUS_ROW_ARROW_DOWN=8;this._ROW_HEADER_FOCUS_TYPE=0;this._COLUMN_HEADER_FOCUS_TYPE=1;this._TABLE_BODY_FOCUS_TYPE=2;this._SELECT_ALL_FOCUS_TYPE=3;this._FETCH_MORE_CANVAS_SPACE=25;this._INPUT_REGEXP=/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/;this._TWINKLE_ON_STYLE_CLASS="p_AFTwinkleOn";this._TWINKLE_OFF_STYLE_CLASS="p_AFTwinkleOff";AdfDhtmlTableBasePeer._TWINKLE_TIMER_ID_ATTR="__afrTwinkleTimer";this._ICON_STYLE_EXPANDED=
"af|table::disclosed-icon-style";this._ICON_STYLE_COLLAPSED="af|table::undisclosed-icon-style";this._ICON_EXPANDED="af|table::disclosed-icon";this._ICON_COLLAPSED="af|table::undisclosed-icon";this._EXPANDED_NODE_KEY="af_table.TIP_EXPANDED_NODE";this._COLLAPSED_NODE_KEY="af_table.TIP_COLLAPSED_NODE";this._DETAIL_COLUMN_MARKER="_afrDetCol";this._DETAIL_ROW_MARKER="_afrDetRow";this._HAS_DETAIL_MARKER="_hasDetail";this.NEEDS_REFRESH_ATTRIBUTE="_afrNdsRfr";this.UNDO_FETCH_ATTRIBUTE="_afrUndFch";this.NO_RESIZE_MARKER=
"_noRsz";this._AUTO_HEIGHT_ROWS="_afrAutoHR"};
AdfDhtmlTableBasePeer.prototype.InitDomElement=function(a,b){var d=AdfPage.PAGE,e=AdfAgent.AGENT;AdfDhtmlTableBasePeer.superclass.InitDomElement.call(this,a,b);AdfRichUIPeer.addEventHandlerToDomInstance(AdfDhtmlTableBasePeer,b,AdfDhtmlLookAndFeel.MOUSE_MOVE_EVENT_TYPE);AdfRichUIPeer.addEventHandlerToDomInstance(AdfDhtmlTableBasePeer,b,AdfDhtmlLookAndFeel.KEY_DOWN_EVENT_TYPE);this._autoHeightRows=e.getIntAttribute(b,AdfDhtmlTableBasePeer._AUTO_HEIGHT_ROWS,0);var f=this.GetDatabody(b);this._colCount=
f?e.getIntAttribute(f,AdfDhtmlTableBasePeer._COL_COUNT,0):0;this._colSelEventSelectedColIds={};this._colSelEventUnselectedColIds={};this._supportsFocusRowNavigation=this.SupportsFocusRowNavigation(a);this._contextMenuSelect=a.getContextMenuSelect();if(!a.getColumnResizing||a.getColumnResizing()=="enabled")this._colResizeDragCallback=this.createCallback(this._handleColResizeDrag),this._colResizeDropCallback=this.createCallback(this._handleColResizeDrop);if(a.getColumnStretching)if(this._columnStretching=
e=a.getColumnStretching(),e=="blank")this._stretchedColumnId="_afrBlankColumn";else if(e.indexOf("column:")==0)this._stretchedColumnId=e.substring(7);this._cellNavMode=!0;this._editableTableReadOnlyMode=!1;this._hoverHighlightRow=this._isRowSelectionEnabled(a)&&d.getLookAndFeel().getSkinProperty("af|table-tr-hover-highlight-row")!="false";this._activeDataCount=-1;this._fetchId=0;this._lastColWidth=this._lastColWidthOverride=this._unavailableRowIndex=-1;this._associatedId=a.getProperty("_afrMasterId");
if(this._associatedId==null)this._associatedId=a.getProperty("_afrSlaveId");this._focusManager={};this._streamingDisabled=d.isStreamingDisabled()};AdfDhtmlTableBasePeer.prototype.isDragAvailable=function(a){AdfAssert.assertDomElement(a);if(a){var b=this._isTargetCellEditable(a),d=this._getTargetRowHeader(a)!=null,a=this._isTargetTextOnlyNode(a);if(d||b||a)return!1}return!0};
AdfDhtmlTableBasePeer.prototype.TruncateClientId=function(a,b,d,e){b=d.split(":");a=a.getClientId();a=AdfStrings.count(a,":")+1;(b=b[a])&&(isNaN(b)||e.push(a))};AdfDhtmlTableBasePeer.prototype.ComponentRemoved=function(a){this._touchMoveManager&&this._touchMoveManager.unregister();AdfDhtmlTableBasePeer.superclass.ComponentRemoved.call(this,a)};AdfDhtmlTableBasePeer.prototype.needsChildVisibilityChanges=function(){return!0};
AdfDhtmlTableBasePeer.prototype.ChildVisibilityChanged=function(){AdfPage.PAGE.addPartialTargets(this.getComponent());return!0};AdfDhtmlTableBasePeer.prototype.SupportsFocusRowNavigation=function(){return!1};AdfDhtmlTableBasePeer.prototype.needsResizeNotify=function(){return!0};
AdfDhtmlTableBasePeer.prototype.GetPanelCollectionPeer=function(){if(!this._pcPeer){var a=null,a=this.getDomElement().getAttribute(AdfDhtmlTableBasePeer._PANEL_COLLECTION_ID);if(a!=null&&(a=AdfPage.PAGE.findComponent(a)))this._pcPeer=a.getPeer()}return this._pcPeer};AdfDhtmlTableBasePeer.prototype.GetPanelCollectionComponent=function(){if(!this._pcComponent){var a=this.getDomElement().getAttribute(AdfDhtmlTableBasePeer._PANEL_COLLECTION_ID);if(a!=null)this._pcComponent=AdfPage.PAGE.findComponent(a)}return this._pcComponent};
AdfDhtmlTableBasePeer.prototype._allRowsAvailableOnClient=function(a,b){var d=!1;if(b>0)var d=a[0],e=a[b-1],e=e.startRow+e.numRows,f=this.GetRowCount(),d=f>0&&d.startRow==0&&e==f;return d};
AdfDhtmlTableBasePeer.prototype.ResizeNotify=function(a,b,d,e){delete this._cachedFirstVisibleRowKeyAndRow;if(this._virtInitialized){a=AdfAgent.AGENT;a=this.GetDatabody();this._setScrollerHeight(e,this._cachedCHHeight,this._cachedCFHeight,this._cachedNBHeight);this._setScrollerWidth(d,this._frozenWidth);this.SizeDatabody(a,d,e);d=this.__getScrollLeft();(this._currentScrollTop!=this._getScrollTop()||this._currentScrollLeft!=d)&&this.scrollToPos(this._currentScrollLeft,this._currentScrollTop);this._stretchTheColumns();
this._syncDataBodyHeights();if(!this._isPaged&&this._rowCount==-1&&this._canvasHeight<e-this._cachedCHHeight-this._cachedCFHeight)this._canvasHeight=e-this._cachedCHHeight-this._cachedCFHeight+AdfDhtmlTableBasePeer._FETCH_MORE_CANVAS_SPACE,this._setFakeCanvasHeight(this._canvasHeight);this._fillViewPort(a,a.offsetHeight,!1)}else if(this._isImmediateContentDelivery(this.getComponent())||this._isInlineDataAvailable(this.getComponent())){a=this.GetDatabody();e=null;if(a){this._unavailableRowIndex=this._getUnavailableRowIndex(a);
d=a.childNodes;for(a=d.length-1;a>=0;a--)if("TABLE"==d[a].tagName){e=d[a];break}}this._fixOuterHeight();this._initColumnHeader();this._initColumnFooter();this._initPaging();this._initNavBar();e!=null&&e.rows.length>0?(this._initVirtualization(e,!0),this._processClickToEditRequestTimerId=AdfPage.PAGE.scheduleTimer(this,this._processClickToEditRequest,!1,10)):(this.IsEmpty=!0,this.getDomElement().style.overflow="auto",this.AdjustAutoHeight(),this._updatePCState());this._stretchTheColumns();if(this.IsEmpty){if(e=
this.__getColumnHeader())if(d=this.getDomElement(),e.style.border="0px",a=e.offsetWidth,a<=d.clientWidth)d.style.overflow="hidden";if(a=this._getColumnFooter())if(d=this.getDomElement(),a.style.border="0px",a.offsetWidth<=d.clientWidth)d.style.overflow="hidden";(e||a)&&this.AdjustAutoHeight()}}else if(this._firstBlockRequested)!this._headerless&&this.IsEmpty&&this._stretchTheColumns(),this.IsEmpty&&this._autoHeightRows>0&&(!this._footerless||this._isPaged)&&this.AdjustAutoHeight();else{a=AdfAgent.getAgent();
e=this.getDomElement();this.IsEmpty=e=a.getAttribute(e,"_afrEmpty",!1);if(!e)this._firstBlockRequested=!0,d=this.getComponent(),(this._streamingDisabled||!AdfPage.PAGE.isStreamingRequestPending(d.getClientId()))&&this._queueFetchEvent(!0,AdfTableDataFetchEvent.INITIAL_SUBTYPE,-1),AdfDhtmlTableBasePeer.SetCursor(this.GetDatabody(),"wait");this._initColumnHeader();this._initColumnFooter();this._initNavBar();e||this.DisplayStatus(AdfPage.PAGE.getLookAndFeel().getTranslatedString("af_table.LABEL_FETCHING"),
!0);if(e&&(this.getDomElement().style.overflow="auto",this._stretchTheColumns(),e=this.__getColumnHeader()))if(d=this.getDomElement(),e.style.border="0px",a=e.offsetWidth,a<=d.clientWidth)d.style.overflow="hidden"}};
AdfDhtmlTableBasePeer.prototype._initColumnHeader=function(){this._lastFrozen=AdfAgent.getAgent().getIntAttribute(this.getDomElement(),"_lastFrozen",-1);var a=this.__getColumnHeader();if(a){if(this._autoHeightRows>0&&this._lastFrozen>=0&&!this._columnHeaderUnwrapped){var b=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"TABLE"),d=b.rows[0],e=AdfDhtmlTableBasePeer.FindFirstChildByTagName(d.cells[0],"TABLE"),d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(d.cells[1],"DIV");e.parentNode.removeChild(e);
d.parentNode.removeChild(d);a.removeChild(b);a.appendChild(e);b=e.style.width;e="left:";AdfDhtmlTableBasePeer._isRTL()&&(e="right:");d.style.cssText="overflow:hidden;position:absolute;top:0px;"+e+b;a.appendChild(d);this._columnHeaderUnwrapped=!0}this._synchronizeColumnRowHeights(a,"t","d2","t2");this._cachedCHHeight=a.offsetHeight;if(AdfAgent.AGENT.getPlatform()==AdfAgent.IE_PLATFORM&&AdfAgent.AGENT.getVersion()<8){if((b=AdfDhtmlTableBasePeer.__getChildBySubId(a,"t"))&&b.rows.length)b.rows[0].style.position=
"absolute";if(a=AdfDhtmlTableBasePeer.__getChildBySubId(a,"d2")){if((b=AdfDhtmlTableBasePeer.__getChildBySubId(a,"t2"))&&b.rows.length)b.rows[0].style.position="absolute";if(AdfDhtmlTableBasePeer._isRTL())b.style.right="0px"}}}else this._headerless=!0,this._cachedCHHeight=0};
AdfDhtmlTableBasePeer.prototype._initColumnFooter=function(){var a=this._getColumnFooter();a?(this._synchronizeColumnRowHeights(a,"ft","fd2","ft2"),this._cachedCFHeight=a.offsetHeight):(this._footerless=!0,this._cachedCFHeight=0)};AdfDhtmlTableBasePeer.prototype._initPaging=function(){this._isPaged=this.getComponent().getProperty("_afrCntNav")=="paged"};
AdfDhtmlTableBasePeer.prototype._initNavBar=function(){var a=this._getNavigationBar();if(a){if(this._hasNavBar=!0,this._cachedNBHeight=a.offsetHeight,this.RegisterFirstPropertyChange(),this.getComponent().getProperty("_afrSlaveId")!=null)a.firstChild.style.display="none"}else this._cachedNBHeight=0};AdfDhtmlTableBasePeer.prototype.__handleNavBarItemsClick=function(){throw Error("DhtmlTable classes that use a nav bar must provide an implementation for __handleNavBarItemsClick");};
AdfDhtmlTableBasePeer.prototype.__fixPanelCollectionDimensions=function(a){if(this._autoHeightRows){var b=this.getDomElement(),d=this.GetPanelCollectionPeer(),e=d.getDomElement(),f=d.getDomElement(),g=this.GetPanelCollectionComponent(),h=AdfAgent.getAgent(),k=h.getPlatform()==AdfAgent.WEBKIT_PLATFORM;if(d&&g){var l=g.getClientId(),g=h.getElementById(AdfRichUIPeer.CreateSubId(l,d.__getAutoHeightTopFacetId())),l=h.getElementById(AdfRichUIPeer.CreateSubId(l,d.__getAutoHeightBottomFacetId())),g=g?g.offsetHeight:
0,l=l?l.offsetHeight:0;if(d.isDetached())e=b.parentNode.parentNode,d=b.style,!a&&f.getAttribute("_afrPreDetachW")==null&&(f.setAttribute("_afrPreDetachW",d.width),f.setAttribute("_afrPreDetachH",d.height)),k?(f=h.getComputedStyle(b),b.style.width=e.clientWidth-parseInt(f.borderLeftWidth)-parseInt(f.borderRightWidth)+"px"):h.setOuterWidth(b,e.clientWidth),h.setOuterHeight(b,e.clientHeight-g-l);else{h=f.getAttribute("_afrPreDetachH");if(h!=void 0)b.style.height=h,b.style.width="",f.removeAttribute("_afrPreDetachW"),
f.removeAttribute("_afrPreDetachH");e.style.height=b.offsetHeight+g+l+"px"}}}};AdfDhtmlTableBasePeer.prototype._isContainerStretched=function(){var a=this.getDomElement().style;return a.position=="absolute"&&a.top&&a.top.length>0&&a.bottom&&a.bottom.length>0};
AdfDhtmlTableBasePeer.prototype._isPCContainerStretched=function(){var a=!1;this.getDomElement();var b=this.GetPanelCollectionPeer();if(b)a=b.getDomElement().style,a=a.position=="absolute"&&a.top&&a.top.length>0&&a.bottom&&a.bottom.length>0;return a};AdfDhtmlTableBasePeer.prototype.isHeightAutoSized=function(){return this._autoHeightRows>0};
AdfDhtmlTableBasePeer.prototype._fixOuterHeight=function(){var a=!1;if(this._autoHeightRows>0){var b=AdfAgent.AGENT,d=this.getDomElement(),e=d.style;if(e.height=="auto"&&!this._isContainerStretched()){if(b.getPlatform()==AdfAgent.IE_PLATFORM&&b.getVersion()<8&&d.scrollWidth<=d.offsetWidth)e.height=d.clientHeight+"px",a=!0;a||(b.setOuterHeight(d,d.offsetHeight),a=!0)}e.overflowX="";e.overflowY=""}return a};AdfDhtmlTableBasePeer.prototype.BeginHandleDataBlocks=function(){};
AdfDhtmlTableBasePeer.prototype.ReplaceDomElement=function(a,b){if(a.id.indexOf(AdfDhtmlTableBasePeer.DW_SUB_ID)>0){var d=AdfAgent.AGENT,e=this.GetDatabody();this.BeginHandleDataBlocks();var f=AdfDhtmlTableBasePeer._findFirstLevelChildrenByTagName(a,"TABLE");this._unavailableRowIndex=this._getUnavailableRowIndex(a);var g=!1;if(this._virtInitialized){f.length==0&&(g=!0);var h=d.getIntAttribute(a,"_fetchId",-1),k=this._pendingFetch;if(k!=void 0&&this._pendingId==h){h=this._pendingRenderOnly;this.CancelPendingFetch();
this._cleanUpDataFetchElement(b);if(d.getBooleanAttribute(a,AdfDhtmlTableBasePeer.NEEDS_REFRESH_ATTRIBUTE,!1)){AdfPage.PAGE.addPartialTargets(this.getComponent());return}if(d.getBooleanAttribute(a,AdfDhtmlTableBasePeer.UNDO_FETCH_ATTRIBUTE,!1)){k==AdfTableDataFetchEvent.FROM_INDEX_SUBTYPE||k==AdfTableDataFetchEvent.UP_TO_INDEX_SUBTYPE||k==AdfTableDataFetchEvent.AFTER_KEY_SUBTYPE||k==AdfTableDataFetchEvent.BEFORE_KEY_SUBTYPE?this._undoScroll():k==AdfTableDataFetchEvent.EXPAND_SUBTYPE||k==AdfTableDataFetchEvent.COLLAPSE_SUBTYPE?
this._restoreSavedDisclosureState():k==AdfTableDataFetchEvent.CLICK_EDIT_ACTIVE_ROW&&this._restoreActiveRowKey();AdfDhtmlTableBasePeer.SetCursor(e,"");this._hideStatus();return}delete this._cachedFirstVisibleRowKeyAndRow;this._savedDisclosedState=void 0;for(var l=0;l<f.length;l++){a.removeChild(f[l]);if(!this._pruneKeyCache)this._pruneKeyCache=d.getAttribute(f[l],"_pruneKeyCache",null);var m=d.getIntAttribute(f[l],"_adsCounter",-1),n=!1;l==0&&this._applyBufferedADSEvents(m,!0);n=this._handleDataCallback(f[l],
k,h,f.length-l-1);if(l==f.length-1&&(this._applyBufferedADSEvents(m,!1),this._resetActiveMessageBuffer(),this._activeDataCount<m))this._activeDataCount=m;n||this._addInvalidDataBlockToFetchElement(b,f[l]);d.elementsAdded(f[l])}this._fillViewPort(e,e.offsetHeight,!1);this.FetchCompleted()}else if(h==AdfDhtmlTableBasePeer.AUTO_PPR_FETCH_ID&&k==void 0){if(!this._handleAutoPPRDataFetch(a,f,e,g))return}else this._handleIrrelaventFetchBlocks(a,b,f)}else this._firstBlockRequested||(this._initColumnHeader(),
this._initColumnFooter(),this._initPaging(),this._initNavBar()),this.CancelPendingFetch(),f.length>0&&f[0].rows.length>0?(this._initVirtualization(f[0],!1),d.elementsAdded(f[0]),this._processClickToEditRequestTimerId=AdfPage.PAGE.scheduleTimer(this,this._processClickToEditRequest,!1,10),this.AdjustAutoHeight()):g=!0;g&&(this._hasRefreshAutoPPRBlock(f)?AdfPage.PAGE.addPartialTargets(this.getComponent()):(this._handleEmptyTextBlock(a,e),this.AdjustAutoHeight()))}else AdfDhtmlTableBasePeer.superclass.ReplaceDomElement.call(this,
a,b)};
AdfDhtmlTableBasePeer.prototype._handleAutoPPRDataFetch=function(a,b,d,e){var f=this._hasRefreshAutoPPRBlock(b),g=AdfAgent.AGENT;if(f)return AdfPage.PAGE.addPartialTargets(this.getComponent()),!1;if(!e){e=!1;for(f=0;f<b.length;f++){a.removeChild(b[f]);if(!this._pruneKeyCache)this._pruneKeyCache=g.getAttribute(b[f],"_pruneKeyCache",null);var h=g.getIntAttribute(b[f],"_autopprBlock",-1);this._updateComponentDisclosureState(b[f]);this._updateComponentSelectionState(b[f]);this._updateAutoPPRActiveRowKey(b[f]);this.AutoPPRBlockReceived(b[f]);
switch(h){case AdfDhtmlTableBasePeer.AUTO_PPR_INSERT_BEFORE_BLOCK:case AdfDhtmlTableBasePeer.AUTO_PPR_INSERT_AFTER_BLOCK:var k=this.FindRowByKey(g.getIntAttribute(b[f],"insertPath",null));if(k){var l=b[f].rows.length,m=null;if(l>0)var n=b[f].rows[0],m=n.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY);if(m&&!this.FindRowByKey(m))m=k.index,m!=void 0&&this.IsInsertAllowed(m)&&(h==AdfDhtmlTableBasePeer.AUTO_PPR_INSERT_AFTER_BLOCK&&m++,g.elementsAdded(b[f]),h=AdfDhtmlTableBasePeer._getBlockRowCount(b[f]),
n=AdfAgent.AGENT.getIntAttribute(b[f],"totalInserted",0),this.InsertBlock(b[f],m,h,n,0),this.UpdateRange(!1))}break;case AdfDhtmlTableBasePeer.AUTO_PPR_REMOVE_BLOCK:e=this.HandleAutoPPRRemove(b[f]);break;case AdfDhtmlTableBasePeer.AUTO_PPR_UPDATE_BLOCK:l=b[f].rows.length,l>0&&(n=b[f].rows[0],h=l>1&&this._hasDetailStamp?b[f].rows[1]:null,m=n.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY),this._replaceRowByKey(m,n,h))}}this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT,!0);this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE,
!0);a=this._currentScrollLeft;a!=0&&this._handleHorizontalScroll(a);e&&this._fillViewPort(d,d.offsetHeight,!1)}return!0};
AdfDhtmlTableBasePeer.prototype._handleEmptyTextBlock=function(a,b){if(this._virtInitialized)AdfLogger.LOGGER.severe("Empty data block received:"+id);else{for(var d=a.childNodes,e=d.length,f=0;f<e;f++){var g=d[0];a.removeChild(g);b.appendChild(g)}this._updatePCState();this._hideStatus();this.getDomElement().style.overflow="auto";this.IsEmpty=!0;this._stretchTheColumns();if(d=this.__getColumnHeader())if(d.style.border="0px",e=this.getDomElement(),d.offsetWidth<=e.clientWidth)e.style.overflow="hidden";
AdfDhtmlTableBasePeer.SetCursor(b,"")}};AdfDhtmlTableBasePeer.prototype._handleIrrelaventFetchBlocks=function(a,b,d){var e=AdfAgent.AGENT;this._cleanUpDataFetchElement(b);for(var f=0;f<d.length;f++)a.removeChild(d[f]),this._addInvalidDataBlockToFetchElement(b,d[f]),e.elementsAdded(d[f])};
AdfDhtmlTableBasePeer.prototype._addInvalidDataBlockToFetchElement=function(a,b){for(var d=b.rows,e=d.length,f=null,g=0;g<e;g++){var h=d[g],k=h.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY);k!=null&&this.FindRowByKey(k)!=null&&(f||(f=[]),f.push(h))}if(f!=null){e=f.length;for(g=0;g<e;g++)f[g].parentNode.removeChild(f[g])}a.appendChild(b)};AdfDhtmlTableBasePeer.prototype._cleanUpDataFetchElement=function(a){for(;a.firstChild!=null;){var b=a.firstChild;this.UnregisterNode(b);a.removeChild(b)}};
AdfDhtmlTableBasePeer.prototype._hasRefreshAutoPPRBlock=function(a){for(var b=AdfAgent.AGENT,d=0;d<a.length;d++)if(b.getBooleanAttribute(a[d],AdfDhtmlTableBasePeer.NEEDS_REFRESH_ATTRIBUTE,!1))return!0;return!1};AdfDhtmlTableBasePeer.prototype.AutoPPRBlockReceived=function(){};AdfDhtmlTableBasePeer.prototype.HandleAutoPPRRemove=function(a){var b=!1;if(a=AdfAgent.AGENT.getAttribute(a,"_parentKey",null))if(a=this.FindRowByKey(a))this.DeleteBlock(a.index,1,1,0,null),this.UpdateRange(!1),b=!0;return b};
AdfDhtmlTableBasePeer.prototype.DomReplaceNotify=function(a){if(a.id.indexOf(AdfDhtmlTableBasePeer.DW_SUB_ID)>0)return null;return a};AdfDhtmlTableBasePeer.prototype._getUnavailableRowIndex=function(a){var b=-1,d=AdfAgent.AGENT;if(a){var e=AdfDhtmlTableBasePeer.__getChildBySubId(a,"unAvail");e&&(b=d.getIntAttribute(e,"_unavailableRowIndex",-1),a.removeChild(e))}return b};
AdfDhtmlTableBasePeer.prototype._queueExpandFetchEvent=function(){var a=this._queueFetchEvent(!1,AdfTableDataFetchEvent.EXPAND_SUBTYPE);AdfDhtmlTableBasePeer.SetCursor(this.GetDatabody(),"wait");if(this._pruneKeyCache)a.setClientTokens(this._collectClientTokens(this._pruneKeyCache)),this._pruneKeyCache=null};AdfDhtmlTableBasePeer.prototype._queueCollapseFetchEvent=function(){this._queueFetchEvent(!1,AdfTableDataFetchEvent.COLLAPSE_SUBTYPE);AdfDhtmlTableBasePeer.SetCursor(this.GetDatabody(),"wait")};
AdfDhtmlTableBasePeer.prototype.BlockInserted=function(){};AdfDhtmlTableBasePeer.prototype.BlockDeleted=function(){};
AdfDhtmlTableBasePeer.prototype.DeleteBlock=function(a,b,d,e,f){for(var g=this.GetDatabody(),h=g.childNodes,k=0,l=0,m=0,n=h.length-1;n>=0&&m<b;n--){var o=h[n];k+=o.cachedHeight;var p=Math.max(a,o.startRow),s=Math.min(a+b-1,o.startRow+o.numRows-1),q=0,t=0,u=null;if(p==o.startRow&&s==o.startRow+o.numRows-1)t=o.cachedHeight,u=o,q=o.numRows,f&&(f.push(o),f.totalHeight+=o.offsetHeight);else{for(;s>=p;s--){var v=s-o.startRow;if(v==0){AdfAssert.assert(o.rows!=null&&o.rows[0]!=null,"Unable to copy cell widths when the block contains no rows!");
for(var w=o.rows[0].cells,y=o.rows[1].cells,z=0;z<y.length;z++)y[z].style.width=w[z].style.width}v=o.rows[v];f&&(f.push(v),f.totalHeight+=v.offsetHeight);this.UnregisterNode(v);v.parentNode.removeChild(v);q++}if(q>0)p=o.offsetHeight,t=o.cachedHeight-p,o.cachedHeight=p,o.numRows=o.rows.length;l+=o.cachedHeight}if(q>0){for(o=n+1;o<h.length;o++)p=h[o],p.startPos-=t,p.startRow-=q;u&&(this.UnregisterNode(u),g.removeChild(u))}m+=q}a=m==d?l-k:-this._averageRowHeight*d;this._knownRowCount-=d;this._rowCount!=
-1&&(this._rowCount-=d);this._adjustCanvasHeight(a,g);e==0&&(this._stretchTheColumns(),this._checkForScrollableLastBlockInViewport(g),this.BlockDeleted())};AdfDhtmlTableBasePeer.prototype.FetchCompleted=function(){};AdfDhtmlTableBasePeer.prototype.GetAssociatedComponent=function(){return this._associatedPeer!=null?this._associatedPeer.getComponent():null};
AdfDhtmlTableBasePeer.prototype._updateInitialARK=function(a){var b=this.getComponent();if(a=a.getAttribute("_initARK")){this._ignoreActiveRowKeyChange=!0;try{b.setProperty("_afrActiveRowKey",a,!1,AdfUIComponent.PROPAGATE_NEVER),b.setProperty("activeRowKey",a,!1,AdfUIComponent.PROPAGATE_NEVER)}finally{this._ignoreActiveRowKeyChange=!1}}};
AdfDhtmlTableBasePeer.prototype._updateComponentSelectionState=function(a){var b=this.getComponent();if(a=a.getAttribute("_selState"))eval("var st="+a+";"),b.setProperty("selectedRowKeys",st,!1,AdfUIComponent.PROPAGATE_NEVER)};
AdfDhtmlTableBasePeer.prototype._updateAutoPPRActiveRowKey=function(a){var b=this.getComponent(),a=AdfAgent.AGENT.getAttribute(a,"_autopprActiveRow",null);if(a!=null){this._ignoreActiveRowKeyChange=!0;try{a=a.length==0?null:a,b.setProperty("_afrActiveRowKey",a,!1,AdfUIComponent.PROPAGATE_NEVER),b.setProperty("activeRowKey",a,!1,AdfUIComponent.PROPAGATE_NEVER),this._processClickToEditRequestTimerId=AdfPage.PAGE.scheduleTimer(this,this._processClickToEditRequest,!1,10)}finally{this._ignoreActiveRowKeyChange=
!1}}};AdfDhtmlTableBasePeer.prototype._updateComponentDisclosureState=function(a){var b=this.getComponent();if(a=a.getAttribute("_discState"))eval("var st="+a+";"),b.setProperty("disclosedRowKeys",st,!1,AdfUIComponent.PROPAGATE_NEVER)};
AdfDhtmlTableBasePeer.prototype._initVirtualization=function(a,b){try{this._hideStatus();this._virtInitialized=!0;var d=AdfAgent.AGENT,e=d.getIntAttribute(a,"_startRow",0),f=AdfDhtmlTableBasePeer._getBlockRowCount(a),g=this.getComponent(),h=this.GetDatabody(),k=d.getIntAttribute(a,"_rowCount",-1),l=this._isPaged,m=this._getEstimatedRowCount(a);m>=0&&(f=m,k=-1);if(this._unavailableRowIndex==0)k=-1;else if(this._unavailableRowIndex>0)k=this._unavailableRowIndex;var n=this._knownRowCount=this._rowCount=
k,o=0;if(n==-1)this._knownRowCount=n=f;this._updateComponentSelectionState(a);this._updateInitialARK(a);var p=this.getDomElement();p.scrollLeft=0;var s=p.clientWidth,q=p.clientHeight,t=d.getIntAttribute(a,"_frWidth",0);this._frozenWidth=t;this._hasDetailStamp=d.getAttribute(a,AdfDhtmlTableBasePeer._HAS_DETAIL_MARKER,!1);if(!b){for(var u=h.childNodes,v=u.length-1;v>=0;v--)h.removeChild(u[v]);h.appendChild(a);s=p.clientWidth;q=p.clientHeight}var w=a.offsetHeight,y=AdfDhtmlTableBasePeer._getBlockRowCount(a);
a.cachedHeight=w;var z=Math.round(w/y);this._averageRowHeight=z;var C,C=!l&&n>f?z*n:k==-1&&!l&&w<q-this._cachedCHHeight-this._cachedCFHeight-this._cachedNBHeight?q-this._cachedCHHeight-this._cachedCFHeight-this._cachedNBHeight:w;k==-1&&(m>0&&(C+=z*m),C+=AdfDhtmlTableBasePeer._FETCH_MORE_CANVAS_SPACE);a.style.position="relative";h.scrollTop=0;a.startRow=e;a.numRows=y;a.startPos=!l&&e>0?o=z*e:0;var A=this._createAndInitializeScroller(p,s,q,C,t,a);h.onmousewheel=AdfDhtmlTableBasePeer._handleMouseWheel;
d.getPlatform()!=AdfAgent.IE_PLATFORM&&h.addEventListener("DOMMouseScroll",AdfDhtmlTableBasePeer._handleMouseWheel,!0);h.onscroll=this.createCallback(this._handleDataBodyScroll);var B=AdfAgent.guessOS()==AdfAgent.ANDROID_OS?1:2;this._touchMoveManager=d.createTouchMoveManager(h,this.createCallback(this._handleTouchMovement),B);this._innerTableScrollCallback=this.createCallback(this._handleInnerTableScroll);this._registerInnerScrollCallback(a);if(!this._headerless){var D=this.__getColumnHeader();if(this._lastFrozen<
0)D.onscroll=this._innerTableScrollCallback;else if(this._colCount>this._lastFrozen+1){var E=AdfDhtmlTableBasePeer.__getChildBySubId(D,"d2");E.onscroll=this._innerTableScrollCallback}}if(!this._footerless){var F=this._getColumnFooter();if(this._lastFrozen<0)F.onscroll=this._innerTableScrollCallback;else if(this._colCount>this._lastFrozen+1)E=AdfDhtmlTableBasePeer.__getChildBySubId(F,"fd2"),E.onscroll=this._innerTableScrollCallback}var G=this.SizeDatabody(h,s,q);h.style.zIndex=1;o=this._computeInitialScrollTop(g,
a,e,C,G,w);this._initScrollLeftTop(A,o);this._restoreScrollPosition();this._synchronizeRowHeights(a);this._stretchTheColumns();if(this.isHeightAutoSized()&&(this.AdjustAutoHeight(),this._currentScrollTop=o=this._computeInitialScrollTop(g,a,e,C,h.offsetHeight,w),o>0))this._footerless&&!l?A.scrollTop=o:A[0].scrollTop=A[1].scrollTop=o;this._fillViewPort(h,h.offsetHeight,!1);this._syncDataBodyHeights()}finally{this._updatePCState(),this.UpdateRange(!0)}};
AdfDhtmlTableBasePeer.prototype._computeInitialScrollTop=function(a,b,d,e,f,g){if(this._isPaged)return 0;var h=0;d>0&&(h=Math.min(b.startPos,e-f),h=Math.max(0,h));if("last"==a.getDisplayRow()&&f<e)h=e-f,b.startPos=e-g;return h};AdfDhtmlTableBasePeer.prototype._handleTouchMovement=function(a,b){var d=this.__getScrollPos();d&&(this._setScrollLeft(d.x-a),this._setScrollTop(d.y-b))};
AdfDhtmlTableBasePeer.prototype._syncDataBodyHeights=function(){var a=this.getComponent(),b=a.getProperty("_afrMasterId"),d=a.getProperty("_afrSlaveId");(b||d)&&this._footerless&&AdfPage.PAGE.scheduleTimer(this,this._syncDataBodyHeightsTimeout,a,0)};
AdfDhtmlTableBasePeer.prototype._syncDataBodyHeightsTimeout=function(a){a=a.findComponent(this._associatedId);AdfAssert.assert(a!=null,"There is no associated table");var b=a.getPeer(),a=this.GetDatabody(),d=b.GetDatabody(),e=this.GetScroller(),b=b.GetScroller();if(e&&b){var f=e.firstChild,g=b.firstChild;if(f&&g){var h=(e.style.overflowX=="auto"||e.style.overflow=="auto")&&e.offsetHeight>e.clientHeight,k=(b.style.overflowX=="auto"||b.style.overflow=="auto")&&b.offsetHeight>b.clientHeight,l=parseInt(a.style.height),
m=parseInt(d.style.height);if(!isNaN(l)&&!isNaN(m))k&&!h?(a.style.height=m+"px",e.style.height=b.style.height,e.style.overflowX="scroll",f.style.height=g.style.height):h&&!k?(d.style.height=l+"px",b.style.height=e.style.height,b.style.overflowX="scroll",g.style.height=f.style.height):b.style.overflowX=="auto"?(e.style.overflowX="auto",a.style.height=m+"px",e.style.height=b.style.height,f.style.height=g.style.height):(b.style.overflowX="auto",d.style.height=l+"px",b.style.height=e.style.height,g.style.height=
f.style.height)}}};
AdfDhtmlTableBasePeer.prototype._createAndInitializeScroller=function(a,b,d,e,f,g){var h;if(this._footerless&&!this._isPaged){var k=AdfAgent.AGENT,l=this.getDomDocument(),h=l.createElement("div");h.tabIndex=-1;h.id=a.id+"::scroller";var m=h.style;m.position="absolute";if(this._associatedId!=null){var n=this.getComponent();n.getProperty("_afrSlaveId")!=null?(m.overflowX="auto",m.overflowY="hidden"):m.overflow="auto";n=n.findComponent(this._associatedId);AdfAssert.assert(n!=null,"There is no associated table");
this._associatedPeer=n.getPeer();n=n.getPeer();if(n!=null&&n._associatedPeer!=this)n._associatedPeer=this}else m.overflow="auto";m.zIndex=0;m.width=Math.max(b-f,0)+"px";m.top=this._cachedCHHeight+"px";m.height=Math.max(d-this._cachedCHHeight,0)+"px";AdfDhtmlTableBasePeer._isRTL()?m.left="0px":m.right="0px";b=l.createElement("div");d=k.getIntAttribute(g,"_totalWidth",-1);if(d==-1)d=g.offsetWidth;if(k.getPlatform()==AdfAgent.IE_PLATFORM)b.style.position="absolute";b.style.width=d-f+"px";this._canvasHeight=
e;b.style.height=e+"px";b.style.visibility="hidden";h.appendChild(b);a.appendChild(h);k.elementsAdded(h)}else h=this._createAndInitializeColumnFooterScroller(a,b,d,e,f,g);return h};
AdfDhtmlTableBasePeer.prototype._initScrollLeftTop=function(a,b){this._currentScrollTop=b;if(this._footerless&&!this._isPaged){if(b>0)a.scrollTop=b;this._currentScrollLeft=AdfDhtmlTableBasePeer._isRTL()?a.scrollLeft:0;AdfRichUIPeer.addEventHandlerToDomInstance(AdfDhtmlTableBasePeer,a,AdfDhtmlLookAndFeel.SCROLL_EVENT_TYPE)}else{if(b>0)a[0].scrollTop=a[1].scrollTop=b;this._currentScrollLeft=AdfDhtmlTableBasePeer._isRTL()?a[0].scrollLeft:0;AdfRichUIPeer.addEventHandlerToDomInstance(AdfDhtmlTableBasePeer,
a[0],AdfDhtmlLookAndFeel.SCROLL_EVENT_TYPE);AdfRichUIPeer.addEventHandlerToDomInstance(AdfDhtmlTableBasePeer,a[1],AdfDhtmlLookAndFeel.SCROLL_EVENT_TYPE)}};
AdfDhtmlTableBasePeer.prototype._createAndInitializeColumnFooterScroller=function(a,b,d,e,f,g){var h=[],k=AdfAgent.AGENT,l=this.getDomDocument();hscroller=l.createElement("div");vscroller=l.createElement("div");hscroller.id=a.id+"::hscroller";vscroller.id=a.id+"::vscroller";hscroller.tabIndex=-1;vscroller.tabIndex=-1;var m=hscroller.style,n=vscroller.style;m.position=n.position="absolute";if(this._associatedId!=null){var o=this.getComponent();n.overflowY=o.getProperty("_afrSlaveId")!=null?"hidden":
"auto";n.overflowX="hidden";m.overflowY="hidden";m.overflowX="auto";o=o.findComponent(this._associatedId);AdfAssert.assert(o!=null,"There is no associated table");this._associatedPeer=o.getPeer();o=o.getPeer();if(o!=null&&o._associatedPeer!=this)o._associatedPeer=this}else n.overflowY="auto",n.overflowX="hidden",m.overflowY="hidden",m.overflowX="auto";m.zIndex=n.zIndex=0;n.width=Math.max(b-f,0)+"px";n.top=this._cachedCHHeight+"px";n.height=Math.max(d-this._cachedCHHeight-this._cachedCFHeight-this._cachedNBHeight,
0)+"px";AdfDhtmlTableBasePeer._isRTL()?n.left="0px":n.right="0px";var o=l.createElement("div"),l=l.createElement("div"),p=k.getIntAttribute(g,"_totalWidth",-1);if(p==-1)p=g.offsetWidth;if(k.getPlatform()==AdfAgent.IE_PLATFORM)o.style.position=l.style.position="absolute";o.style.width=l.style.width=p-f+"px";this._canvasHeight=e;o.style.height=l.style.height=e+"px";hscroller.appendChild(o);vscroller.appendChild(l);a.appendChild(vscroller);k.elementsAdded(vscroller);m.top=this._cachedCHHeight+"px";m.height=
Math.max(d-this._cachedCHHeight,0)+"px";e=vscroller.offsetWidth-vscroller.clientWidth;AdfDhtmlTableBasePeer._isRTL()?m.left=e+"px":m.right=e+"px";m.width=Math.max(b-f-e,0)+"px";a.appendChild(hscroller);k.elementsAdded(hscroller);n.height=Math.max(d-this._cachedCHHeight-this._cachedCFHeight-this._cachedNBHeight-(hscroller.offsetHeight-hscroller.clientHeight),0)+"px";h[AdfDhtmlTableBasePeer._HSCROLLER]=hscroller;h[AdfDhtmlTableBasePeer._VSCROLLER]=vscroller;return h};
AdfDhtmlTableBasePeer.prototype._updatePCState=function(){var a=this.getDomElement().getAttribute(AdfDhtmlTableBasePeer._PANEL_COLLECTION_ID);if(a!=null){a=this._pcPeer=AdfPage.PAGE.findComponent(a).getPeer();with(a)resetState(),updateStandardMenuToolbarItems(),updateStandardStatusbarItems(),updateRowSelectionContext()}};
AdfDhtmlTableBasePeer.prototype.__getVisibleLeafColumns=function(){if(this._visibleLeafColumns!=null)return this._visibleLeafColumns;var a=this.getDomElement(),a=AdfAgent.AGENT.getAttribute(a,"_leafColClientIds"),a=eval(a),b=[];if(a!=null)for(var d=a.length,e=0;e<d;e++){var f=AdfPage.PAGE.findComponent(a[e]);b.push(f)}return this._visibleLeafColumns=b};
AdfDhtmlTableBasePeer.__getSortOrderForColumn=function(a){var b=null;if(a=AdfAgent.AGENT.getElementById(AdfRichUIPeer.CreateSubId(a,AdfDhtmlTableBasePeer.__SORT_INDICATOR)))a=a.getAttribute(AdfDhtmlTableBasePeer._SORTED_TYPE),a==AdfDhtmlTableBasePeer._SORTED_DESCENDING?b=!1:a==AdfDhtmlTableBasePeer._SORTED_ASCENDING&&(b=!0);return b};AdfDhtmlTableBasePeer.prototype.__getColumnResizeMargin=function(){AdfAssert.failedInAbstractFunction()};
AdfDhtmlTableBasePeer.prototype.HandleDomMouseMove=function(a,b){if(!this._headerless&&this._virtInitialized)if(this._resizedTH){var d=this._getParentTH(b);d&&(!a.getColumnResizing||a.getColumnResizing()=="enabled")&&AdfDhtmlTableBasePeer.SetCursor(d,AdfAgent.AGENT.getCursor("col-resize"))}else if(d=this._mdPos){var e=AdfAgent.AGENT.getMousePosition(b);if(Math.abs(e.x-d.x)>this.__getColumnResizeMargin())this._mdPos=null,this._processColumnReorderAction(b)}else if(this._reorderTH)AdfDhtmlTableBasePeer.SetCursor(this._reorderTH,
"move");else if(d=this.__getColumnHeaderMouseAction(b))e=d.cell,"resize"==d.type&&this._getResizedCellInfo(d)&&(!a.getColumnResizing||a.getColumnResizing()=="enabled")?AdfDhtmlTableBasePeer.SetCursor(e,AdfAgent.AGENT.getCursor("col-resize")):"move"==d.type?AdfDhtmlTableBasePeer.SetCursor(e,AdfAgent.AGENT.getCursor("move")):"default"==d.type?AdfDhtmlTableBasePeer.SetCursor(e,"default"):AdfDhtmlTableBasePeer.SetCursor(e,"")};
AdfDhtmlTableBasePeer.prototype.__handleColumnResizing=function(a,b){if(b==null&&(b=this.__getColumnHeaderMouseAction(a.getNativeEvent()),b==null))return;if(b.type=="resize"){var d=this._getResizedCellInfo(b);if(d)this._resizedTH=d.cell,this._resizedIndex=d.displayIndex,this._showColumnResizeIndicator(d.cell,d.displayIndex),this._resizeColDelta=0,d=this.__getColumnHeader(),AdfAgent.AGENT.disableUserSelect(d),a.cancel(),d=a.getNativeEvent(),AdfPage.PAGE.startDrag(d,this._colResizeDragCallback,this._colResizeDropCallback)}};
AdfDhtmlTableBasePeer.prototype.HandleComponentMouseDown=function(a){var b=a.getNativeEvent(),d=this.__getColumnHeaderMouseAction(b),e=d?d.type:null;if((this._virtInitialized||"clearAllFilter"==e)&&this.__isOwnComponentEvent(a)){var f=AdfAgent.AGENT,g=f.getEventTarget(b),e=this.GetRowKeyAndRow(g,this.getDomElement());if(e!=null&&(d=e[0],e=e[1],d!=null)){this._getExpandAction(g)||this._handleRowMouseDown(b,d,e);return}if(f.isLeftButton(b))if(e=(d=this.__getColumnHeaderMouseAction(b))?d.type:null,this._isTargetCellEditable(g)&&
"clearAllFilter"!=e){if(this._cellNavMode)this._cellNavMode=!1}else if(e){if("selectAll"==e)this._grabFocus(),(b=this.getComponent().getSelectedRowKeys())&&b[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]?(this._selUnselectAll(),this._queueColumnSelectionEvent()):this._selSelectAll();else if("clearAllFilter"==e)b=this.getComponent(),f=new AdfQueryEvent(b),f.setClearAll(!0),b.queueEvent(f);else if("resize"==e)this.__handleColumnResizing(a,d);else if("move"==e)this._mdPos=f.getMousePosition(b),this._reorderTH=
d.cell,a.cancel();else if("select"==e&&(this._grabFocus(),a=d.colIndices,a.length>0)){if(!b.shiftKey)this._anchorColumnHeader=d.cell;this._doColumnSelections(b,a,d.colIds);if(this._isMultipleColumnSelect()){if(null==this._handleColumnHeaderDragCallback)this._handleColumnHeaderDragCallback=this.createCallback(this._handleColumnHeaderDrag),this._handleColumnHeaderDropCallback=this.createCallback(this._handleColumnHeaderDrop);a=this.__getColumnHeader();f.disableUserSelect(a);AdfPage.PAGE.startDrag(b,
this._handleColumnHeaderDragCallback,null)}}"resize"!=e&&"sort"!=e&&d.cell!=null&&this.UpdateFocusManager("selectAll"==e?AdfDhtmlTableBasePeer._SELECT_ALL_FOCUS_TYPE:AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,d.cell)}}};AdfDhtmlTableBasePeer.prototype.HandleComponentMouseUp=function(a){this._reorderTH=this._mdPos=null;a=a.getNativeEventTarget();this._cellNavMode&&a.nodeName=="INPUT"&&a.type=="text"&&AdfPage.PAGE.scheduleTimer(this,this._selectInputOnMouseUp,a,0)};
AdfDhtmlTableBasePeer.prototype._selectInputOnMouseUp=function(a){(a.selectionStart!=null?a.selectionEnd-a.selectionStart>0:this.getDomDocument().selection.createRange().text)||a.select()};AdfDhtmlTableBasePeer.prototype.HandleComponentDblClick=function(a){if(this._virtInitialized&&this.__isOwnComponentEvent(a)&&this._isTargetCellEditable(a.getNativeEventTarget())){if(this._cellNavMode)this._cellNavMode=!1;this._ctePatternStart=void 0}};
AdfDhtmlTableBasePeer.prototype._getOnlyTextNode=function(a){var b=a.ownerDocument,d=null;if(b.evaluate)a=b.evaluate(".//text()",a,null,XPathResult.ANY_TYPE,null),(d=a.iterateNext())&&a.iterateNext()&&(d=null);else{(b=a.firstChild)&&b.nodeType==3&&(d=b);for(var a=a.getElementsByTagName("*"),e=a.length,f=0;f<e;f++)if((b=a[f].firstChild)&&b.nodeType==3)if(d){d=null;break}else d=b}return d};
AdfDhtmlTableBasePeer.prototype._isCellTruncated=function(a){var b=a.cloneNode(!0),d=!1;AdfAgent.AGENT.copyStyle(a,b);b.style.width="";for(var e=b.getElementsByTagName("input"),f=e.length-1;f>=0;f--){var g=e[f];g.id="";g.name=""}e=this.getDomElement();f=a.ownerDocument.createElement("table");e.appendChild(f);f.insertRow(-1).appendChild(b);a.offsetWidth<b.offsetWidth&&(d=!0);e.removeChild(f);return d};
AdfDhtmlTableBasePeer.prototype.HandleComponentContextMenu=function(a){var b=a.getNativeEvent(),d=AdfAgent.AGENT;if(a.isPositionalRequest()){if(a=this.__getColumnHeader())var e=d.getElementPosition(a);var f=d.getMousePosition(b);if(a&&f.y-e.y<=this._cachedCHHeight)this._handleColumnContextMenu(b);else if(d=d.getEventTarget(b),!this._isTargetCellEditable(d)){e=this.GetRowKeyAndRow(d,this.getDomElement());if(e!=null&&(d=e[0],e=e[1],d!=null)){this.HandleRowContextMenu(b,d,e);return}this._handleBodyContextMenu(b)}}else this._handleKeyboardContextMenu(b,
!1)};AdfDhtmlTableBasePeer.prototype._hideColumnSortableIndicator=function(a,b){if(b&&b.colSpan<2){var d=AdfRichUIPeer.CreateSubId(b.id,AdfDhtmlTableBasePeer.__SORT_INDICATOR),d=a.getElementById(d);if(d!=null){var e=d.getAttribute(AdfDhtmlTableBasePeer._SORTED_TYPE),f=d.getAttribute(AdfDhtmlTableBasePeer._SUPPORTS_HOVER);if(e==null&&f)d.style.display="none"}}};
AdfDhtmlTableBasePeer.prototype.HandleComponentClick=function(a){if(!this.__isOwnComponentEvent(a))return!1;var b=this.getComponent(),d=AdfAgent.AGENT,e=a.getNativeEvent(),f=d.getEventTarget(e),g=this.GetRowKeyAndRow(f,this.getDomElement());if(g!=null){var h=g[0],g=g[1];if(h!=null)return a.isLeftButtonPressed()&&(d=this._getExpandAction(f),"expand"==d?b.setDisclosedRowKey(h,!0):"collapse"==d?b.setDisclosedRowKey(h,!1):this._handleRowClick(e,h,g)),!0}if(!this._headerless&&(h=this.__getColumnHeaderMouseAction(e))&&
"sort"==h.type)return AdfTableUtils.queueSortEvent(b,[h.sortProperty],[h.sortOrder]),d.eatEvent(e),!1;this._hasNavBar&&this.__handleNavBarItemsClick(e,f);return!0};AdfDhtmlTableBasePeer.prototype.HandleComponentValueChange=function(a){if(!a.isCanceled()){var b=a.getSource(),d=b.getPeer();d.bind(b);this._isTargetCellFilter(d.getDomElement())&&a.propagatesToServer()&&this._handleFilterCellAction()}};
AdfDhtmlTableBasePeer.prototype.HandleDomScroll=function(a){var b=this.__getScrollLeft(),a=this._associatedPeer!=null&&AdfAgent.AGENT.getPlatform()==AdfAgent.GECKO_PLATFORM&&a.getProperty("_afrSlaveId")!=null?-1:this._getScrollTop();this.scrollToPos(b,a);this._associatedPeer!=null&&this._associatedPeer.scrollToPos(-1,a)};AdfDhtmlTableBasePeer.prototype._handleInnerTableScroll=function(a){if(!a)a=AdfPage.PAGE.getDomWindow().event;this.scrollToPos(AdfAgent.AGENT.getEventTarget(a).scrollLeft,-1)};
AdfDhtmlTableBasePeer.prototype._handleDataBodyScroll=function(){if(this._handleDataCallbackBeingProcessed===!0)this._handleDataBodyScrollTimeout!=null&&(window.clearTimeout(this._handleDataBodyScrollTimeout),delete this._handleDataBodyScrollTimeout),this._handleDataBodyScrollTimeout=window.setTimeout(this.createCallback(this._handleDataBodyScroll),0);else{var a=this.GetDatabody(),b=a.firstChild;if(b){var b=a.scrollTop+b.startPos,d=-1;if(this._lastFrozen<0)d=a.scrollLeft;this.scrollToPos(d,b);this._associatedPeer!=
null&&this._associatedPeer.scrollToPos(-1,b)}}};AdfDhtmlTableBasePeer.prototype.__getScrollPos=function(){if(this.GetScroller()!=null)return{x:this.__getScrollLeft(),y:this._getScrollTop()};return null};AdfDhtmlTableBasePeer.prototype.__restoreScrollerPositions=function(a,b){this._setScrollTop(b);this._setScrollLeft(a)};
AdfDhtmlTableBasePeer.prototype.scrollToPos=function(a,b,d){var e=this.getComponent();if(b!=-1&&this._currentScrollTop!=b){delete this._cachedFirstVisibleRowKeyAndRow;d||e.setProperty("scrollTop",b,!0,AdfUIComponent.PROPAGATE_ALWAYS);this._setScrollTop(b);this._handleVerticalScroll(b);this._isPaged||(b=this.GetFirstVisibleRowKeyAndRow(),b.rowKey!=null&&e.setProperty("scrollTopRowKey",b.rowKey,!0,AdfUIComponent.PROPAGATE_ALWAYS));for(var b=this.GetDatabody().childNodes,f=b.length-1;f>=0;f--)this._synchronizeRowHeights(b[f])}a!=
-1&&this._currentScrollLeft!=a&&(d||e.setProperty("scrollLeft",a,!0,AdfUIComponent.PROPAGATE_ALWAYS),this._setScrollLeft(a),this._handleHorizontalScroll(a))};
AdfDhtmlTableBasePeer.prototype.HandleDomKeyDown=function(a,b){var d=AdfAgent.AGENT,e=d.getEventTarget(b),f=b.keyCode;switch(f){case AdfKeyStroke.ESC_KEY:if(this._isTargetCellEditable(e))!this._cellNavMode&&void 0!=e._afrOldValue&&(AdfPage.PAGE.scheduleTimer(null,AdfDhtmlTableBasePeer._restoreEditableValueOnEsc,e,0),d.eatEvent(b)),this._cellNavMode=!0;break;case AdfKeyStroke.ARROWUP_KEY:case AdfKeyStroke.ARROWDOWN_KEY:case AdfKeyStroke.ARROWRIGHT_KEY:case AdfKeyStroke.ARROWLEFT_KEY:var g=!0,h=this._isTargetCellEditable(e);
h&&this._cellNavMode?g=this._handleArrowKeyNav(f,e,b):this._cellNavMode&&this._isClickToEdit()&&!this._editableTableReadOnlyMode&&this.GetFocusedRowKey()!=null&&(f==AdfKeyStroke.ARROWUP_KEY||f==AdfKeyStroke.ARROWDOWN_KEY)?(this._clickToEditActivateRow(this.GetFocusedRowKey(),f==AdfKeyStroke.ARROWDOWN_KEY,this._lastCTEIndex),g=!1):h||(d.disableUserSelect(d.getDomDocument().body),this._handleArrow(f,b),g=!1);g||d.eatEvent(b);break;case AdfKeyStroke.ENTER_KEY:if((d=this._getParentTH(b))&&d.getAttribute("_afrFH")!=
null)d=new AdfQueryEvent(a),d.setClearAll(!0),a.queueEvent(d)}};AdfDhtmlTableBasePeer._restoreEditableValueOnEsc=function(a){a.value=a._afrOldValue;a.type=="text"&&typeof a.select!=void 0&&a.select()};
AdfDhtmlTableBasePeer.prototype._handleHorizontalScroll=function(a){var b=this.GetDatabody();if(this._lastFrozen<0){if(!this._headerless)this.__getColumnHeader().scrollLeft=a;if(!this._footerless)this._getColumnFooter().scrollLeft=a;b.scrollLeft=a}else{this._headerless||AdfDhtmlTableBasePeer._scrollColumnHeader(this.__getColumnHeader(),a);this._footerless||AdfDhtmlTableBasePeer._scrollColumnFooter(this._getColumnFooter(),a);for(var b=b.childNodes,d=0;d<b.length;d++)AdfDhtmlTableBasePeer._positionInnerTable(b[d],
a)}};
AdfDhtmlTableBasePeer.prototype._handleVerticalScroll=function(a){if(!(this._pendingFetch==AdfTableDataFetchEvent.EXPAND_SUBTYPE||this._pendingFetch==AdfTableDataFetchEvent.COLLAPSE_SUBTYPE)){var b=this.GetDatabody();this._isPaged?b.scrollTop=a:(a=this._fillViewPort(b,b.offsetHeight,!0,!0),this._selectionRequest!=null&&(a==AdfDhtmlTableBasePeer.VIEWPORT_SATISFIED?this._processSelectionRequest():a!=AdfDhtmlTableBasePeer.MISSING_BEFORE&&a!=AdfDhtmlTableBasePeer.MISSING_AFTER&&delete this._selectionRequest),this._clickEditRequest!=
null&&a==AdfDhtmlTableBasePeer.VIEWPORT_SATISFIED&&this._processClickToEditActivateRequest())}};
AdfDhtmlTableBasePeer.prototype._fillViewPort=function(a,b,d,e){var f=AdfDhtmlTableBasePeer.VIEWPORT_SATISFIED;if(this._isPaged)return this._hideStatus(),AdfDhtmlTableBasePeer.SetCursor(a,""),this.AdjustAutoHeight(),f;this._knownRowCount>0&&(f=this._isViewportSatisfied(a,b),f==AdfDhtmlTableBasePeer.VIEWPORT_SATISFIED?(this._repositionBlocksForScroll(a),this._hideStatus(),AdfDhtmlTableBasePeer.SetCursor(a,""),b=this._canvasHeight-b,b>0&&(this._currentScrollTop<b/2?this._checkStart(a):this._checkEnd(a)),
this.AdjustAutoHeight()):f&AdfDhtmlTableBasePeer.MISSING_BEFORE?this._addAbove(a,b,d,e):f&AdfDhtmlTableBasePeer.MISSING_AFTER?this._addBelow(a,b,d,e):this._handleLongJump(a,b,d,e));return f};
AdfDhtmlTableBasePeer.prototype._isViewportSatisfied=function(a,b){var d=a.childNodes,e=d.length,f=AdfDhtmlTableBasePeer.NO_BLOCKS,g=this._currentScrollTop;if(e>0&&(f=AdfDhtmlTableBasePeer.VIEWPORT_SATISFIED,!this._allRowsAvailableOnClient(d,e))){var h=d[0],d=d[e-1],e=h.startPos-g,k=d.startPos+d.cachedHeight-g;if(e>0||g==0&&h.startRow>0)f|=AdfDhtmlTableBasePeer.MISSING_BEFORE;if(k<b&&this._canvasHeight>=b||g>=this._canvasHeight-b&&d.startRow+d.numRows<this.GetKnownRowCount())f|=AdfDhtmlTableBasePeer.MISSING_AFTER;
if(f!=AdfDhtmlTableBasePeer.VIEWPORT_SATISFIED&&(e>b||k<0))f=AdfDhtmlTableBasePeer.NO_BLOCKS}return f};AdfDhtmlTableBasePeer.prototype._addAbove=function(a,b,d,e){var f=a.childNodes,g=f.length,h=f[0];if(h.startRow==0){for(h=e=0;h<g;h++){var k=f[h],l=k.cachedHeight;k.startPos=e;e+=l}this._setScrollTop(0);this._fillViewPort(a,b,d)}else a=h.startRow,b=this._getBlockFirstRowKey(h),this._startFetch(AdfTableDataFetchEvent.BEFORE_KEY_SUBTYPE,a,b,d,!e)};
AdfDhtmlTableBasePeer.prototype._addBelow=function(a,b,d,e){var f=a.childNodes,g=f.length,h=f[g-1],k=h.startRow+h.numRows,l=this.GetRowCount();if(l>0&&k>=l){e=this._canvasHeight-b;h=this._canvasHeight;for(g-=1;g>=0;g--)k=f[g],h-=k.cachedHeight,k.startPos=h;this._setScrollTop(e);this._fillViewPort(a,b,d)}else a=k-1,b=this._getBlockLastRowKey(h),this._startFetch(AdfTableDataFetchEvent.AFTER_KEY_SUBTYPE,a,b,d,!e)};
AdfDhtmlTableBasePeer.prototype._handleLongJump=function(a,b,d,e){var f,g,h,k,l,m=this.getComponent().getFetchSize(),f=this._currentScrollTop,k=this.GetKnownRowCount(),n=AdfPage.PAGE.getLookAndFeel(),h=this.GetRowCount()==-1?AdfDhtmlTableBasePeer._FETCH_MORE_CANVAS_SPACE:0;f>=this._canvasHeight-h-b?(h=AdfTableDataFetchEvent.UP_TO_INDEX_SUBTYPE,g=k-1,f=n.getTranslatedString("af_table.LABEL_END"),this.GetRowCount()==-1&&(f=n.getTranslatedString("af_table.LABEL_ROW",g+1)),l=g,k=l-m+1):(h=AdfTableDataFetchEvent.FROM_INDEX_SUBTYPE,
f==0?(f=n.getTranslatedString("af_table.LABEL_START"),g=0):(g=Math.round(f/this._averageRowHeight),f=n.getTranslatedString("af_table.LABEL_ROW",g+1),AdfAssert.assert(g<k)),k=g,l=g+m-1);var o=a.childNodes;if(o.length>0)if(m=o[o.length-1],o=o[0].startRow,m=m.startRow+m.numRows,k>=o&&k<m){this._addBelow(a,b,d,e);return}else if(l>=o&&l<m){this._addAbove(a,b,d,e);return}d&&this.DisplayStatus(n.getTranslatedString("af_table.LABEL_GOING_TO",f));this._startFetch(h,g,null,d,!e)};
AdfDhtmlTableBasePeer.prototype._deleteOffscreenBlocks=function(a,b,d){for(var e=a.childNodes,f=this._currentScrollTop,g=e.length-1;g>=0;g--){var h=e[g];if(h!=d){var k=h.startPos-f;if(k+h.cachedHeight<0||k>b)this.UnregisterNode(h),a.removeChild(h)}}};AdfDhtmlTableBasePeer.prototype.UnregisterNode=function(a){AdfPage.PAGE.removeComponentsInSubtree(a);AdfAgent.AGENT.elementsRemoved(a)};
AdfDhtmlTableBasePeer.prototype._repositionBlocksForScroll=function(a){var b=a.firstChild,d=this._currentScrollTop;if(b)a.scrollTop=d-b.startPos};AdfDhtmlTableBasePeer.prototype._undoScroll=function(){var a=this.GetDatabody(),b=a.firstChild;b&&this._setScrollTop(b.startPos+a.scrollTop)};AdfDhtmlTableBasePeer.prototype._restoreSavedDisclosureState=function(){this.getComponent().setProperty("disclosedRowKeys",this._savedDisclosedState,!1,AdfUIComponent.PROPAGATE_NEVER);this._savedDisclosedState=void 0};
AdfDhtmlTableBasePeer.prototype._queueFetchEvent=function(a,b,d,e){var f=this._fetchId++,g=this.getComponent(),h=new AdfTableDataFetchEvent(g,f,b,d,e);h.setPartial(!0);h.setRenderOnly(a);var k=!1;a?AdfPage.PAGE.queueEventToServer(h):(g.queueEvent(h),k=h.isCanceled());if(!k)this._pendingFetch=b,this._pendingId=f,this._fetchIndex=d,this._fetchKey=e,this._pendingRenderOnly=a;return k?null:h};
AdfDhtmlTableBasePeer.prototype._startFetch=function(a,b,d,e,f){if(!(a==this._pendingFetch&&b==this._fetchIndex&&d==this._fetchKey))if(e)e=new Function("var c = arguments.callee;c._self._delayedNavigate(c._sTop, c._subtype, c._index, c._key, c._renderOnly);"),e._sTop=this._currentScrollTop,e._subtype=a,e._index=b,e._key=d,e._renderOnly=f,e._self=this,setTimeout(e,300),this.CancelPendingFetch();else if(a=this._queueFetchEvent(f,a,b,d)){if(this.DisplayStatus(AdfPage.PAGE.getLookAndFeel().getTranslatedString("af_table.LABEL_FETCHING")),
AdfDhtmlTableBasePeer.SetCursor(this.GetDatabody(),"wait"),this._pruneKeyCache)a.setClientTokens(this._collectClientTokens(this._pruneKeyCache)),this._pruneKeyCache=null}else this._undoScroll()};AdfDhtmlTableBasePeer.prototype._delayedNavigate=function(a,b,d,e,f){this._currentScrollTop==a&&this._startFetch(b,d,e,!1,f)};AdfDhtmlTableBasePeer.prototype.CancelPendingFetch=function(){this._pendingRenderOnly=this._pendingId=this._fetchKey=this._fetchIndex=this._pendingFetch=void 0};
AdfDhtmlTableBasePeer.prototype.IsFetchPending=function(){return this._pendingFetch!=void 0};AdfDhtmlTableBasePeer.prototype.isDisclosureFetchPending=function(){return this._pendingFetch==AdfTableDataFetchEvent.EXPAND_SUBTYPE||this._pendingFetch==AdfTableDataFetchEvent.COLLAPSE_SUBTYPE};
AdfDhtmlTableBasePeer.prototype.InsertBlock=function(a,b,d,e,f){var g=AdfAgent.AGENT;this._initNewBlock(a,b,d);for(var h=this.GetDatabody(),k=h.offsetHeight,l=null,m=h.childNodes,n=0;n<m.length&&!l;n++){var o=m[n];b>=o.startRow&&b<=o.startRow+o.numRows&&(l=o)}AdfAssert.assert(l);m=null;n=!1;this._sizeBlockForFrozenColumns(a,h.offsetWidth);this._registerInnerScrollCallback(a);this._stretchLastBlockColumn(a);if(b==l.startRow)n=!0,h.insertBefore(a,l);else{if(b<l.startRow+l.numRows){if(d==e){m=l.cloneNode(!1);
m.numRows=l.numRows-b+l.startRow;var p=AdfDomUtils.getFirstDescendentElement(l,"TBODY");AdfAssert.assert(p!=null,"Illegal State: data block with no tbody");for(var o=p.cloneNode(!1),s=l.rows,q=l.numRows-1;q>=b-l.startRow;q--){var t=s[q];p.removeChild(t);o.insertBefore(t,o.firstChild)}g.getPlatform()==AdfAgent.WEBKIT_PLATFORM&&(p=AdfDomUtils.getFirstDescendentElement(a,"COLGROUP"))&&m.appendChild(p.cloneNode(!0));m.appendChild(o);o=m.rows[0].cells;p=l.rows[0].cells;for(s=0;s<o.length;s++)o[s].style.width=
p[s].style.width}else for(q=l.numRows-1;q>=b-l.startRow;q--)g.elementsRemoved(l.rows[q]),l.deleteRow(q);m&&g.elementsAdded(m);l.numRows=b-l.startRow;l.cachedHeight=l.offsetHeight}h.insertBefore(a,l.nextSibling)}this.SetNewBlockScrollLeft(a);a.cachedHeight=a.offsetHeight;a.startPos=n?l.startPos:l.startPos+l.cachedHeight;this._synchronizeRowHeights(a);if(m)h.insertBefore(m,a.nextSibling),m.cachedHeight=m.offsetHeight,this.SetNewBlockScrollLeft(m);g=0;if(d==e){for(g=a;current=g.nextSibling;)current.startRow=
g.startRow+g.numRows,current.startPos=g.startPos+g.cachedHeight,g=current;g=a.cachedHeight}else{for(g=h.lastChild;a!=g;)this.UnregisterNode(g),h.removeChild(g),g=h.lastChild;g=this._averageRowHeight*e}this._knownRowCount+=e;this._rowCount!=-1&&(this._rowCount+=e);this._adjustCanvasHeight(g,h);f==0&&(this.isHeightAutoSized()||this._deleteOffscreenBlocks(h,k,a),this._stretchTheColumns(),this._checkForScrollableLastBlockInViewport(h),this.BlockInserted(a,b,d))};
AdfDhtmlTableBasePeer.prototype._initNewBlock=function(a,b,d){a.style.position="relative";a.startRow=b;a.numRows=d};AdfDhtmlTableBasePeer.prototype.SetNewBlockScrollLeft=function(a){var b=this._currentScrollLeft;this._lastFrozen>=0&&b!=0&&AdfDhtmlTableBasePeer._positionInnerTable(a,b)};
AdfDhtmlTableBasePeer.prototype._adjustCanvasHeight=function(a,b,d,e){if(a!=0){if(this._isPaged)this._canvasHeight+=a;else{var f=this._canvasHeight,g=this._canvasHeight+a,h=this.GetRowCount()==-1?AdfDhtmlTableBasePeer._FETCH_MORE_CANVAS_SPACE:0,k=this.GetKnownRowCount();this._averageRowHeight=Math.round((g-h)/k);this._canvasHeight=this._averageRowHeight*k+h}this._setFakeCanvasHeight(this._canvasHeight);if(e&&(e=this._canvasHeight/f,f=b.firstChild)){g=f.startPos;f.startPos=Math.round(f.startPos*e);
g=f.startPos-g;for(f=f.nextSibling;f;)f.startPos+=g,f=f.nextSibling;this._setScrollTop(Math.round(this._currentScrollTop*e))}this._currentScrollTop=this._getScrollTop()}if(a!=0||d)a=this.getDomElement(),this.SizeDatabody(b,a.clientWidth,a.clientHeight)};
AdfDhtmlTableBasePeer.prototype._checkForScrollableLastBlockInViewport=function(a){var b=a.lastChild;if(b!=null&&this.GetRowCount()==b.startRow+b.numRows&&b.startPos+b.cachedHeight>this._canvasHeight)this._canvasHeight=b.startPos+b.cachedHeight,this._setFakeCanvasHeight(this._canvasHeight),b=this.getDomElement(),this.SizeDatabody(a,b.clientWidth,b.clientHeight)};
AdfDhtmlTableBasePeer.prototype.SizeDatabody=function(a,b,d){var e=this._getScrollbarWidth(),f=this._getScrollbarHeight(),b=Math.max(0,b-e);a.style.width=b+"px";d=Math.max(0,d-this._cachedCHHeight-this._cachedCFHeight-this._cachedNBHeight-f);a.style.height=d+"px";if(!this._headerless)e=this.__getColumnHeader().style,e.width=a.style.width,f>0?e.borderRightWidth="":e.borderRightWidth="0px";if(!this._footerless)e=this._getColumnFooter().style,e.width=a.style.width,f>0?e.borderRightWidth="":e.borderRightWidth=
"0px";!this.IsEmpty&&this._lastFrozen>=0&&this._sizeRegionsForFrozenColumns(a,b);return this._databodyHeight=d};AdfDhtmlTableBasePeer.prototype._getScrollbarWidth=function(){if(this.IsEmpty)return 0;var a,a=this.GetScroller();if(!this._footerless||this._isPaged)a=a[AdfDhtmlTableBasePeer._VSCROLLER];return a=a.offsetWidth-a.clientWidth};
AdfDhtmlTableBasePeer.prototype._getScrollbarHeight=function(){var a;if(this.IsEmpty)a=this.getDomElement(),a=a.offsetHeight-a.clientHeight;else{a=this.GetScroller();if(!this._footerless||this._isPaged)a=a[AdfDhtmlTableBasePeer._HSCROLLER];a=a.clientHeight>3?a.offsetHeight-a.clientHeight:0}return a};
AdfDhtmlTableBasePeer.prototype._handleDataCallback=function(a,b,d,e){var f=AdfAgent.AGENT,g=f.getIntAttribute(a,"_startRow",0),h=AdfDhtmlTableBasePeer._getBlockRowCount(a);if(b==AdfTableDataFetchEvent.EXPAND_SUBTYPE)return this.HandleExpand(a,h,e);if(b==AdfTableDataFetchEvent.COLLAPSE_SUBTYPE)return this.HandleCollapse(a,g,e);if(b==AdfTableDataFetchEvent.CLICK_EDIT_ACTIVE_ROW)return this.HandleClickToEditActiveRow(a,h,e);var k=this.GetDatabody(),e=k.offsetHeight,l=k.childNodes,m=l.length,n=this._currentScrollTop;
this._initNewBlock(a,g,h);h>0&&(this._sizeBlockForFrozenColumns(a,k.offsetWidth),this._registerInnerScrollCallback(a),this._stretchLastBlockColumn(a));this._handleDataCallbackBeingProcessed=!0;try{if(b==AdfTableDataFetchEvent.FROM_INDEX_SUBTYPE||b==AdfTableDataFetchEvent.UP_TO_INDEX_SUBTYPE){this.RemoveAllBlocks(k);k.appendChild(a);var o=a.offsetHeight;this._adjustRowCountFromResponse(k,a,h,o);d=0;n>=this._canvasHeight-e&&(d=o-e);a.startPos=n-d;a.cachedHeight=o}else{if(b==AdfTableDataFetchEvent.AFTER_KEY_SUBTYPE){var p=
l[m-1];if(h==0)if(this.GetRowCount()==-1){var s=f.getIntAttribute(p,"_rowCount",-1);this._rowCount=s==-1?this._knownRowCount:s;if(l[0].startPos==0&&p.startPos+p.cachedHeight<=this._canvasHeight)this._canvasHeight=p.startPos+p.cachedHeight,this._setFakeCanvasHeight(this._canvasHeight)}else this._adjustRowCountFromResponse(k,a);else{a.startPos=p.startPos+p.cachedHeight;k.appendChild(a);a.cachedHeight=a.offsetHeight;var q=g-p.startRow-p.numRows;q!=0&&this.ShiftIndex(p,q,!1);this._adjustRowCountFromResponse(k,
a);if(q!=0&&!this.IsReceivingActiveEvents())for(var t=p;t;){var u=t.previousSibling;this.UnregisterNode(t);k.removeChild(t);t=u}var v=g+h-this.GetKnownRowCount();if(v>0){this._knownRowCount+=v;var w=a.cachedHeight;if(v<h)for(var w=0,y=a.rows,o=h-v;o<h;o++)w+=y[o].offsetHeight;this._adjustCanvasHeight(w,k)}else this._checkForScrollableLastBlockInViewport(k)}}else if(b==AdfTableDataFetchEvent.BEFORE_KEY_SUBTYPE){var z=l[0];k.insertBefore(a,z);var C=a.offsetHeight;a.startPos=z.startPos-C;a.cachedHeight=
C;q=g-z.startRow+h;q!=0&&this.ShiftIndex(z,q,!0);var A=this._adjustRowCountFromResponse(k,a);if((q!=0||A!=0)&&!this.IsReceivingActiveEvents())for(t=z;t;)u=t.nextSibling,this.UnregisterNode(t),k.removeChild(t),t=u}d||this._deleteOffscreenBlocks(k,e,a);this._repositionBlocksForScroll(k);this._processSelectionRequest();this._clickEditRequest!=null&&this._processClickToEditActivateRequest()}}finally{delete this._handleDataCallbackBeingProcessed}h!=0&&(this.SetNewBlockScrollLeft(a),this._synchronizeRowHeights(a));
this.UpdateRange(!1);return!0};AdfDhtmlTableBasePeer.prototype._adjustRowCountFromResponse=function(a,b,d,e){var f=0,g=this.GetRowCount();if(g!=-1){var h=AdfAgent.AGENT.getIntAttribute(b,"_rowCount",-1);if(this._unavailableRowIndex==0)h=-1;else if(this._unavailableRowIndex>0)h=this._unavailableRowIndex;h!=-1&&(f=h-g)}if(f!=0)this._rowCount=this._knownRowCount=h,this._adjustCanvasHeight(d!=void 0&&e!=void 0&&d==h?e-this._averageRowHeight*g:this._averageRowHeight*f,a,!1);return f};
AdfDhtmlTableBasePeer.prototype.HandleExpand=function(a,b,d){return this._handleExpandCollapse(a,d,!0)};AdfDhtmlTableBasePeer.prototype.HandleCollapse=function(a,b,d){return this._handleExpandCollapse(a,d,!1)};
AdfDhtmlTableBasePeer.prototype._handleExpandCollapse=function(a,b,d){var e=a.getAttribute("_startKey"),f=null;e&&(f=this.FindRowByKey(e));if(f){var g=AdfPage.PAGE,h=f.tr,e=f.block;this._changeDetailIcon(h,d);var k=e.cachedHeight,f=null,l;g.isAnimationEnabled()&&!this.isHeightAutoSized()&&(l=parseInt(g.getLookAndFeel().getSkinProperty("af|table-tr-detail-animation-duration")));if(d){g=h.cells.length;a=a.rows[0];if(g>1)a.cells[0].colSpan=g;a.parentNode.removeChild(a);h.parentNode.insertBefore(a,h.nextSibling);
AdfAgent.AGENT.elementsAdded(a);l>0&&(f=a.cells[0])}else a=h.nextSibling,AdfAgent.getAgent().getAttribute(a,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1)?(this.UnregisterNode(a),l>0?(a.style.display="none",f=a.cells[0]):a.parentNode.removeChild(a)):AdfLogger.LOGGER.severe("Unable to locate detail row");a=e.offsetHeight;e.cachedHeight=a;k=a-k;for(e=e.nextSibling;e;)e.startPos+=k,e=e.nextSibling;e=this.GetDatabody();this._adjustCanvasHeight(k,e);b==0&&(this._stretchTheColumns(),this._checkForScrollableLastBlockInViewport(e));
f!=null&&this._doDisclosureAnimation(f,l,d);return!0}else return!1};
AdfDhtmlTableBasePeer.prototype._doDisclosureAnimation=function(a,b,d){var e=a.ownerDocument,e=d?e.createElement("div"):a.firstChild,f=e.style,g=0;if(d){f.overflow="hidden";f.height="1px";f.position="relative";g=AdfAgent.AGENT.getComputedStyle(a);f=AdfAgent.getCSSLengthAsInt;g=a.clientHeight-f(g.paddingTop)-f(g.paddingBottom);for(f=a.firstChild;f;)e.appendChild(f),f=a.firstChild;a.appendChild(e)}else a.parentNode.style.display="";AdfDhtmlElementAnimator.animate(AdfDhtmlElementAnimator.FRAME_METHOD_SLOW_FAST_SLOW,
b,[{element:e,properties:{height:g}}],null,!d?AdfDhtmlTableBasePeer.CollapseAnimationComplete:null,!d?{wrapper:a.parentNode,peer:this}:null)};AdfDhtmlTableBasePeer.CollapseAnimationComplete=function(a){var b=a.wrapper,a=a.peer;b.parentNode.removeChild(b);a&&(a.SetAnimating(!1),a.AdjustAutoHeight())};AdfDhtmlTableBasePeer.prototype.SetAnimating=function(a){this._animating=a};AdfDhtmlTableBasePeer.prototype.BusyAnimating=function(){return this._animating};
AdfDhtmlTableBasePeer.prototype.HandleClickToEditActiveRow=function(a,b,d){delete this._oldActiveRowKey;return b>0?(b=this._columnStretching,b!=null&&b!="none"&&(this._sizeBlockForFrozenColumns(a,this.GetDatabody().offsetWidth),this._stretchLastBlockColumn(a)),b=a.rows,a=b[0],b=b.length>1&&this._hasDetailStamp?b[1]:null,this._replaceRowByKey(AdfAgent.AGENT.getAttribute(a,AdfDhtmlTableBasePeer._ROW_KEY),a,b),d==0&&this._handleClickToEditActiveRowAfter(),!0):!1};
AdfDhtmlTableBasePeer.prototype._copyCellWidths=function(a,b){AdfAssert.assert(a!=null,"Unable to copy cell widths if the given source row is invalid!");AdfAssert.assert(b!=null,"Unable to copy cell widths if the target row is invalid!");for(var d=null,e=null,f=a.cells,g=b.cells,h=f.length,k=0;k<h;k++)d=f[k],e=g[k],e.style.width=d.style.width;if(this._lastFrozen>=0){var l=AdfDhtmlTableBasePeer._getNestedScrolledTable(a),m=AdfDhtmlTableBasePeer._getNestedScrolledTable(b);if(AdfAgent.AGENT.getPlatform()==
AdfAgent.WEBKIT_PLATFORM&&(f=AdfDhtmlTableBasePeer.FindFirstChildByTagName(l,"COLGROUP"),d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(m,"COLGROUP"),f&&d)){f=f.childNodes;g=d.childNodes;h=f.length;for(k=0;k<h;k++)if(d=f[k],e=g[k],d.tagName=="COL"&&e.tagName=="COL")e.style.width=d.style.width}f=l.rows[0].cells;g=m.rows[0].cells;h=f.length;for(k=0;k<h;k++)d=f[k],e=g[k],e.style.width=d.style.width}};
AdfDhtmlTableBasePeer.prototype._replaceRowByKey=function(a,b,d){var e=AdfAgent.AGENT;if(a=this.FindRowByKey(a)){var f=a.tr,a=a.block,g=a.cachedHeight;this._copyCellWidths(f,b);this.UnregisterNode(f);f.parentNode.replaceChild(b,f);e.elementsAdded(b);if(d&&(f=b.nextSibling,e.getAttribute(f,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1)))this.UnregisterNode(f),f.parentNode.replaceChild(d,f),e.elementsAdded(d),d.cells[0].colSpan=b.cells.length;d=a.offsetHeight;a.cachedHeight=d;d-=g;for(e=a.nextSibling;e;)e.startPos+=
d,e=e.nextSibling;if(this._lastFrozen>=0)cells=b.cells,AdfDhtmlTableBasePeer.FindFirstChildByTagName(cells[cells.length-1],"DIV").onscroll=this._innerTableScrollCallback;this._adjustCanvasHeight(d,this.GetDatabody())}};AdfDhtmlTableBasePeer.prototype._handleClickToEditActiveRowAfter=function(){this._stretchTheColumns();var a=this._currentScrollLeft;a!=0&&this._handleHorizontalScroll(a);this._processClickToEditRequestTimerId=AdfPage.PAGE.scheduleTimer(this,this._processClickToEditRequest,!0,10)};
AdfDhtmlTableBasePeer.prototype.SetFirst=function(a){this.getComponent().setProperty("first",a,!1,AdfUIComponent.PROPAGATE_ALWAYS)};AdfDhtmlTableBasePeer.prototype.SetRows=function(a){this.getComponent().setRows(a)};
AdfDhtmlTableBasePeer.prototype.UpdateRange=function(a){if(!this._isPaged){var b=this.getComponent(),d=this.GetDatabody().childNodes;if(d.length!=0){var e=d[0].startRow,d=d[d.length-1],d=d.startRow+d.numRows-e;this.SetFirst(e);this.SetRows(d);e=this.GetFirstVisibleRowKeyAndRow();e.rowKey!=null&&!a&&b.setProperty("scrollTopRowKey",e.rowKey,!0,AdfUIComponent.PROPAGATE_ALWAYS)}}};
AdfDhtmlTableBasePeer.prototype._checkStart=function(a){a=a.childNodes;if(!(a.length<1)){var b=a[0];if(b.startPos<0){this._setScrollTop(this._currentScrollTop-b.startPos);for(var d=0;d<a.length;d++)a[d].startPos-=b.startPos}}};
AdfDhtmlTableBasePeer.prototype._checkEnd=function(a){var b=a.childNodes;if(!(b.length<1)){var d=b[b.length-1],d=d.startPos+d.cachedHeight-this._canvasHeight;this.GetRowCount()==-1&&(d+=AdfDhtmlTableBasePeer._FETCH_MORE_CANVAS_SPACE);if(d>0){this._setScrollTop(this._currentScrollTop-d);for(var e=0;e<b.length;e++)b[e].startPos-=d}this.GetRowCount()==-1&&(a=this._canvasHeight-a.offsetHeight-AdfDhtmlTableBasePeer._FETCH_MORE_CANVAS_SPACE,this._currentScrollTop>a&&this._setScrollTop(a))}};
AdfDhtmlTableBasePeer.prototype._processSelectionRequest=function(){var a=this._selectionRequest,b=null;if(a!=null){if(a==AdfDhtmlTableBasePeer._SELECT_PAGE_UP)b=this.GetFirstVisibleRowKeyAndRow();else if(a==AdfDhtmlTableBasePeer._SELECT_PAGE_DOWN)b=this._getLastVisibleRowKeyAndRow();else if(a==AdfDhtmlTableBasePeer._SELECT_ARROW_DOWN||a==AdfDhtmlTableBasePeer._FOCUS_RH_ARROW_DOWN||a==AdfDhtmlTableBasePeer._FOCUS_ROW_ARROW_DOWN)b=this._getNextRowKeyAndRow(this._lastRowKeyInView);else if(a==AdfDhtmlTableBasePeer._SELECT_ARROW_UP||
a==AdfDhtmlTableBasePeer._FOCUS_RH_ARROW_UP||a==AdfDhtmlTableBasePeer._FOCUS_ROW_ARROW_UP)b=this._getPreviousRowKeyAndRow(this._lastRowKeyInView);var d=b.rowKey,b=b.row;d!=null&&(a==AdfDhtmlTableBasePeer._FOCUS_RH_ARROW_UP||a==AdfDhtmlTableBasePeer._FOCUS_RH_ARROW_DOWN?(a=this.GetRowHeaderCellFromRow(b),this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,d,a)):(a!=AdfDhtmlTableBasePeer._FOCUS_ROW_ARROW_UP&&a!=AdfDhtmlTableBasePeer._FOCUS_ROW_ARROW_DOWN&&this._selSelectRow(d,b),this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,
d,b)),this._unclipRow(b));delete this._selectionRequest}};
AdfDhtmlTableBasePeer.prototype.DisplayStatus=function(a,b){var d=this._getStatusMessage();d.innerHTML=a;var e=d.style;if(e.display=="none"){e.zIndex=5E3;var f=this.GetDatabody();e.visibility="hidden";e.display="block";var g,g=this._virtInitialized?f.offsetHeight:this.getDomElement().clientHeight-this._cachedCHHeight;e.top=this._cachedCHHeight+Math.floor((g-d.offsetHeight)/2)+"px";g="25px";b&&(g=Math.floor(f.offsetWidth/2-d.offsetWidth/2)+"px");AdfDhtmlTableBasePeer._isRTL()?e.left=g:e.right=g;e.visibility=
"visible"}};
AdfDhtmlTableBasePeer.prototype._hideStatus=function(){var a=this._getStatusMessage(),b=AdfAgent.AGENT,d=this.GetScroller(),b=this._hasScroller(d)&&b.getPlatform()==AdfAgent.IE_PLATFORM&&b.getVersion()>=8,e;if(b)if(AdfCollections.isArray(d))for(var e=[],f=0;f<d.length;f++)e[f]={x:d[f].scrollLeft,y:d[f].scrollTop};else e={x:d.scrollLeft,y:d.scrollTop};a.style.display="none";if(b)if(AdfCollections.isArray(d))for(f=0;f<d.length;f++)d[f].scrollLeft=e[f].x,d[f].scrollTop=e[f].y;else d.scrollLeft=e.x,d.scrollTop=
e.y};AdfDhtmlTableBasePeer.prototype._hasScroller=function(a){if(AdfCollections.isArray(a)){for(var b=0;b<a.length;b++)if(a[b]!=null)return!0;return!1}else return a!=null};AdfDhtmlTableBasePeer.prototype.GetDatabody=function(a){return this.__getElemBySubId("db",a)};AdfDhtmlTableBasePeer.prototype._getStatusMessage=function(){return this.__getElemBySubId("sm")};AdfDhtmlTableBasePeer.prototype._getColumnResizeIndicator=function(){return this.__getElemBySubId("ri")};
AdfDhtmlTableBasePeer.prototype.__getColumnHeader=function(){return this.__getElemBySubId("ch")};AdfDhtmlTableBasePeer.prototype._getColumnFooter=function(){return this.__getElemBySubId("cf")};AdfDhtmlTableBasePeer.prototype._getNavigationBar=function(){return this.__getElemBySubId("nbar")};
AdfDhtmlTableBasePeer.prototype._setFakeCanvasWidth=function(a){var b=this.GetScroller();if(this._footerless&&!this._isPaged)AdfDhtmlTableBasePeer.FindFirstChildByTagName(b,"DIV").style.width=a+"px";else{var d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(b[0],"DIV");AdfDhtmlTableBasePeer.FindFirstChildByTagName(b[1],"DIV").style.width=d.style.width=a+"px"}};
AdfDhtmlTableBasePeer.prototype._setFakeCanvasHeight=function(a){var b=this.GetScroller();if(this._footerless&&!this._isPaged){var d=b.scrollTop;AdfDhtmlTableBasePeer.FindFirstChildByTagName(b,"DIV").style.height=a+"px";b.scrollTop=d}else d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(b[0],"DIV"),AdfDhtmlTableBasePeer.FindFirstChildByTagName(b[1],"DIV").style.height=d.style.height=a+"px"};
AdfDhtmlTableBasePeer.prototype.GetScroller=function(){if(this._footerless&&!this._isPaged)return this.__getElemBySubId("scroller");else{var a=[];a[AdfDhtmlTableBasePeer._HSCROLLER]=this.__getElemBySubId("hscroller");a[AdfDhtmlTableBasePeer._VSCROLLER]=this.__getElemBySubId("vscroller");return a}};
AdfDhtmlTableBasePeer.prototype._scrollerScrollToPos=function(a,b){var d=AdfAgent.getAgent(),e=a!=null&&AdfDhtmlTableBasePeer._isRTL()&&d.getPlatform()==AdfAgent.IE_PLATFORM&&d.getVersion()>7;if(this._footerless&&!this._isPaged){var f=this.GetScroller();e&&(a=f.scrollWidth-f.clientWidth-a);d.scrollToPos(f,a,b)}else{var f=this.GetScroller(),g=f[AdfDhtmlTableBasePeer._HSCROLLER];e&&(a=g.scrollWidth-g.clientWidth-a);d.scrollToPos(f[AdfDhtmlTableBasePeer._HSCROLLER],a,b);d.scrollToPos(f[AdfDhtmlTableBasePeer._VSCROLLER],
a,b)}};AdfDhtmlTableBasePeer.prototype.__getScrollerDimensions=function(){return{offsetWidth:this._getScrollerOffsetWidth(),offsetHeight:this._getScrollerOffsetHeight(),clientWidth:this._getScrollerClientWidth(),clientHeight:this._getScrollerClientHeight()}};AdfDhtmlTableBasePeer.prototype._getScrollerOffsetWidth=function(){return this._footerless&&!this._isPaged?this.GetScroller().offsetWidth:this.GetScroller()[0].offsetWidth};
AdfDhtmlTableBasePeer.prototype._getScrollerOffsetHeight=function(){return this._footerless&&!this._isPaged?this.GetScroller().offsetHeight:this.GetScroller()[1].offsetHeight};AdfDhtmlTableBasePeer.prototype._getScrollerClientWidth=function(){return this._footerless&&!this._isPaged?this.GetScroller().clientWidth:this.GetScroller()[0].clientWidth};AdfDhtmlTableBasePeer.prototype._getScrollerClientHeight=function(){return this._footerless&&!this._isPaged?this.GetScroller().clientHeight:this.GetScroller()[1].clientHeight};
AdfDhtmlTableBasePeer.prototype._getVerticalScrollBarWidth=function(){var a=this.GetScroller();return this._footerless&&!this._isPaged?a.offsetWidth-a.clientWidth:a[1].offsetWidth-a[1].clientWidth};AdfDhtmlTableBasePeer.prototype._setScrollerTop=function(a){if(this._footerless&&!this._isPaged)this.GetScroller().style.top=a+"px";else{var b=this.GetScroller();b[0].style.top=b[1].style.top=a+"px"}};
AdfDhtmlTableBasePeer.prototype._setScrollerHeight=function(a,b,d,e){if(this._footerless&&!this._isPaged){var f=Math.max(0,a-b-e);this.GetScroller().style.height=f+"px"}else{var g=this.GetScroller(),f=Math.max(0,a-b);g[0].style.height=f+"px";f=Math.max(0,a-b-d-e-(g[0].offsetHeight-g[0].clientHeight));g[1].style.height=f+"px"}};
AdfDhtmlTableBasePeer.prototype._setScrollerWidth=function(a,b){if(this._footerless&&!this._isPaged){var d=Math.max(a-b,0),e=this.GetScroller().style;e.overflowX="auto";e.width=d+"px"}else{var f=this.GetScroller(),d=Math.max(a-b,0);f[1].style.overflowX="hidden";f[1].style.width=d+"px";e=f[1].offsetWidth-f[1].clientWidth;d=Math.max(a-b-e,0);f=f[0].style;f.overflowX="auto";f.width=d+"px";AdfDhtmlTableBasePeer._isRTL()?f.left=e+"px":f.right=e+"px"}};
AdfDhtmlTableBasePeer.prototype._setScrollLeft=function(a){this._currentScrollLeft=a;if(this._footerless&&!this._isPaged){var b=this.GetScroller();if(b.scrollLeft!=a)b.scrollLeft=a}else if(b=this.GetScroller(),b[0].scrollLeft!=a)b[0].scrollLeft=a};AdfDhtmlTableBasePeer.prototype.__getScrollLeft=function(){return this._footerless&&!this._isPaged?this.GetScroller().scrollLeft:this.GetScroller()[0].scrollLeft};AdfDhtmlTableBasePeer.prototype.__getCurrentScrollLeft=function(){return this._currentScrollLeft};
AdfDhtmlTableBasePeer.prototype._setScrollTop=function(a){this._currentScrollTop=a;if(this._footerless&&!this._isPaged){var b=this.GetScroller();if(b.scrollTop!=a)b.scrollTop=a}else if(b=this.GetScroller(),b[1].scrollTop!=a)b[1].scrollTop=a};AdfDhtmlTableBasePeer.prototype.__getScrollDimensions=function(){return{scrollLeft:this.__getScrollLeft(),scrollTop:this._getScrollTop(),scrollHeight:this._getScrollHeight(),scrollWidth:this._getScrollWidth()}};
AdfDhtmlTableBasePeer.prototype._getScrollTop=function(){return this._footerless&&!this._isPaged?this.GetScroller().scrollTop:this.GetScroller()[1].scrollTop};AdfDhtmlTableBasePeer.prototype._getScrollHeight=function(){return this._footerless&&!this._isPaged?this.GetScroller().scrollHeight:this.GetScroller()[1].scrollHeight};AdfDhtmlTableBasePeer.prototype._getScrollWidth=function(){return this._footerless&&!this._isPaged?this.GetScroller().scrollWidth:this.GetScroller()[0].scrollWidth};
AdfDhtmlTableBasePeer.prototype.__getLastFrozen=function(){return this._lastFrozen};AdfDhtmlTableBasePeer.prototype.__getElemBySubId=function(a,b){var d=this.getDomElement();d==null&&(d=b);return AdfDhtmlTableBasePeer.__getChildBySubId(d,a)};AdfDhtmlTableBasePeer.__getChildBySubId=function(a,b){AdfAssert.assert(a!=null,"Table peer cannot get a child by sub ID if the parent is null!");for(var d=a.id+"::"+b,e=a.childNodes,f=0;f<e.length;f++)if(d==e[f].id)return e[f];return null};
AdfDhtmlTableBasePeer.prototype.GetRowCount=function(){return this._rowCount};AdfDhtmlTableBasePeer.prototype.GetKnownRowCount=function(){return this._knownRowCount};
AdfDhtmlTableBasePeer.prototype._synchronizeRowHeights=function(a){if(this._lastFrozen>=0){var b=a.startPos,d=a._lastSyncRow,e=this._databodyHeight,f=a.rows,g=f.length,h=this._currentScrollTop;if(!(d!=null&&d==g-1)&&!(b>h+e)&&f[0].cells.length!=this._lastFrozen+1){for(var k=0;k<g;k++)if(!(d!=null&&d>=k)){var l=f[k],m=AdfDhtmlTableBasePeer._getNestedScrolledTable(l),n=l.offsetHeight;if(m.offsetHeight!=n){var o=AdfAgent.AGENT,p=o.getPlatform()==AdfAgent.IE_PLATFORM,o=o.getPlatform()==AdfAgent.WEBKIT_PLATFORM;
p||o?m.style.height="auto":m.rows[0].style.height="auto";p||o?m.style.height=n+"px":m.rows[0].style.height=n+"px"}if(b+l.offsetTop+n>h+e){a._lastSyncRow=k;return}}a._lastSyncRow=g-1}}};
AdfDhtmlTableBasePeer.prototype._showColumnResizeIndicator=function(a,b){var d=this._getColumnResizeIndicator();if(d){var e=!AdfDhtmlTableBasePeer._isRTL(),d=d.style;d.display="block";d.zIndex=20;d.top="0px";var f=this._lastFrozen;if(e){if(e=a.offsetLeft+a.offsetWidth,f>=0&&b>f&&(e+=this._frozenWidth),f<0||b>f)e-=this._currentScrollLeft}else if(e=a.offsetLeft,f>=0&&b<=f)e+=this.getDomElement().offsetWidth-a.parentNode.parentNode.offsetWidth;else{for(f=a.parentNode;f&&f.tagName!="TABLE";)f=f.parentNode;
if(f&&f.tagName=="TABLE"){for(var g=f.offsetWidth,h=f.offsetLeft;f&&f.tagName!="DIV";)f=f.parentNode;f&&f.tagName=="DIV"&&f.offsetWidth>g&&(e+=h)}e-=this._getRTLScrollAdjustment();this._getScrollHeight()>this._getScrollerOffsetHeight()&&(e+=this._getScrollerOffsetWidth()-this._getScrollerClientWidth())}d.left=e+"px";d.height=this._cachedCHHeight+this._cachedCFHeight+this._cachedNBHeight+this.GetDatabody().offsetHeight+"px"}};
AdfDhtmlTableBasePeer.prototype._getColumnHeaderFooterSizingCell=function(a,b,d,e,f){return this._lastFrozen<0||a<=this._lastFrozen?AdfDhtmlTableBasePeer.__getChildBySubId(b,d).rows[0].cells[a]:(b=AdfDhtmlTableBasePeer.__getChildBySubId(b,e),AdfDhtmlTableBasePeer.__getChildBySubId(b,f).rows[0].cells[a-this._lastFrozen-1])};
AdfDhtmlTableBasePeer.prototype._getResizedCellInfo=function(a){var b=AdfAgent.AGENT,d=a.cell;AdfDhtmlTableBasePeer._isRTL();var e=b.getIntAttribute(d,"_d_index",-1);a.data=="start"?e--:e+=b.getIntAttribute(d,"colspan",1)-1;a=this._getColumnHeaderFooterSizingCell(e,this.__getColumnHeader(),"t","d2","t2");if(b.getAttribute(a,AdfDhtmlTableBasePeer.NO_RESIZE_MARKER,!1))return null;return{cell:a,displayIndex:e}};
AdfDhtmlTableBasePeer.prototype._getColumnHeaderLeafCell=function(a){var b=this.__getColumnHeader();if(!b)return null;var d=AdfDhtmlTableBasePeer.__getChildBySubId(b,"t"),e=Array(d);this._lastFrozen>=0&&(b=AdfDhtmlTableBasePeer.__getChildBySubId(b,"d2"),b=AdfDhtmlTableBasePeer.__getChildBySubId(b,"t2"),e.push(b));for(var b=AdfAgent.AGENT,f=AdfDhtmlTableBasePeer._LEAF_COLUMN,g=null,d=d.rows.length-1;d>=0&&!g;d--)for(var h=0;h<e.length;h++)for(var k=e[h].rows[d].cells,l=0;l<k.length&&!g;l++){var m=
k[l];if(m.getAttribute(f)&&b.getIntAttribute(m,"_d_index",-1)==a){g=m;break}}return g};
AdfDhtmlTableBasePeer.prototype._synchronizeColumnRowHeights=function(a,b,d,e){if(this._lastFrozen>=0){var f=AdfAgent.AGENT,g=f.getPlatform()==AdfAgent.WEBKIT_PLATFORM,h=f.getPlatform()==AdfAgent.IE_PLATFORM&&f.getVersion()==8,b=AdfDhtmlTableBasePeer.__getChildBySubId(a,b),a=AdfDhtmlTableBasePeer.__getChildBySubId(a,d),e=AdfDhtmlTableBasePeer.__getChildBySubId(a,e),a=b.rows,d=e.rows;b.style.height=e.style.height="auto";for(var k=0;k<a.length;k++)a[k].style.height=d[k].style.height="auto";for(k=0;k<
a.length;k++)if(h){for(var l=-1,m=0;m<a[k].cells.length;m++)if(a[k].cells[m].rowSpan&&a[k].cells[m].rowSpan==1){l=m;break}for(var m=-1,n=0;n<d[k].cells.length;n++)if(d[k].cells[n].rowSpan&&d[k].cells[n].rowSpan==1){m=n;break}if(l>-1&&m>-1)l=a[k].cells[l].offsetHeight,m=d[k].cells[m].offsetHeight,l>m?f.setTableRowHeight(d[k],l):m>l&&f.setTableRowHeight(a[k],m)}else l=a[k].offsetHeight,m=d[k].offsetHeight,l>m?f.setTableRowHeight(d[k],l):m>l&&f.setTableRowHeight(a[k],m);e.style.height=b.style.height=
Math.max(b.offsetHeight,e.offsetHeight)+"px";if(g&&d.length==2){for(k=0;k<d[0].cells.length;k++)d[1].cells[k].rowSpan="10";for(k=0;k<a[0].cells.length;k++)a[1].cells[k].rowSpan="10"}}};AdfDhtmlTableBasePeer.prototype._getInnerTableCell=function(a,b){return AdfDhtmlTableBasePeer._getNestedScrolledTable(a).rows[0].cells[b-this._lastFrozen-1]};
AdfDhtmlTableBasePeer._handleMouseWheel=function(a){if(!a)a=AdfPage.PAGE.getDomWindow().event;var b=AdfDhtmlTableBasePeer.__getChildBySubId(this.parentNode,"scroller");b||(b=AdfDhtmlTableBasePeer.__getChildBySubId(this.parentNode,"vscroller"));if(b){var d=a.wheelDelta!=null?-a.wheelDelta/4:a.detail*4;b.scrollTop+=Math.round(d);var e=b.offsetHeight,f=b.scrollHeight,b=b.scrollTop;(d>0&&f-b>e||d<0&&b>0)&&AdfAgent.AGENT.eatEvent(a)}};
AdfDhtmlTableBasePeer._positionInnerTable=function(a,b){var d=a.rows;AdfDhtmlTableBasePeer._isRTL();for(var e=0;e<d.length;e++){var f=d[e].cells;if(f=AdfDhtmlTableBasePeer.FindFirstChildByTagName(f[f.length-1],"DIV"))f.scrollLeft=b}};AdfDhtmlTableBasePeer._scrollColumnHeader=function(a,b){AdfDhtmlTableBasePeer.__getChildBySubId(a,"d2").scrollLeft=b};AdfDhtmlTableBasePeer._scrollColumnFooter=function(a,b){AdfDhtmlTableBasePeer.__getChildBySubId(a,"fd2").scrollLeft=b};
AdfDhtmlTableBasePeer.FindFirstChildByTagName=function(a,b){AdfAssert.assert(a!=null,"Table peer cannot find first child by tag name if the parent is null!");for(var d=a.childNodes,e=0;e<d.length;e++)if(b==d[e].tagName)return d[e];return null};AdfDhtmlTableBasePeer._findFirstLevelChildrenByTagName=function(a,b){AdfAssert.assert(a!=null,"Table peer cannot find first level children by tag name if the parent is null!");for(var d=[],e=a.childNodes,f=0;f<e.length;f++)b==e[f].tagName&&d.push(e[f]);return d};
AdfDhtmlTableBasePeer.prototype.GetRowKeyAndRow=function(a,b){AdfAssert.assertDomElement(a);var d=a,e=AdfAgent.AGENT;if(d==null||d.nodeType!=1)return null;for(var f=e.getAttribute(d,AdfDhtmlTableBasePeer._ROW_KEY);f==null;){if(d==null||d==b)return null;d=d.parentNode;if(d==null||d.nodeType!=1)return null;f=e.getAttribute(d,AdfDhtmlTableBasePeer._ROW_KEY)}return[f,d]};
AdfDhtmlTableBasePeer.prototype._hideDragColumnFooter=function(a,b){var d=AdfAgent.AGENT,e=this._lastFrozen,f=this._reorderColWidth,g=this._reorderHiddenCells,h=this._getColumnFooter(),k=null;e>=0&&a>e?(k=AdfDhtmlTableBasePeer.__getChildBySubId(h,"fd2"),h=AdfDhtmlTableBasePeer.__getChildBySubId(k,"ft2")):h=AdfDhtmlTableBasePeer.__getChildBySubId(h,"ft");for(var l=0;l<2;l++)for(var m=h.rows[l].cells,n,n=e<0||a<=e?a:a-e-1,o=0;o<b;o++){var p=m[n++];g.push(p);p._afrIsFooter=!0;p.style.display="none"}d.getPlatform()==
AdfAgent.WEBKIT_PLATFORM&&this._hideReorderColGroupCols(h,a,e,b);this._adjustReorderColumnHeaderWidths(h,k,a,e,f)};AdfDhtmlTableBasePeer.prototype._adjustReorderColumnHeaderWidths=function(a,b,d,e,f){var g=a.style;g.width=parseInt(g.width)-f+"px";if(e>=0)if(d>e)g=b.style,g.width=parseInt(g.width)-f+"px";else if(e>=0)g=a.nextSibling.style,AdfDhtmlTableBasePeer._isRTL()?g.right=parseInt(g.right)-f+"px":g.left=parseInt(g.left)-f+"px"};
AdfDhtmlTableBasePeer.prototype._adjustReorderColumnFooterWidths=function(a,b,d){var e=this._getColumnFooter(),f=null;b>=0&&a>b?(f=AdfDhtmlTableBasePeer.__getChildBySubId(e,"fd2"),e=AdfDhtmlTableBasePeer.__getChildBySubId(f,"ft2")):e=AdfDhtmlTableBasePeer.__getChildBySubId(e,"ft");this._adjustReorderColumnHeaderWidths(e,f,a,b,d)};
AdfDhtmlTableBasePeer.prototype._adjustReorderInnerTableWidth=function(a,b){var d=a.style,e=parseInt(d.width)-b;if(e>0)d.width=e+"px";d=a.parentNode.parentNode.style;e=d.width;if(e!=""&&(e=parseInt(e)-b,e>0))d.width=e+"px"};
AdfDhtmlTableBasePeer.prototype._hideReorderColGroupCols=function(a,b,d,e){var f=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"COLGROUP");if(f){a=this._reorderHiddenCells;f=f.getElementsByTagName("col");for(i=b=d<0||b<=d?b:b-d-1;i<b+e;i++)d=f[i],d._afrOriginalWidth=d.style.width,d.style.width="0px",d.style.display="none",a.push(d)}};
AdfDhtmlTableBasePeer.prototype._adjustReorderNonFrozenCol=function(a,b){var d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"COLGROUP");if(d)d=d.getElementsByTagName("col"),d=d[d.length-1],d.style.width=parseInt(d.style.width)-b+"px"};AdfDhtmlTableBasePeer.prototype._adjustReorderDataBodyNonFrozenCol=function(a){var b=this.GetDatabody().childNodes,d=b.length;for(i=0;i<d;i++)this._adjustReorderNonFrozenCol(b[i],a)};
AdfDhtmlTableBasePeer.prototype._insertEmptyDropColGroupCol=function(a,b,d,e,f,g,h){if(a=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"COLGROUP")){var k=a.getElementsByTagName("col"),b=f<0||b<=f?b:b-f-1;e&&(b+=d-1);d=k[b];b=a.ownerDocument.createElement("col");e?d.nextSibling?a.insertBefore(b,d.nextSibling):a.appendChild(b):a.insertBefore(b,d);b.style.width=g+"px";h.push(b);a.span++}};
AdfDhtmlTableBasePeer.prototype._forceRelayoutDataBody=function(){var a=this.GetDatabody().childNodes,b=a.length,d=this._currentScrollLeft,e=this._lastFrozen;for(i=0;i<b;i++){var f=a[i].rows[0],g=f.style;g.display="block";g.display="";if(e>=0)innerTable=AdfDhtmlTableBasePeer._getNestedScrolledTable(f),innerTable.parentNode.scrollLeft=d}};
AdfDhtmlTableBasePeer.prototype._processColumnReorderAction=function(a){var b=AdfAgent.AGENT,d=this._reorderTH;if(d){this._columnReorderTracker=this._createReorderTracker();this._positionColumnReorderTracker(a);this._insertEmptyDropColumn(a);if(!this._colReorderDragCallback)this._colReorderDragCallback=this.createCallback(this._handleColReorderDrag),this._colReorderDropCallback=this.createCallback(this._handleColReorderDrop),this._colReorderAbortCallback=this.createCallback(this._handleColReorderAbort);
b.disableUserSelect(this.__getColumnHeader());AdfPage.PAGE.startDrag(a,this._colReorderDragCallback,this._colReorderDropCallback,this._colReorderAbortCallback);b.setCursor(d,"move",!0);b.setCursor(this.getDomElement(),"move",!0);b.eatEvent(a)}};
AdfDhtmlTableBasePeer.prototype._positionColumnReorderTracker=function(a){var b=this._columnReorderTracker,d=b.style,e=this.getDomElement(),f=AdfAgent.AGENT,a=f.getMousePosition(a),e=f.getElementPosition(e),b=Math.max(a.x-e.x+(AdfDhtmlTableBasePeer._isRTL()?-b.offsetWidth+8:-8),0),a=Math.max(a.y-e.y-8,0);d.left=b+"px";d.top=a+"px"};
AdfDhtmlTableBasePeer.prototype._autoScrollColumnsIfNecessary=function(a){var b=this.getDomElement();if(!(this._getScrollWidth()<=this._getScrollerOffsetWidth())){var d=AdfAgent.getAgent(),a=d.getMousePosition(a),b=d.getElementPosition(b),b=Math.max(a.x-b.x,0),d=this.__getColumnHeader(),e,f=AdfDhtmlTableBasePeer.__getChildBySubId(d,"t");this._lastFrozen>=0?(e=AdfDhtmlTableBasePeer.__getChildBySubId(d,"d2"),d=AdfDhtmlTableBasePeer.__getChildBySubId(e,"t2")):d=f;var a=0,g=AdfDhtmlTableBasePeer._isRTL()?
this._getRTLScrollAdjustment():this._currentScrollLeft,h=!1,k=!1;if(!e||b>f.offsetWidth){if(e)a=f.offsetWidth;b-a<AdfDhtmlTableBasePeer._AUTOSCROLL_MARGIN&&g>0?h=!0:b-a>this._getScrollerClientWidth()-AdfDhtmlTableBasePeer._AUTOSCROLL_MARGIN&&(k=!0)}if(h||k){a-=g;e=AdfDhtmlTableBasePeer._ROOT_COLUMN;k=AdfDhtmlTableBasePeer._ROW_HEADER;for(f=f.rows.length-1;f>=0;f--)for(var l=d.rows[f].cells,m=l.length,n=0;n<m;n++){var o=l[n];if(o.getAttribute(e)&&o.getAttribute(k)==null&&(cellLeft=o.offsetLeft+a,cellRight=
cellLeft+o.offsetWidth,b>=cellLeft&&b<=cellRight)){g=h?Math.max(g-o.offsetWidth,0):Math.min(g+o.offsetWidth,this._getScrollWidth()-this._getScrollerClientWidth());this._scrollerScrollToPos(g,null);break}}}}};AdfDhtmlTableBasePeer.prototype._handleColReorderDrag=function(a){this._autoScrollColumnsIfNecessary(a);this._positionColumnReorderTracker(a);this._insertEmptyDropColumn(a)};
AdfDhtmlTableBasePeer.prototype._handleColReorderDrop=function(){var a=null;if(this._reorderTH!=this._targetReorderTH&&this._targetReorderTH!=null){a=this._getColReorderAnimationDuration();this._reorderId=this._reorderTH.id;a>0?this._reorderColumnComponentsWithAnimation(a):this._reorderColumnComponentsWithoutAnimation();if(a==0){if(this._columnReorderTracker!=null)this.getDomElement().removeChild(this._columnReorderTracker),this._columnReorderTracker=null;this._cleanUpAfterColumnReorder()}AdfAgent.AGENT.enableUserSelect(this.__getColumnHeader())}else this._handleColReorderAbort()};
AdfDhtmlTableBasePeer.prototype._getColReorderAnimationDuration=function(){var a=this._colReorderAnimationDuration;if(a==void 0)a=AdfPage.PAGE,this._colScrollAnimationDuration=a=a.isAnimationEnabled()?parseInt(a.getLookAndFeel().getSkinProperty("af|table-tr-column-reorder-animation-duration"),10):0;return a};
AdfDhtmlTableBasePeer.prototype._reorderColumnComponentsWithoutAnimation=function(){this._queueColumnReorderEvent().isCanceled()?this._handleColReorderAbort():this.DisplayStatus(AdfPage.PAGE.getLookAndFeel().getTranslatedString("af_table.LABEL_REORDERING_COLUMN"),!0)};
AdfDhtmlTableBasePeer.prototype._queueColumnReorderEvent=function(){var a=this.getComponent(),a=new AdfTableShowColumnsEvent(a,this._reorderId,"reorderColumn");a.setTargetColumnId(this._targetReorderTH.id);a.setAfterTarget(this._insertColumnAfter);a.queue();return a};
AdfDhtmlTableBasePeer.prototype._cleanUpAfterColumnReorder=function(){AdfAgent.AGENT.setCursor(this.getDomElement(),"");this._targetReorderTH=this._reorderTH=null;delete this._reorderId;delete this._reorderHiddenCells;delete this._insertColumnAfter;delete this._previousInsertColIndex;delete this._emptyDropCells;delete this._reorderEmptyCellWidth};
AdfDhtmlTableBasePeer.prototype._reorderColumnComponentsWithAnimation=function(a){var b=this._emptyDropCells[0].offsetLeft;b+=this._reorderDropColumnExtraX;AdfDhtmlElementAnimator.animate(AdfDhtmlElementAnimator.FRAME_METHOD_SLOW_FAST_SLOW,a,[{element:this._columnReorderTracker,properties:{top:0,left:b}}],null,AdfDhtmlTableBasePeer._columnReorderAnimationComplete,this)};
AdfDhtmlTableBasePeer.prototype._createReorderTracker=function(){var a=AdfAgent.AGENT,b=this._reorderTH,d=a.getIntAttribute(b,"_d_index",-1),b=b.colSpan,e=this.getDomElement(),f=e.ownerDocument.createElement("div"),g=f.style;e.appendChild(f);g.overflow="hidden";g.position="absolute";g.zIndex=1E3;a.setOpacity(f,85);this._reorderHiddenCells=[];a=this._createReorderColumnLayerHeader(f,d,b);this._createReorderColumnLayerBody(f,a,d,b);this._footerless||this._hideDragColumnFooter(d,b);return f};
AdfDhtmlTableBasePeer.prototype._createReorderColumnLayerHeader=function(a,b,d){var e=AdfAgent.AGENT,f=this._lastFrozen,g=this.__getColumnHeader(),h=null;f>=0&&b>f?(h=AdfDhtmlTableBasePeer.__getChildBySubId(g,"d2"),g=AdfDhtmlTableBasePeer.__getChildBySubId(h,"t2")):g=AdfDhtmlTableBasePeer.__getChildBySubId(g,"t");var k=a.ownerDocument.createElement("table");k.className=g.className;k.cellSpacing=0;colTableStyle=k.style;colTableStyle.tableLayout="fixed";colTableStyle.position="relative";a.appendChild(k);
for(var l=g.rows.length,m=0,n=this._reorderHiddenCells,o=0;o<l;o++)for(var p=g.rows[o].cells,s=p.length,q=null,t=0,u,v=0;v<s;v++){var w=p[v],y=!1;if(o>0){y=e.getIntAttribute(w,"_d_index",-1);if(y>b)break;y=y==b}else y=f<0||b<=f?v==b:v==b-f-1;if(y){do{if(q==null){if(q=w,u=k.insertRow(o),o==0&&e.getPlatform()==AdfAgent.IE_PLATFORM&&e.getVersion()<8)u.style.position="absolute"}else q=p[++v];t+=q.colSpan;s=this._cloneWithSelectedOption(q,!0);e.removeIdsFromDomSubTree(s);u.appendChild(s);u.style.height=
"auto";o!=0?(s.rowSpan=1,e.setOuterHeight(s,q.offsetHeight)):m+=q.offsetWidth;n.push(q)}while(t<d);break}}for(o=n.length-1;o>=0;o--)n[o].style.display="none";e.getPlatform()==AdfAgent.WEBKIT_PLATFORM&&this._hideReorderColGroupCols(g,b,f,d);this._reorderColWidth=m;a.style.width=colTableStyle.width=m+"px";this._adjustReorderColumnHeaderWidths(g,h,b,f,m);e.setOuterHeight(k,g.offsetHeight);return k};
AdfDhtmlTableBasePeer.prototype._createReorderColumnLayerBody=function(a,b,d,e){var f=AdfAgent.AGENT,g=f.getPlatform(),h=g==AdfAgent.GECKO_PLATFORM,g=g==AdfAgent.WEBKIT_PLATFORM,k=this._lastFrozen,l=this._reorderColWidth,b=this._cloneWithSelectedOption(b,!1);a.appendChild(b);for(var a=this._reorderHiddenCells,m=this.GetDatabody().childNodes,n=m.length,o=0;o<n;o++){var p=m[o],s=p.rows,q=s.length,t=0;if(o==0)b.className=p.className;for(var u=0;u<q;u++){var v=s[u],w,y,z=null;k<0||d<=k?(y=d,w=v.cells):
(z=AdfDhtmlTableBasePeer._getNestedScrolledTable(v),w=z.rows[0].cells,y=d-k-1);if(!this._hasDetailStamp||!AdfAgent.getAgent().getAttribute(v,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1)){var C=b.insertRow(t);t++;for(var A=0;A<e;A++){var B=w[y++];cellClone=this._cloneWithSelectedOption(B,!0);f.removeIdsFromDomSubTree(cellClone);C.appendChild(cellClone);a.push(B);B.style.display="none";h?cellClone.style.height=v.offsetHeight+"px":f.setOuterHeight(cellClone,v.offsetHeight);z!=null&&(this._adjustReorderInnerTableWidth(z,
l),g&&this._hideReorderColGroupCols(z,d,k,e))}}}g&&((k<0||d<=k)&&this._hideReorderColGroupCols(p,d,k,e),k>=0&&d>k&&this._adjustReorderNonFrozenCol(p,l))}};
AdfDhtmlTableBasePeer.prototype._cloneWithSelectedOption=function(a,b){if(a==null)return null;var d=a.cloneNode(b);if(a.nodeType==1){if(b){var e=a.getElementsByTagName("SELECT"),f=d.getElementsByTagName("SELECT"),g=e.length;AdfAssert.assert(g==f.length,"Unexpected clone--different amounts of selects!");for(var h=0;h<g;h++)f[h].selectedIndex=e[h].selectedIndex}if(a.tagName=="SELECT")d.selectedIndex=a.selectedIndex}return d};
AdfDhtmlTableBasePeer.prototype._insertEmptyDropColumn=function(a){var b=AdfDhtmlTableBasePeer._isRTL(),d=this.getDomElement(),e=AdfAgent.AGENT,a=e.getMousePosition(a),f=e.getElementPosition(d),g=this._lastFrozen,f=Math.max(a.x-f.x,0),a=this.__getColumnHeader(),h,k=AdfDhtmlTableBasePeer.__getChildBySubId(a,"t"),l;g>=0&&(h=AdfDhtmlTableBasePeer.__getChildBySubId(a,"d2"),l=AdfDhtmlTableBasePeer.__getChildBySubId(h,"t2"));a=0;if(b){var m=d.offsetWidth,n=k.offsetWidth,o=m-n;h&&f<=o?(d=l,m>n+l.offsetWidth?
a=m-(n+l.offsetWidth):(a=-this._getRTLScrollAdjustment(),this._getScrollHeight()>this._getScrollerOffsetHeight()&&(a+=this._getScrollerOffsetWidth()-this._getScrollerClientWidth()))):(d.offsetWidth>k.offsetWidth&&(a=o),d=k)}else f<=k.offsetWidth?d=k:h?(a=k.offsetWidth,a-=this._currentScrollLeft,d=l):d=k;var p,m=null;if(d){g==-1&&(a-=b?this._getRTLScrollAdjustment():this._currentScrollLeft);o=k.rows.length;g=AdfDhtmlTableBasePeer._ROOT_COLUMN;k=AdfDhtmlTableBasePeer._ROW_HEADER;for(n=o-1;n>=0;n--)for(var s=
d.rows[n].cells,q=s.length,t=0;t<q;t++){var u=s[t];if(u.getAttribute(g)&&u.getAttribute(k)==null&&u.style.display!="none")if(cellLeft=u.offsetLeft+a,cellRight=cellLeft+u.offsetWidth,b)if(f>=cellLeft&&f<=cellRight-u.offsetWidth/2){m=u;p=u.id.indexOf("_afrBlankColumn")==-1;break}else{if(f>=cellLeft&&f<=cellRight){m=u;p=!1;break}}else if(f>=cellLeft&&f<=cellRight-u.offsetWidth/2){m=u;p=!1;break}else if(f>=cellLeft&&f<=cellRight){m=u;p=u.id.indexOf("_afrBlankColumn")==-1;break}}if(m==null&&this._previousInsertColIndex==
null)for(n=o-1;n>=0;n--)if(s=d.rows[n].cells,q=s.length,f=s[q-1],f.getAttribute(g)&&f.getAttribute(k)==null){m=f==this._reorderTH&&f.previousSibling?f.previousSibling:f;p=!0;break}if(m!=null&&(f=e.getIntAttribute(m,"_d_index",-1),g=m.colSpan,k=p?f+g:f,k!=this._previousInsertColIndex)){this._removeEmptyDropColumn(l,h);this._targetReorderTH=m;this._insertColumnAfter=p;this._previousInsertColIndex=k;this._reorderDropColumnExtraX=a;this._targetHeaderTable=d;this._insertEmptyDropColumnHeader(m,f,g,l,h);
if(h!=null&&b)h.scrollLeft=this._currentScrollLeft;this._insertEmptyDropColumnBody(f,g);this._footerless||this._insertEmptyDropColumnFooter(f,g);e.getPlatform()==AdfAgent.WEBKIT_PLATFORM&&this._forceRelayoutDataBody()}}};
AdfDhtmlTableBasePeer.prototype._removeEmptyDropColumn=function(a,b){var d=this._emptyDropCells;if(d){for(var e=AdfAgent.AGENT,f=e.getPlatform()==AdfAgent.WEBKIT_PLATFORM,e=e.getIntAttribute(this._targetReorderTH,"_d_index",-1),g=this._lastFrozen,h=this._reorderColWidth,k=d.length-1;k>=0;k--){var l=d[k],m=l.tagName;f&&m=="COL"?l.parentNode.span--:m=="TD"&&g>=0&&e>g&&!l._afrIsFooter&&this._adjustReorderInnerTableWidth(l.parentNode.parentNode.parentNode,h);l.parentNode.removeChild(l)}this._adjustReorderColumnHeaderWidths(this._targetHeaderTable,
b,e,g,h);f&&g>=0&&e>g&&this._adjustReorderDataBodyNonFrozenCol(h);this._footerless||this._adjustReorderColumnFooterWidths(e,g,h)}this._emptyDropCells=[]};
AdfDhtmlTableBasePeer.prototype._insertEmptyDropColumnHeader=function(a,b,d,e,f){for(var e=AdfAgent.AGENT,g=this._insertColumnAfter,h=this._reorderColWidth,k=this._emptyDropCells,l=this._lastFrozen,m=this._targetHeaderTable,n=this._reorderEmptyCellWidth,o=a.ownerDocument,p=this._isFilterable(),s=p?3:2,q=0;q<s;q++){var t=m.rows[q],u=t.cells;if(q<s-1){var v=l<0||b<=l?b:b-l-1;g&&(v+=d-1);headerCell=u[v]}else headerCell=a;u=o.createElement("th");g?headerCell.nextSibling?t.insertBefore(u,headerCell.nextSibling):
t.appendChild(u):t.insertBefore(u,headerCell);if(q==0)u.style.cssText=headerCell.style.cssText;else{u.className=AdfDhtmlTableBasePeer._DROP_TARGET_CLASS+" "+headerCell.className;if(q==s-1)u.rowSpan=m.rows.length-(p?2:1);u.innerHTML="&nbsp;"}n?u.style.width=n:(e.setOuterWidth(u,h),n=this._reorderEmptyCellWidth=parseInt(u.style.width)+"px");k.push(u)}this._adjustReorderColumnHeaderWidths(m,f,b,l,-h);e.getPlatform()==AdfAgent.WEBKIT_PLATFORM&&this._insertEmptyDropColGroupCol(m,b,d,g,l,h,k)};
AdfDhtmlTableBasePeer.prototype._insertEmptyDropColumnBody=function(a,b){for(var d=AdfAgent.AGENT.getPlatform(),e=d==AdfAgent.WEBKIT_PLATFORM,d=d==AdfAgent.IE_PLATFORM,f=AdfDhtmlTableBasePeer._isRTL(),g=this._lastFrozen,h=this._insertColumnAfter,k=this._reorderColWidth,l=this._emptyDropCells,m=this._reorderEmptyCellWidth,n=this._currentScrollLeft,o=this.GetDatabody(),p=o.childNodes,s=p.length,q=o.ownerDocument,t=AdfDhtmlTableBasePeer._DROP_TARGET_CLASS,u=this._currentScrollTop,v,w=0;w<s;w++){var y=
p[w],z=y.rows,C=z.length;if(w==0)v=y.startPos;for(var A=0;A<C;A++){var B=z[A];if(B.offsetTop-(u-v)>o.offsetHeight)break;if(!this._hasDetailStamp||!AdfAgent.getAgent().getAttribute(B,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1)){var D,E=null,D=h?a+b-1:a;g<0||a<=g?D=B.cells[D]:(E=AdfDhtmlTableBasePeer._getNestedScrolledTable(B),B=E.rows[0],D=B.cells[D-g-1]);var F=q.createElement("td");F.className=t+" "+D.className;h?D.nextSibling?B.insertBefore(F,D.nextSibling):B.appendChild(F):B.insertBefore(F,D);
F.style.width=m;F.noWrap=!0;F.innerHTML="&nbsp;";l.push(F);if(E!=null)if(this._adjustReorderInnerTableWidth(E,-k),e)this._insertEmptyDropColGroupCol(E,a,b,h,g,k,l);else if(d&&(B=E.parentNode,f||B.scrollLeft!=n))B.scrollLeft=n}}v+=y.offsetHeight;e&&((g<0||a<=g)&&this._insertEmptyDropColGroupCol(y,a,b,h,g,k,l),g>=0&&a>g&&this._adjustReorderNonFrozenCol(y,-k))}if(f&&g<0)o.scrollLeft=n};
AdfDhtmlTableBasePeer.prototype._insertEmptyDropColumnFooter=function(a,b){var d=AdfAgent.AGENT.getPlatform()==AdfAgent.WEBKIT_PLATFORM,e=this._lastFrozen,f=this._insertColumnAfter,g=this._reorderColWidth,h=this._emptyDropCells,k=this._reorderEmptyCellWidth,l=this._getColumnFooter(),m,n=null,o=f?a+b-1:a;if(e>=0&&a>e){if(n=AdfDhtmlTableBasePeer.__getChildBySubId(l,"fd2"),m=AdfDhtmlTableBasePeer.__getChildBySubId(n,"ft2"),o-=e+1,n.scrollLeft!=this._currentScrollLeft)n.scrollLeft=this._currentScrollLeft}else m=
AdfDhtmlTableBasePeer.__getChildBySubId(l,"ft");for(var l=l.ownerDocument,p,s=0;s<2;s++){var q=m.rows[s],p=l.createElement(s==0?"th":"td");cell=q.cells[o];f?cell.nextSibling?q.insertBefore(p,cell.nextSibling):q.appendChild(p):q.insertBefore(p,cell);p.style.width=k;if(s==0)p.style.cssText=cell.style.cssText;else if(p.className=cell.className,p.innerHTML="&nbsp;",p._afrIsFooter=!0,d)p.rowSpan="10";h.push(p)}this._adjustReorderColumnHeaderWidths(m,n,a,e,-g);d&&this._insertEmptyDropColGroupCol(m,a,b,
f,e,g,h)};AdfDhtmlTableBasePeer._columnReorderAnimationComplete=function(a){a._reorderColumnComponentsWithoutAnimation();a._cleanUpAfterColumnReorder()};
AdfDhtmlTableBasePeer.prototype._handleColReorderAbort=function(){var a=AdfAgent.AGENT,b=AdfAgent.AGENT.getPlatform()==AdfAgent.WEBKIT_PLATFORM,d=this._lastFrozen,e=this.__getColumnHeader(),f=AdfDhtmlTableBasePeer.__getChildBySubId(e,"t"),g,h;d>=0&&(g=AdfDhtmlTableBasePeer.__getChildBySubId(e,"d2"),h=AdfDhtmlTableBasePeer.__getChildBySubId(g,"t2"));this._removeEmptyDropColumn(h,g);for(var e=a.getIntAttribute(this._reorderTH,"_d_index",-1),k=this._reorderHiddenCells,l=this._reorderColWidth,m=k.length,
n,o,p=0;p<m;p++){n=k[p];n.style.display="";if(n._afrOriginalWidth)n.style.width=n._afrOriginalWidth;if(n.tagName=="TD"&&!n._afrIsFooter)n=n.parentNode,d>=0&&e>d&&n!=o&&this._adjustReorderInnerTableWidth(n.parentNode.parentNode,-l),o=n}b&&d>=0&&e>d&&this._adjustReorderDataBodyNonFrozenCol(-l);this._adjustReorderColumnHeaderWidths(d>=0&&e>d?h:f,g,e,d,-l);this._footerless||this._adjustReorderColumnFooterWidths(e,d,-l);if(this._columnReorderTracker!=null)this.getDomElement().removeChild(this._columnReorderTracker),
this._columnReorderTracker=null;this._cleanUpAfterColumnReorder();a.enableUserSelect(this.__getColumnHeader())};AdfDhtmlTableBasePeer.prototype.GetFocusManager=function(){return this._focusManager};AdfDhtmlTableBasePeer.prototype.GetFocusedRowKey=function(){return this._focusManager.currency};
AdfDhtmlTableBasePeer.prototype.GetLastRowKey=function(){var a=this._focusManager.currency;if(a==null&&this._isRowSelectionEnabled()){var b=this.getComponent().getSelectedRowKeys(),d;for(d in b)b[d]!=AdfUITable._SELECT_ALL&&b[d]&&(a=d)}return a};AdfDhtmlTableBasePeer.prototype.suppressSelectionEventDelivery=function(a){this._suppressSelectionEventDelivery=a};AdfDhtmlTableBasePeer.prototype.canDeliverSelectionEvent=function(){return!this._suppressSelectionEventDelivery};
AdfDhtmlTableBasePeer.prototype._getTargetRowHeader=function(a){for(var b=null,d=this.getDomElement();a&&a!=d;){if(AdfAgent.getAgent().getNodeName(a)=="TD"){a.getAttribute(AdfDhtmlTableBasePeer._ROW_HEADER)!=null&&(b=a);break}a=a.parentNode}return b};AdfDhtmlTableBasePeer.prototype.__getSelectedColumns=function(){for(var a=this.__getVisibleLeafColumns(),b=[],d=a.length,e=0;e<d;e++){var f=a[e];f&&f.getSelected()&&b.push(f)}return b};
AdfDhtmlTableBasePeer.prototype.GetRowHeaderCellFromRow=function(a){AdfAssert.assert(a!=null,"Unable to get row header cell from a non-valid row!");AdfAgent.getAgent();for(var b=null,d=a.cells,e=d.length,f=0;f<e;f++)if(a=d[f],a.getAttribute(AdfDhtmlTableBasePeer._ROW_HEADER)!=null){b=a;break}return b};
AdfDhtmlTableBasePeer.prototype._isTargetCellEditable=function(a){for(var b=AdfAgent.getAgent(),d,e=this.getDomElement(),f=AdfDhtmlTableBasePeer._INPUT_REGEXP;null!=a&&a!=e&&(d=b.getNodeName(a))!="TD"&&d!="TH";){if(a.nodeType!=3){var g=a.getAttribute("tabIndex",2);if(g!=null&&g>=0&&g!=32768&&g!=65535)return!0;else if(d.match(f)&&g!=-1)return!0}a=a.parentNode}return!1};
AdfDhtmlTableBasePeer.prototype._isTargetTextOnlyNode=function(a){if(a.tagName=="SPAN"&&a.getAttribute(AdfDhtmlTableBasePeer._CELL_TEXT_KEY)=="on")return!0;return!1};AdfDhtmlTableBasePeer.prototype._isTargetNavigable=function(a){return a&&a.tagName=="A"&&a.href&&a.href.length>0&&a.getAttribute("href")!="#"};
AdfDhtmlTableBasePeer.prototype._handleRowMouseDown=function(a,b,d){var e=AdfAgent.AGENT,f=e.getEventTarget(a),g=this._getTargetRowHeader(f),h=null!=g,k=this._isTargetCellEditable(f),l=e.getPlatform()==AdfAgent.GECKO_PLATFORM,m=this._isTargetNavigable(f);k||this._grabFocus();var n=e.isLeftButton(a);h?this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,b,g):(n||this._contextMenuSelect)&&this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,b,d);if(this._isClickToEdit()&&
this._getActiveRowKey()!=b){if(this._cellNavMode=!0,this._ctePatternStart=void 0,this._setActiveRowKey(b),this._saveClickToEditRequest(a,d),b)this._editableTableReadOnlyMode=!1}else if(k){if(this._ctePatternStart!=this._getCellAndIndexForNode(f,d).cellIndex)this._ctePatternStart=void 0;this._cellNavMode=AdfPage.PAGE.getActiveDomElement()!=f}if(this._isRowSelectionEnabled()&&(g=this._selIsSelected(b),n&&(!m||!l)||this._contextMenuSelect&&!n)){if(!g)this._doRowSelection(a,b,d),this._ignoreRowClick=
!0,k||e.eatEvent(a);!k&&n&&(this._setFocusOnEditableElementInNode(e,f),h&&this._isMultipleRowSelect()&&(e.disableUserSelect(this.GetDatabody()),this._doRowHeaderDrag(a,b),e.eatEvent(a)))}};AdfDhtmlTableBasePeer.prototype._handleDataBodySelectStart=function(a){if(!a)a=AdfPage.PAGE.getDomWindow().event;var b=AdfAgent.AGENT,d=b.getEventTarget(a);this._isRowSelectionEnabled()&&!this._isTargetCellEditable(d)&&b.preventDefault(a)};
AdfDhtmlTableBasePeer.prototype._doRowHeaderDrag=function(a,b){this._startDragRowHeaderKey=b;if(this._handleRowHeaderDragCallback==null)this._handleRowHeaderDragCallback=this.createCallback(this._handleRowHeaderDrag),this._endRowHeaderDragCallback=this.createCallback(this._endRowHeaderDrag);AdfPage.PAGE.startDrag(a,this._handleRowHeaderDragCallback,this._endRowHeaderDragCallback)};
AdfDhtmlTableBasePeer.prototype._handleRowHeaderDrag=function(a){var b=AdfAgent.getAgent(),d=b.getEventTarget(a);if(this._getTargetRowHeader(d)!=null){for(d=d.parentNode;d&&b.getNodeName(d)!="TR";)d=d.parentNode;if(d&&(b=d.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY),b!=null))this._selectRowRange(this._startDragRowHeaderKey,b),this._startDragRowHeaderKey=b,this._autoScrollRows(a)}else for(var e=this.getDomElement(),d=d.parentNode;d&&d!=e;){if(b.getNodeName(d)=="TR"&&b.getAttribute(d,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,
!1)){this._autoScrollRows(a);break}d=d.parentNode}};
AdfDhtmlTableBasePeer.prototype._autoScrollRows=function(a){var b=AdfAgent.AGENT,d=this.GetDatabody();if(!(this._getScrollHeight()<=this._getScrollerOffsetHeight())&&(a=b.getMousePosition(a),b=b.getElementPosition(d),b=Math.max(a.y-b.y,0),d=b>d.offsetHeight-AdfDhtmlTableBasePeer._AUTOSCROLL_MARGIN,b<AdfDhtmlTableBasePeer._AUTOSCROLL_MARGIN||d))d=this._currentScrollTop+(d?this._averageRowHeight:-this._averageRowHeight),d>=0&&d<this._getScrollHeight()&&this._scrollerScrollToPos(null,d)};
AdfDhtmlTableBasePeer.prototype._endRowHeaderDrag=function(){this._startDragRowHeaderKey=null;AdfAgent.AGENT.enableUserSelect(this.GetDatabody())};
AdfDhtmlTableBasePeer.prototype._handleRowClick=function(a,b,d){var e=AdfAgent.getAgent(),f=e.getEventTarget(a),g=this._getTargetRowHeader(f),h=null!=g;this._ignoreRowClick?this._ignoreRowClick=!1:this._isRowSelectionEnabled()&&(h?this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,b,g):this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,b,d),f=this._isTargetNavigable(f),g=e.getPlatform()==AdfAgent.GECKO_PLATFORM,((e=e.isLeftButtonClick(a))&&(!f||!g)||this._contextMenuSelect&&
!e)&&this._doRowSelection(a,b,d))};
AdfDhtmlTableBasePeer.prototype._doRowSelection=function(a,b,d){var e=this._isMultipleRowSelect();if(e&&AdfAgent.AGENT.isSelectionToggle(a))this._unSelectAllColumns(),this._anchorRowKey=b,this._selIsSelected(b)?this._selUnselectRow(b,d):this._selSelectRow(b,d);else if(e&&a.shiftKey){if(a=this._anchorRowKey){if(!this.FindRowByKey(a)){d=this.getComponent();d=new AdfSelectionEvent(d,d.getSelectedRowKeys(),null);d.setSelectionRange(a,b);d.queue();return}}else a=this._anchorRowKey=b;this.suppressSelectionEventDelivery(!0);
this._selUnselectAll();this._queueColumnSelectionEvent();this.suppressSelectionEventDelivery(!1);this._selectRowRange(b,a)}else this._anchorRowKey=b,this._selIsOnlySelection(b)||(this.suppressSelectionEventDelivery(!0),this._selUnselectAll(),this.suppressSelectionEventDelivery(!1),this._selSelectRow(b,d),this._queueColumnSelectionEvent())};AdfDhtmlTableBasePeer.prototype._selUnselectAll=function(){this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT,!0);this._unSelectAllColumns();this._updateTableSelectionState({})};
AdfDhtmlTableBasePeer.prototype._selSelectRow=function(a,b,d){this._selHighlightRow(b);d||(b=this.getComponent(),d={},AdfCollections.copyInto(d,b.getSelectedRowKeys()),d[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]?delete d[a]:d[a]=!0,this._updateTableSelectionState(d))};
AdfDhtmlTableBasePeer.prototype._selUnselectRow=function(a,b){this._selUnhighlightRow(b);var d={};AdfCollections.copyInto(d,this.getComponent().getSelectedRowKeys());d[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]?d[a]=!0:delete d[a];this._updateTableSelectionState(d)};
AdfDhtmlTableBasePeer.prototype._selectRowRange=function(a,b){var d=this.GetDatabody();if(d!=null){var e=AdfAgent.getAgent(),f=this.getComponent(),g={};AdfCollections.copyInto(g,f.getSelectedRowKeys());for(var f=g[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY],h=!1,k=!1,d=d.childNodes,l=d.length,m=0;m<l&&!k;++m)for(var n=d[m].rows,o=n.length,p=0;p<o;++p){var s=n[p],q=e.getAttribute(s,AdfDhtmlTableBasePeer._ROW_KEY);if(q!=null){if(q==a||q==b){if(h||a==b)k=!0;h=!0}h&&(this._selSelectRow(q,s,!0),f?delete g[q]:
g[q]=!0);if(k)break}}this._updateTableSelectionState(g)}};AdfDhtmlTableBasePeer.prototype._selIsSelected=function(a){var b=this.getComponent().getSelectedRowKeys();return b[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]?!b[a]:b[a]};AdfDhtmlTableBasePeer.prototype._selIsOnlySelection=function(a){var b=this.getComponent().getSelectedRowKeys();if(!b||b[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]!=null)return!1;var d=b[a];if(d)for(var e in b)if(e!=a){d=!1;break}return d};
AdfDhtmlTableBasePeer.prototype._selHighlightRow=function(a){AdfAssert.assertDomNode(a);AdfDomUtils.addCSSClassName(a,AdfDhtmlTableBasePeer._SELECTED_CLASS);AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._HIGHLIGHTED_CLASS);this.isInActiveHeirarchy()?AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._INACTIVE_CLASS):AdfDomUtils.addCSSClassName(a,AdfDhtmlTableBasePeer._INACTIVE_CLASS)};
AdfDhtmlTableBasePeer.prototype._selUnhighlightRow=function(a){AdfAssert.assertDomNode(a);AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._INACTIVE_CLASS);AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._SELECTED_CLASS)};AdfDhtmlTableBasePeer.prototype._isColumnSelectionEnabled=function(){var a=this.getComponent().getColumnSelection?this.getComponent().getColumnSelection():null;return a&&a!=AdfDhtmlTableBasePeer._SELECTION_NONE};
AdfDhtmlTableBasePeer.prototype._isMultipleColumnSelect=function(){var a=this.getComponent().getColumnSelection?this.getComponent().getColumnSelection():null;return a&&a==AdfDhtmlTableBasePeer._SELECTION_MULTIPLE};AdfDhtmlTableBasePeer.prototype._isRowSelectionEnabled=function(a){a||(a=this.getComponent());return(a=a.getRowSelection())&&a.toLowerCase()!=AdfDhtmlTableBasePeer._SELECTION_NONE};
AdfDhtmlTableBasePeer.prototype._isMultipleRowSelect=function(){var a=this.getComponent().getRowSelection();return a&&a.toLowerCase().indexOf(AdfDhtmlTableBasePeer._SELECTION_MULTIPLE)!=-1};AdfDhtmlTableBasePeer.prototype._isMultipleRowSelectNoSelectAll=function(){var a=this.getComponent().getRowSelection();return a&&a.indexOf(AdfDhtmlTableBasePeer._SELECTION_MULTIPLE_NOSELECTALL)!=-1};
AdfDhtmlTableBasePeer.prototype._selUpdateAll=function(a,b,d){d==null&&(d=this.getComponent().getSelectedRowKeys());var e=!1;d!=null&&(e=d[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]?!0:!1);e?this._selectAllSelectionUpdate(a,b,d):this._normalSelectionUpdate(a,b,d)};
AdfDhtmlTableBasePeer.prototype._normalSelectionUpdate=function(a,b,d){var e=this.GetDatabody();if(e!=null){if(!0==b)this._highlightedRowKey=null;if(d&&!AdfCollections.isEmpty(d)){for(var e=e.childNodes,f=e.length,g=AdfAgent.getAgent(),h=0;h<f;++h){var k=e[h].rows;if(k)for(var l=k.length,m=0;m<l;++m){var n=k[m],o=g.getAttribute(n,AdfDhtmlTableBasePeer._ROW_KEY);if(o!=null&&!(!1==b&&this._highlightedRowKey==o))switch(a){case AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_SELECT:this._selHighlightRow(n);break;
case AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT:this._selUnhighlightRow(n);break;case AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE:d[o]?this._selHighlightRow(n):this._selUnhighlightRow(n)}}}this._updateColumnSelection(a!=1)}}};
AdfDhtmlTableBasePeer.prototype._selectAllSelectionUpdate=function(a,b,d){var e=this.GetDatabody();if(e!=null){if(!0==b)this._highlightedRowKey=null;if(d&&!AdfCollections.isEmpty(d))for(var e=e.childNodes,f=e.length,g=AdfAgent.getAgent(),h=0;h<f;++h){var k=e[h].rows;if(k)for(var l=k.length,m=0;m<l;++m){var n=k[m],o=g.getAttribute(n,AdfDhtmlTableBasePeer._ROW_KEY);if(o!=null&&!(!1==b&&this._highlightedRowKey==o))switch(a){case AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_SELECT:this._selHighlightRow(n);break;
case AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT:this._selUnhighlightRow(n);break;case AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE:d[o]?this._selUnhighlightRow(n):this._selHighlightRow(n)}}}}};
AdfDhtmlTableBasePeer.prototype._selSelectAll=function(){var a=this.GetDatabody();if(a!=null&&this._isMultipleRowSelect()){this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT,!0);var b={};b[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]=!0;this._updateTableSelectionState(b);for(var a=a.childNodes,b=a.length,d=AdfAgent.getAgent(),e=0;e<b;++e)for(var f=a[e].rows,g=f.length,h=0;h<g;++h){var k=f[h];d.getAttribute(k,AdfDhtmlTableBasePeer._ROW_KEY)!=null&&this._selHighlightRow(k)}}};
AdfDhtmlTableBasePeer.prototype._unhiglightAnyExistingHighlightedRow=function(){var a=this._highlightedRowKey;if(a&&(this._highlightedRowKey=null,!this._selIsSelected(a)))this._selUnhighlightRow(this._highlightedRow),this._highlightedRow=null};AdfDhtmlTableBasePeer.prototype._updateTableSelectionState=function(a){this._ignoreSelSet=!0;AdfLogger.LOGGER.finer("Update Table selection state to:",a);this.getComponent().setSelectedRowKeys(a);this._ignoreSelSet=!1};
AdfDhtmlTableBasePeer.prototype.ComponentSelectedRowKeysChanged=function(a,b,d,e){this._ignoreSelSet?(a=this.GetAssociatedComponent(),a!=null&&a.setSelectedRowKeys(d)):(this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT,!0,e),this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE,!0,d));this._pcPeer&&this._pcPeer.updateRowSelectionContext()};
AdfDhtmlTableBasePeer.prototype._resolveColumns=function(a,b,d){var e=AdfAgent.AGENT.getIntAttribute(d,"_d_index",-1);if(e>=0){var f=d.colSpan;if(f!=null&&(f=parseInt(f))>1)for(d=e+f;e<d;)b.push(this._getColumnHeaderLeafCell(e).id),a.push(e++);else a.push(e),b.push(d.id)}};
AdfDhtmlTableBasePeer.prototype._handleColumnHeaderDrag=function(a){var b=this.__getColumnHeaderMouseAction(a);if(b!=null&&"select"==b.type){var d=b.colIndices;d.length>0&&(this._selectColumnRange(this._activeColIndices,this._activeColIds,d,b.colIds),this._queueColumnSelectionEvent())}this._autoScrollColumnsIfNecessary(a);this._pcPeer&&this._pcPeer.updateStandardMenuToolbarItems()};
AdfDhtmlTableBasePeer.prototype._handleColumnHeaderDrop=function(){var a=this.__getColumnHeader();AdfAgent.AGENT.enableUserSelect(a);this._queueColumnSelectionEvent()};
AdfDhtmlTableBasePeer.prototype._doColumnSelections=function(a,b,d){var e=AdfPage.PAGE;if(this._isMultipleColumnSelect()&&AdfAgent.AGENT.isSelectionToggle(a)){a=this.getComponent().getSelectedRowKeys();AdfCollections.isEmpty(a)||(this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT,!0),this._updateTableSelectionState({}));this._activeColIndices=b;this._activeColIds=d;for(a=0;a<b.length;a++){var f=e.findComponent(d[a]);f.getSelected()?this._unSelectColumn(b[a],f,!1):this._selectColumn(b[a],
f,!1)}this._queueColumnSelectionEvent()}else if(a.shiftKey&&this._isMultipleColumnSelect())this._activeColIndices&&this._activeColIndices.length>=0&&(this._clearColumnSelectionEventChangedSets(),this._selUnselectAll(),this._selectColumnRange(this._activeColIndices,this._activeColIds,b,d),this._queueColumnSelectionEvent());else{this._activeColIndices=b;this._activeColIds=d;this._clearColumnSelectionEventChangedSets();this._selUnselectAll();for(a=0;a<b.length;a++)f=e.findComponent(d[a]),this._selectColumn(b[a],
f,!1);this._queueColumnSelectionEvent()}this._pcPeer&&this._pcPeer.updateStandardMenuToolbarItems()};AdfDhtmlTableBasePeer.prototype._selectColumn=function(a,b,d){b.getSelected()||(b.setProperty(AdfRichColumn.SELECTED,!0,!0,AdfUIComponent.PROPAGATE_NEVER),this._highlightColumn(a),this._isClickToEdit()&&this._getActiveRowKey()&&this._setActiveRowKey(null),this._colSelEventSelectedColIds[b.getClientId()]=!0,d&&this._queueColumnSelectionEvent())};
AdfDhtmlTableBasePeer.prototype._unSelectColumn=function(a,b,d){b.getSelected()&&(b.setProperty(AdfRichColumn.SELECTED,!1,!0,AdfUIComponent.PROPAGATE_NEVER),this._unHighlightColumn(a),this._colSelEventUnselectedColIds[b.getClientId()]=!0,d&&this._queueColumnSelectionEvent())};
AdfDhtmlTableBasePeer.prototype._unSelectAllColumns=function(){if(this._isColumnSelectionEnabled()){var a=AdfPage.PAGE,b=this._colCount,d;this._clearColumnSelectionEventRemovedSet();for(var e=0;e<b;e++)(d=this._getColumnHeaderLeafCell(e))&&this._unSelectColumn(e,a.findComponent(d.id),!1)}this._pcPeer&&this._pcPeer.updateStandardMenuToolbarItems()};
AdfDhtmlTableBasePeer.prototype._updateColumnSelection=function(a){if(!this._headerless)for(var b=AdfPage.PAGE,d=this._colCount,e=0;e<d;e++){var f=this._getColumnHeaderLeafCell(e);f&&b.findComponent(f.id).getSelected()&&(a?this._highlightColumn(e):this._unHighlightColumn(e))}};
AdfDhtmlTableBasePeer.prototype._selectColumnRange=function(a,b,d,e){for(var f=AdfPage.PAGE,g=0;g<a.length;g++)this._selectColumn(a[g],f.findComponent(b[g]));g=d[0]>a[0]?1:-1;a=a[0];for(b=b[0];a!=d[0];)this._selectColumn(a,f.findComponent(b)),a+=g,b=this._getColumnHeaderLeafCell(a).id;for(g=0;g<d.length;g++)this._selectColumn(d[g],f.findComponent(e[g]))};
AdfDhtmlTableBasePeer.prototype._highlightColumn=function(a){this._highlightCell(this._getColumnHeaderLeafCell(a),!0);for(var b=this.GetDatabody().childNodes,d=b.length,e=null,f=AdfAgent.getAgent(),g=0;g<d;++g)for(var h=b[g].rows,k=h.length,l=0;l<k;++l)f.getAttribute(h[l],AdfDhtmlTableBasePeer._ROW_KEY,null)&&(e==null&&(e=this.isInActiveHeirarchy()),this._lastFrozen>=0&&a>this._lastFrozen?this._highlightCell(this._getInnerTableCell(h[l],a),e):this._highlightCell(h[l].cells[a],e))};
AdfDhtmlTableBasePeer.prototype._unHighlightColumn=function(a){this._unHighlightCell(this._getColumnHeaderLeafCell(a),!0);for(var b=this.GetDatabody().childNodes,d=b.length,e=AdfAgent.getAgent(),f=0;f<d;++f)for(var g=b[f].rows,h=g.length,k=0;k<h;++k)e.getAttribute(g[k],AdfDhtmlTableBasePeer._ROW_KEY,null)&&(this._lastFrozen>=0&&a>this._lastFrozen?this._unHighlightCell(this._getInnerTableCell(g[k],a)):this._unHighlightCell(g[k].cells[a]))};
AdfDhtmlTableBasePeer.prototype._highlightCell=function(a){AdfDomUtils.addCSSClassName(a,AdfDhtmlTableBasePeer._SELECTED_CLASS)};AdfDhtmlTableBasePeer.prototype._unHighlightCell=function(a){AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._SELECTED_CLASS);AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._INACTIVE_CLASS)};
AdfDhtmlTableBasePeer.prototype._getParentTH=function(a){for(var a=AdfAgent.AGENT.getEventTarget(a),b=null,d=this.getDomElement();!b&&a&&a!=d&&a.nodeType==1;)a.getAttribute("_d_index")?b=a:a=a.parentNode;return b};AdfDhtmlTableBasePeer.prototype._getColumnHeaderCellForEvent=function(a){var b=null,d=this.__getColumnHeader(),e=AdfAgent.AGENT,d=e.getElementPosition(d);e.getMousePosition(a).y-d.y<=this._cachedCHHeight&&(b=this._getParentTH(a));return b};
AdfDhtmlTableBasePeer.prototype.__getColumnHeaderMouseAction=function(a){var b=null;if(!this._headerless){var d=AdfAgent.AGENT,e=null,f=this.__getColumnHeader(),f=d.getElementPosition(f),g=d.getMousePosition(a);g.y-f.y<=this._cachedCHHeight&&(e=this._getParentTH(a));if(e){b={};b.cell=e;if(e.getAttribute("_afrFH")!=null)return b.type="clearAllFilter",b;if(!this._virtInitialized)return null;var f=null,h=d.getIntAttribute(e,"_d_index",-1),k=AdfDhtmlTableBasePeer._isRTL();if(h!=-1){var d=d.getElementPosition(e),
d=g.x-d.x,g=e.offsetWidth,l=!(this._lastColWidthOverride!=-1&&h==this._colCount-1);d<=this.__getColumnResizeMargin()?k?l&&(f="end"):h>0&&(f="start"):g-d<=this.__getColumnResizeMargin()&&(k?h>0&&(f="start"):l&&(f="end"))}f?(b.type="resize",b.data=f):e.getAttribute(AdfDhtmlTableBasePeer._SELECT_ALL)!=null?b.type="selectAll":h==0&&this._lastFrozen>=0?b.type="default":this._getColHeaderMouseSelAction(a,b,e)}}return b};
AdfDhtmlTableBasePeer.prototype._getColHeaderMouseSelAction=function(a,b,d){var e=AdfAgent.AGENT,f=e.getEventTarget(a),g=this._isColumnSelectionEnabled(),h=f.parentNode.getAttribute(AdfDhtmlTableBasePeer._SORT_ASCENDING);h||(h=f.parentNode.parentNode.getAttribute(AdfDhtmlTableBasePeer._SORT_ASCENDING));var k=f.parentNode.getAttribute(AdfDhtmlTableBasePeer._SORT_DESCENDING);k||(k=f.parentNode.parentNode.getAttribute(AdfDhtmlTableBasePeer._SORT_DESCENDING));if(h||k){if(a.type=="click"){e=e.getElementById(AdfRichUIPeer.CreateSubId(d.id,
AdfDhtmlTableBasePeer.__SORT_INDICATOR));a=e.getAttribute(AdfDhtmlTableBasePeer._SORTED_TYPE);if(h){if(a==AdfDhtmlTableBasePeer._SORTED_ASCENDING)return;b.sortOrder=!0}else if(k){if(a==AdfDhtmlTableBasePeer._SORTED_DESCENDING)return;b.sortOrder=!1}b.type="sort";b.sortProperty=AdfPage.PAGE.findComponent(d.id).getSortProperty()}}else if(d.id.indexOf("_afrBlankColumn")==-1)if(!g&&this.getComponent().getDisableColumnReordering()&&d.getAttribute(AdfDhtmlTableBasePeer._ROW_HEADER)==null)b.type="default";
else if(!g&&d.getAttribute(AdfDhtmlTableBasePeer._ROW_HEADER)==null&&d.getAttribute(AdfDhtmlTableBasePeer._ROOT_COLUMN)!=null)e=e.getElementById(AdfRichUIPeer.CreateSubId(d.id,AdfDhtmlTableBasePeer.__SORT_INDICATOR)),e!=null?a.type=="click"?(a=e.getAttribute(AdfDhtmlTableBasePeer._SORTED_TYPE),b.sortOrder=a==AdfDhtmlTableBasePeer._SORTED_ASCENDING?!1:!0,b.type="sort",b.sortProperty=AdfPage.PAGE.findComponent(d.id).getSortProperty()):b.type=a.type=="mousemove"?"default":"move":b.type="move";else if(d.getAttribute(AdfDhtmlTableBasePeer._ROW_HEADER)==
null)if((!g||!e.isSelectionToggle(a))&&this._shouldEnableColumnReorder(a,d)){if(!this.getComponent().getDisableColumnReordering())b.type="move"}else d.id&&g?(b.type="select",this._resolveColumns(b.colIndices=[],b.colIds=[],d)):b.type="default"};
AdfDhtmlTableBasePeer.prototype._shouldEnableColumnReorder=function(a,b){var d=AdfPage.PAGE,e=!1,f=null,g=this._flattenedColumns,g=b.getAttribute(AdfDhtmlTableBasePeer._LEAF_COLUMN)!=null,h=b.getAttribute(AdfDhtmlTableBasePeer._ROOT_COLUMN)!=null;if(g&&h)b.id&&b.id.length>0&&d.findComponent(b.id).getSelected()&&(f=[b.id]);else if(h)if(this._resolveColumns([],f=[],b),f.length==0)f=null;else for(i=f.length-1;i>=0;--i)if(!d.findComponent(f[i]).getSelected()){f=null;break}if(f){e=!0;g=this.__getVisibleLeafColumns();
for(i=g.length-1;i>=0;--i)if((d=g[i])&&d.getSelected()){h=!1;for(j=f.length-1;j>=0;--j)if(d.getClientId()==f[j]){h=!0;break}if(!h){e=!1;break}}}return e};AdfDhtmlTableBasePeer.prototype._handleColResizeDrag=function(a,b){var d=this._getColumnResizeIndicator().style,e=parseInt(d.left),f=parseInt(this._resizedTH.style.width),g=this._resizeColDelta+(AdfDhtmlTableBasePeer._isRTL()?-b:b),h=this._getLargestMinimumWidth();this._resizeColDelta=g;if(f+g>=h)d.left=e+b+"px"};
AdfDhtmlTableBasePeer.prototype._getLargestMinimumWidth=function(){var a=this._resizedIndex,b=this.__getVisibleLeafColumns()[a],a=this._largestMinimumWidth;if(a==null){var a=0,d=this.__getSelectedColumns();if(AdfCollections.indexOf(d,b)==-1)a=b.getMinimumWidth();else for(var b=d.length,e=0;e<b;e++)var f=d[e].getMinimumWidth(),a=Math.max(a,f);this._largestMinimumWidth=a}return this._largestMinimumWidth};
AdfDhtmlTableBasePeer.prototype._handleColResizeDrop=function(){this._getColumnResizeIndicator().style.display="none";var a=this._resizeColDelta,b=this._resizedTH,d=a+parseInt(b.style.width),e=this._getLargestMinimumWidth(),d=Math.max(d,e);this._lastFrozen>=0&&this._resizedIndex<=this._lastFrozen&&(e=Math.max(this.GetDatabody().clientWidth-10,e),b.offsetLeft+d>=e&&(d=e-b.offsetLeft));AdfAssert.assert(!isNaN(d),"Illegal width for column resize drop.  delta = "+a+", th.style.width = "+b.style.width);
this._doColResizesFromUser(d,null)};
AdfDhtmlTableBasePeer.prototype._doColResizesFromUser=function(a,b){this._resizedTH=this._largestMinimumWidth=null;var d=this._resizedIndex,e=this.__getVisibleLeafColumns(),f=e.length,g=e[d],h=this.GetDatabody(),k=this.__getSelectedColumns(),l=!1;b==null&&(l=AdfCollections.indexOf(k,g)!=-1);var m;this.IsEmpty||(m=h.childNodes[0].rows[0],AdfAssert.assert(m!=null,"this.IsEmpty was "+this.IsEmpty+" but there were no rows!"));for(var n=[],g=[],o,p=0,s=0,q,t=this._columnStretching,u=0,q=0;q<f;q++){var o=
e[q],v=this._getColumnFlex(o,null,t,f,q),h=this._getColumnActualWidth(q,m);u+=h;l&&AdfCollections.indexOf(k,o)!=-1||!l&&q==d?(b!=null&&(v=this._getColumnFlex(null,b,t,f,q)),p++,s+=h,g.push({component:o,displayIndex:q,flex:v,minimumWidth:o.getMinimumWidth(),actualWidth:h})):v!=null&&o.getMinimumWidth()}if(t!="none"&&t!="blank")return this._userDragStretchedColumns(a,b,m,g,e,t);d=p*a-s;h=Math.abs(d);q=n.length;o=Math.floor(h/q);k=h-q*o;l=0;do{for(m=0;m<q;m++)if(f=n[m],!0!=f.atMinimum){e=f.minimumWidth;
h=f.actualWidth;p=o;k>0&&(p+=k,k=0);d<0&&(p*=-1);p=h-p;s=f.desiredWidth;s!=null&&(p+=s-h);e=Math.max(e,p);if(e!=p)f.atMinimum=!0,l++;k+=e-p;f.desiredWidth=e}o=0}while(k!=0&&l<q);n=[].concat(n);h=g.length;for(q=0;q<h;q++)o=g[q],o.flex==null?(delta=a-o.actualWidth,this._doResizeColumn(o.displayIndex,null,a,delta,!0)):(o.desiredWidth=a,n.push(o));g=n.length;for(q=f=0;q<g;q++){o=n[q];e=o.desiredWidth;h=o.actualWidth;if(e==null)e=h,o.desiredWidth=e;o.delta=e-h;f+=e}h=[];for(q=0;q<g;q++)o=n[q],e=o.desiredWidth,
delta=o.delta,d=o.displayIndex,this._doResizeColumn(d,null,e,delta,!1),k=Math.round(1E4*e/f)+"%",o=o.component,this._ignoreSetColWidth=!0,o.setProperty(AdfRichColumn.WIDTH,k,!0),delete this._ignoreSetColWidth,h.push({displayIndex:d,width:e});this._currentColumnStretchDetails=h;this._stretchTheColumns();g=this.__getColumnHeader();AdfAgent.AGENT.enableUserSelect(g)};
AdfDhtmlTableBasePeer.prototype._userDragStretchedColumns=function(a,b,d,e,f,g){var h=[],k=e.length,l=0,m=0,n,o,p=!1;b==null&&(b=0,p=!0);for(o=0;o<k;o++)n=e[o],n.desiredWidth=n.minimumWidth,h[n.displayIndex]=n,l+=n.minimumWidth,m=Math.max(m,n.actualWidth),p&&(b+=n.actualWidth);var s=n=0,q,p=!1,t=[];if(a>m){p=!0;for(o=e[k-1].displayIndex+1;o<f.length;o++)t.push(this._createStrechColumnData(o,f[o],d)),q=t.length-1,n+=t[q].minimumWidth,s+=t[q].actualWidth}else for(o=e[0].displayIndex-1;o>=0;o--)t.push(this._createStrechColumnData(o,
f[o],d)),q=t.length-1,n+=t[q].minimumWidth,s+=t[q].actualWidth;o=s-n;m=a-m;if(m>=0&&m>o&&(a=o+l,m=o,a<=0))return;e.sort(AdfDhtmlTableBasePeer.__columnSortComparator);for(b=b-l+m;b!=0;){s=[];q=e[0].desiredWidth;for(o=0;o<k;o++){var u=0,n=e[o];e[o+1]?u=n.desiredWidth:(q=Math.abs(b),u=Math.abs(b));if(u<=q)s.push(n);else break}n=Math.floor(b/s.length);n>q&&s.length<k&&(n=e[s.length].desiredWidth-s[s.length-1].desiredWidth);for(o=0;o<s.length;o++)s[o].desiredWidth+=n,b-=n;b/s.length<1&&(e[k-1].desiredWidth+=
b,b=0)}for(o=0;o<k;o++)n=e[o],n.flex=Math.abs(n.desiredWidth),this._doResizeColumn(n.displayIndex,null,n.flex,n.flex-n.actualWidth,!0);p||(e=e[k-1].displayIndex+1,f[e]||e++,e<f.length&&(k=Math.abs(m),t[e]={component:f[e],displayIndex:o,minimumWidth:f[e].getMinimumWidth(),actualWidth:this._getColumnActualWidth(e,d)},t[e].actualWidth+=k,this._doResizeColumn(e,null,t[e].actualWidth,k,!0),a>=l&&(m=0)));if(p){e=m;for(o=0;o<t.length;o++)if(a=t[o],a.component)if(l=a.actualWidth-a.minimumWidth,e>=l)a.newWidth=
a.minimumWidth,a.flex=a.newWidth,h[a.displayIndex]=a,this._doResizeColumn(a.displayIndex,null,a.newWidth,p?-l:l,!0),e-=l;else{a.newWidth=a.actualWidth-m;a.flex=a.newWidth;h[a.displayIndex]=a;this._doResizeColumn(a.displayIndex,null,a.newWidth,p?-e:e,!0);break}}p=[];for(o=0;o<f.length;o++)h[o]||(t=this._getColumnFlex(f[o],null,g,f.length,o))&&p.push({displayIndex:o,width:this._getColumnActualWidth(o,d)});this._currentColumnStretchDetails=p;this._stretchTheColumns();d=this.__getColumnHeader();AdfAgent.AGENT.enableUserSelect(d)};
AdfDhtmlTableBasePeer.prototype._createStrechColumnData=function(a,b,d){var e=null;b?e={component:b,displayIndex:a,minimumWidth:b.getMinimumWidth(),actualWidth:this._getColumnActualWidth(a,d)}:(b=this._getColumnActualWidth(a,d),e={component:null,displayIndex:a,minimumWidth:b,actualWidth:b});return e};AdfDhtmlTableBasePeer.__columnSortComparator=function(a,b){return a.minimumWidth-b.minimumWidth};
AdfDhtmlTableBasePeer.prototype.__getPixelWidthFromPercent=function(a){a=parseInt(a);if(!isNaN(a))return a=this.GetDatabody().offsetWidth*a/100,a.toFixed(0);return null};
AdfDhtmlTableBasePeer.prototype.resizeColumn=function(a,b,d){if(!this._ignoreSetColWidth){for(var e=b.toString().indexOf("%")>0,f=a.getClientId(),g=this.__getColumnHeader(),h=AdfAgent.AGENT,g=g.getElementsByTagName("th"),k=g.length,l,m=0;m<k;++m)if(g[m].id==f){l=g[m];this._resizedIndex=f=h.getIntAttribute(l,"_d_index",0);break}if(l){l=100;b!=null&&(l=b,e&&(l=this.__getPixelWidthFromPercent(b)));if(isNaN(l)||l<=0||l>3200)l=100;b=this.__getSelectedColumns();if(AdfCollections.indexOf(b,a)!=-1){a=b.length;
for(e=0;e<a;e++)l=Math.max(l,b[e].getMinimumWidth())}else l=Math.max(l,a.getMinimumWidth());this._doColResizesFromUser(l,d)}}};
AdfDhtmlTableBasePeer.prototype._doResizeColumn=function(a,b,d,e,f){var g=!1,h=!1,k=!1;a<=this._lastFrozen&&(this._frozenWidth+=e,k=!0);var l=this.GetDatabody();k&&!this.IsEmpty&&this._sizeRegionsForFrozenColumns(l,l.offsetHeight);if(!this._headerless){var m=this.__getColumnHeader();b||(b=this._getColumnHeaderFooterSizingCell(a,m,"t","d2","t2"));this._resizeColumnHeaderFooterColumn(b,e,m,a,"t","d2","t2");if(this.IsEmpty)this._incrementWidth(m,e),this._synchronizeColumnRowHeights(m,"t","d2","t2");
else if(this._synchronizeColumnRowHeights(m,"t","d2","t2"),b=m.offsetHeight,b!=this._cachedCHHeight)this._cachedCHHeight=b,g=!0}if(!this._footerless)if(m=this._getColumnFooter(),b=this._getColumnHeaderFooterSizingCell(a,m,"ft","fd2","ft2"),this._resizeColumnHeaderFooterColumn(b,e,m,a,"ft","fd2","ft2"),this.IsEmpty)this._incrementWidth(m,e),this._synchronizeColumnRowHeights(m,"ft","fd2","ft2");else if(this._synchronizeColumnRowHeights(m,"ft","fd2","ft2"),b=m.offsetHeight,b!=this._cachedCFHeight)this._cachedCFHeight=
b,h=!0;if(!this.IsEmpty){e=this._resizeDatabodyColumn(l,a,e);if(g||h||k)g=this.getDomElement(),this._setScrollerTop(this._cachedCHHeight),this._setScrollerHeight(g.clientHeight,this._cachedCHHeight,this._cachedCFHeight,this._cachedNBHeight),this._setScrollerWidth(g.clientWidth,this._frozenWidth);g=l.firstChild;this._setFakeCanvasWidth(this._lastFrozen<0?parseInt(g.style.width):this._lastFrozen<this._colCount-1?parseInt(AdfDhtmlTableBasePeer._getNestedScrolledTable(g.rows[0]).style.width):0);g=e.relFactor;
h=e.delta;this._adjustCanvasHeight(h!=void 0?h:Math.round((g-1)*this._averageRowHeight*this.GetKnownRowCount()),l,!0,!0);if(f)a=this.__getVisibleLeafColumns()[a],this._ignoreSetColWidth=!0,a.setProperty(AdfRichColumn.WIDTH,d,!0),delete this._ignoreSetColWidth;d=this.__getScrollLeft();if(this._currentScrollLeft!=d)this._currentScrollLeft=d,this._handleHorizontalScroll(d);this._fillViewPort(l,l.offsetHeight,!1)}};
AdfDhtmlTableBasePeer.prototype._resizeColumnHeaderFooterColumn=function(a,b,d,e,f,g,h){a=this._incrementWidth(a,b);this._lastFrozen>=0?e<=this._lastFrozen?(h=AdfDhtmlTableBasePeer.__getChildBySubId(d,f),this._incrementWidth(h,b),d=AdfDhtmlTableBasePeer.__getChildBySubId(d,g),AdfDhtmlTableBasePeer._isRTL()?d.style.right=h.style.width:d.style.left=h.style.width):(d=AdfDhtmlTableBasePeer.__getChildBySubId(d,g),this._incrementWidth(AdfDhtmlTableBasePeer.__getChildBySubId(d,h),b)):(h=AdfDhtmlTableBasePeer.__getChildBySubId(d,
f),this._incrementWidth(h,b));return a};
AdfDhtmlTableBasePeer.prototype._resizeDatabodyColumn=function(a,b,d){for(var e=0,f=0,a=a.childNodes,g=a.length-1;g>=0;g--){var h=a[g];e+=h.cachedHeight;this._resizeBlockColumn(h,b,d);h._lastSyncRow=null;this._synchronizeRowHeights(h);var k=h.offsetHeight;f+=k;if(k!=h.cachedHeight)for(var l=k-h.cachedHeight,m=g+1;m<a.length;m++)a[m].startPos+=l;h.cachedHeight=k}b=a.length==1&&a[0].startRow==0&&a[0].numRows==this.GetKnownRowCount()?f-e:void 0;return{relFactor:f/e,delta:b}};
AdfDhtmlTableBasePeer.prototype._resizeBlockColumn=function(a,b,d){if(this._lastFrozen<0||b<=this._lastFrozen)a.rows&&this._incrementWidth(a.rows[0].cells[b],d);else for(var e=a.rows,f=0;f<e.length;f++){var g=AdfDhtmlTableBasePeer._getNestedScrolledTable(e[f]);this._incrementWidth(g,d);this._incrementWidth(g.rows[0].cells[b-this._lastFrozen-1],d)}this._lastFrozen<0&&this._incrementWidth(a,d)};
AdfDhtmlTableBasePeer.prototype._incrementWidth=function(a,b){AdfAssert.assertDomNode(a);var d=parseInt(a.style.width)+b;if(!isNaN(d))a.style.width=d+"px";if(AdfAgent.AGENT.getPlatform()==AdfAgent.WEBKIT_PLATFORM&&(a.tagName=="TH"||a.tagName=="TD")){var e=this._findColGroupColumn(a);if(e)d=parseInt(e.style.width)+b,e.style.width=d+"px"}return d};
AdfDhtmlTableBasePeer.prototype._findColGroupColumn=function(a){AdfAssert.assertDomNode(a);AdfAssert.assert(a.tagName=="TH"||a.tagName=="TD","Invalid COLGROUP tag name");for(var b=a.parentNode;b&&b.tagName!="TR";)b=b.parentNode;if(b){for(var d=b.cells,e=d.length,f=0;f<e;f++)if(d[f]==a)break;if(f<e){for(a=b.parentNode;a&&a.tagName!="TABLE";)a=a.parentNode;if(a&&(a=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"COLGROUP"))){a=a.childNodes;++f;for(b=0;b<a.length;b++)if(a[b].tagName=="COL"&&--f,f==
0)return a[b]}}}return null};AdfDhtmlTableBasePeer.SetCursor=function(a,b){if(a&&a.style.cursor!=b)a.style.cursor=b};
AdfDhtmlTableBasePeer.prototype._handleColumnContextMenu=function(a,b){if(this._pcPeer){var d=b?b:this._getParentTH(a);if(d&&d.getAttribute(AdfDhtmlTableBasePeer._LEAF_COLUMN)!=null){var e=AdfPage.PAGE.findComponent(d.id);!e.getSelected()&&this._isColumnSelectionEnabled()&&(this._selUnselectAll(),this._selectColumn(AdfAgent.AGENT.getIntAttribute(d,"_d_index",-1),e,!0));this._pcPeer.showColumnContextMenu(a,b)}}};
AdfDhtmlTableBasePeer.prototype._handleBodyContextMenu=function(a){var b=this.getComponent(),d=b.getBodyContextMenuId?b.getBodyContextMenuId():null;if(d){b.setSelectedRowKeys({});var e=b.findComponent(d);e==null&&(AdfPage.PAGE.findComponent(d),b=null);this.showContextMenu(a,d,b);AdfAgent.AGENT.eatEvent(a)}};AdfDhtmlTableBasePeer.prototype.GetRowContextMenuId=function(){return this.getComponent().getContextMenuId()};
AdfDhtmlTableBasePeer.prototype._getRowContextMenuAndContainer=function(a){var a=this.GetRowContextMenuId(a),b,d;if(a){var e=this.getComponent(),b=AdfPage.PAGE.findComponent(a),d=null;b==null&&(b=e.findComponent(a),d=e);b==null&&AdfLogger.LOGGER.severe("Could not find context menu ",a," from component ",e)}return{popup:b,menuId:a,menuFindContainer:d}};
AdfDhtmlTableBasePeer.prototype.HandleRowContextMenu=function(a,b,d,e,f){var g=this._getRowContextMenuAndContainer(b),h=g.popup,k=g.menuFindContainer,g=g.menuId;if(h){if(!this._contextMenuSelect||AdfAgent.AGENT.getCapabilities()[AdfAgent.CAP_TOUCH_SCREEN]!=AdfAgent.CAP_TOUCH_SCREEN_NONE)this._unhiglightAnyExistingHighlightedRow(),this._selHighlightRow(d),this._highlightedRowKey=b,this._highlightedRow=d;var d=this.getComponent(),l=d.getClientId();AdfObject.ensureClassInitialization(AdfDhtmlCommandMenuItemPeer);
h[AdfMenuUtils.AFR_TARGETROWCURRENCY]=b;h[AdfMenuUtils.AFR_TARGETCOMPONENTID]=l;d.setProperty("_highlightedRowKey",b,!1,AdfUIComponent.PROPAGATE_ALWAYS);if(!this._contextMenuClosedCallback)this._contextMenuClosedCallback=this.createCallback(this._contextMenuClosed);if(!this._contextMenuOpenedCallback)this._contextMenuOpenedCallback=this.createCallback(this._contextMenuOpened);if(!h._afrTableListenerSet)h.addEventListener(AdfPopupOpenedEvent.POPUP_OPENED_EVENT_TYPE,this._contextMenuOpenedCallback),
h.addEventListener(AdfPopupClosedEvent.POPUP_CLOSED_EVENT_TYPE,this._contextMenuClosedCallback),h._afrTableListenerSet=!0;if(h.isPopupVisible())h.hide(),this._ignoreContextMenuClose=!0;this.showContextMenu(a,g,k,e,f,l);AdfAgent.AGENT.eatEvent(a)}};AdfDhtmlTableBasePeer.prototype.ContextMenuOpened=function(){};AdfDhtmlTableBasePeer.prototype.ContextMenuClosed=function(){};
AdfDhtmlTableBasePeer.prototype._contextMenuOpened=function(a){this._rowContextMenuVisible=!0;var b=a.getSource();if(!this._contextMenuSelect){var d=this._getRowContextMenuAndContainer(this._highlightedRowKey).popup;d!=null&&b.getClientId()==d.getClientId()&&this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UNSELECT,!1)}this.ContextMenuOpened(a,b)};
AdfDhtmlTableBasePeer.prototype._contextMenuClosed=function(a){if(this._ignoreContextMenuClose)delete this._ignoreContextMenuClose;else{delete this._rowContextMenuVisible;var b=a.getSource();if(!this._contextMenuSelect){var d=this._getRowContextMenuAndContainer(this._highlightedRowKey).popup;d!=null&&b.getClientId()==d.getClientId()&&(this._grabFocus(),this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE,!1),this._unhiglightAnyExistingHighlightedRow())}delete b[AdfMenuUtils.AFR_TARGETROWCURRENCY];
delete b[AdfMenuUtils.AFR_TARGETCOMPONENTID];AdfPage.PAGE.scheduleTimer(null,AdfDhtmlTableBasePeer._clearHighlightedRowKey,this.getComponent(),10);this.ContextMenuClosed(a,b)}};AdfDhtmlTableBasePeer._clearHighlightedRowKey=function(a){a.setProperty("_highlightedRowKey",null,!1,AdfUIComponent.PROPAGATE_ALWAYS)};
AdfDhtmlTableBasePeer.prototype.ProcessPushData=function(a,b){if(this._virtInitialized)if(this._activeDataCount>=b)AdfPage.PAGE.addPartialTargets(this.getComponent());else{this._activeDataCount=b;for(var d=eval(a),e=0;e<d.length;e++){var f=d[e];this.IsFetchPending()?(f.id=b,this._getActiveMessageBuffer().push(f)):this._processActiveMessage(f)}d=this.GetDatabody();this._fillViewPort(d,d.offsetHeight,!1);return!0}};
AdfDhtmlTableBasePeer.prototype._processActiveMessage=function(a){var b=!1,d=a.type;switch(d){case "update":b=this.UpdateActiveRow(a);break;case "remove":b=this.RemoveActiveRow(a);break;case "insertBefore":case "insertAfter":case "insertInside":b=this.InsertActiveRow(a,d)}return b};AdfDhtmlTableBasePeer.prototype._getActiveMessageBuffer=function(){if(!this._activeMessageBuffer)this._activeMessageBuffer=[];return this._activeMessageBuffer};
AdfDhtmlTableBasePeer.prototype._resetActiveMessageBuffer=function(){this._activeMessageBuffer=null};AdfDhtmlTableBasePeer.prototype._applyBufferedADSEvents=function(a,b){if(a!=-1){var d=this._activeMessageBuffer;if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.id;(b?g<=a:g>a)&&this._processActiveMessage(f)}}};
AdfDhtmlTableBasePeer.prototype.IsInsertAllowed=function(a){var b=!0;if(this._pendingFetch==AdfTableDataFetchEvent.AFTER_KEY_SUBTYPE){var d=this.GetDatabody().childNodes,d=d[d.length-1];a==d.startRow+d.numRows&&(b=!1)}else if(this._pendingFetch==AdfTableDataFetchEvent.BEFORE_KEY_SUBTYPE){var d=this.GetDatabody().childNodes,e=d[0];a==e.startRow&&(b=!1)}else if(this._pendingFetch==void 0&&(d=this.GetDatabody().childNodes,e=d[0],d=d[d.length-1],a!=d.startRow+d.numRows&&(a<e.startRow||a>=d.startRow+d.numRows)))b=
!1;return b};
AdfDhtmlTableBasePeer.prototype.InsertActiveRow=function(a,b){var d=b=="insertBefore",e=!1,f=null;if(!this.IsEmpty)f=this.GetDatabody().childNodes;if(f&&f.length>0){var g=-1,h=a.iKey;if(d)if(h){if(d=this.FindRowByKey(h))g=d.index}else d=f[f.length-1],h=this.GetRowCount(),h!=-1&&d.startRow+d.numRows==h&&(g=h);else h?(d=this.FindRowByKey(h))&&(g=d.index+1):f[0].startRow==0&&(g=0);g!=-1&&this.IsInsertAllowed(g)&&(e=!0,h=f[0],f=h.cloneNode(!1),d=this.getDomDocument().createElement("TBODY"),AdfAssert.assert(h.rows!=
null&&h.rows[0]!=null,"Unable to insert active row when the block contains no rows to clone!"),h=h.rows[0].cloneNode(!0),AdfDomUtils.removeCSSClassName(h,AdfDhtmlTableBasePeer._SELECTED_CLASS),AdfDomUtils.removeCSSClassName(h,AdfDhtmlTableBasePeer._HIGHLIGHTED_CLASS),d.appendChild(h),f.appendChild(d),h.setAttribute(AdfDhtmlTableBasePeer._ROW_KEY,a.rKey),this._resetRow(h),this.UpdateActiveRow(a,h),this.InsertBlock(f,g,1,1,0))}else AdfPage.PAGE.addPartialTargets(this.getComponent());return e};
AdfDhtmlTableBasePeer.prototype.RemoveActiveRow=function(a){if(this.IsEmpty)return!1;var b=!1;if(a=this.FindRowByKey(a.rKey))this.DeleteBlock(a.index,1,1,0,null),b=!0;return b};AdfDhtmlTableBasePeer.prototype.UpdateActiveRow=function(a,b){if(this.IsEmpty)return!1;var d=!1;if(!b){var e=this.FindRowByKey(a.rKey);if(e)b=e.tr}if(b)for(var d=!0,e=a.data,f=0;f<e.length;f++){var g=e[f];this._applyActiveDataUpdate(b,g.cInd,g.prop,g.val)}return d};
AdfDhtmlTableBasePeer.prototype._resetRow=function(a){for(var b=0;b<this._colCount;b++){var d=this.FindCellByIndex(a,b);d.innerHTML="<span>&nbsp;</span>";this.RemoveTwinkleTimer(d)}};AdfDhtmlTableBasePeer.prototype.RemoveTwinkleTimer=function(a){a.removeAttribute(AdfDhtmlTableBasePeer._TWINKLE_TIMER_ID_ATTR)};AdfDhtmlTableBasePeer.prototype.IsNodeStampCell=function(){return!1};
AdfDhtmlTableBasePeer.prototype.GetActiveUpdateNode=function(a){var b;if(this.IsNodeStampCell(a)){var d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"DIV");AdfAssert.assertDomNode(d);d=AdfDhtmlTableBasePeer._findFirstLevelChildrenByTagName(d,"SPAN")[0];AdfAssert.assertDomNode(d);b=d.nextSibling}else b=a.firstChild;if(!b||b.nodeType!=1||b.tagName!="SPAN"||b.nextSibling){a=b?b.parentNode:a;AdfAssert.assert(a!=null,"Table peer cannot get an active update node if the parent is null!");for(d=this.getDomDocument().createElement("span");b;){var e=
b,b=b.nextSibling;a.removeChild(e);d.appendChild(e)}a.appendChild(d);b=d}AdfAssert.assertDomNode(b);return b};
AdfDhtmlTableBasePeer.prototype._applyActiveDataUpdate=function(a,b,d,e){var f=!1,g=this.FindCellByIndex(a,b);if(g){var h=AdfAgent.getAgent(),k=this.GetActiveUpdateNode(g),a=h.getAttribute(a,AdfDhtmlTableBasePeer._ROW_KEY);this._markAsActive(g,a,b);f=!0;switch(d){case "value":h.setTextContent(k,e);break;case "rawValue":k.innerHTML=e;break;case "styleClass":k.className=e;break;case "inlineStyle":k.style.cssText=e;break;default:f=!1}}return f};
AdfDhtmlTableBasePeer.prototype._markAsActive=function(a,b,d){if(a!=null){var e=AdfDhtmlTableBasePeer._TWINKLE_TIMER_ID_ATTR,f=a.getAttribute(e),g=AdfPage.PAGE;f!=null?g.rescheduleTimer(f,1E3):(AdfDomUtils.addCSSClassName(a,AdfDhtmlTableBasePeer._TWINKLE_ON_STYLE_CLASS),AdfDomUtils.removeCSSClassName(a,AdfDhtmlTableBasePeer._TWINKLE_OFF_STYLE_CLASS),f=g.scheduleTimer(this,this._cleanUpAdsNode,{rowKey:b,colIndex:d},1E3),a.setAttribute(e,f))}};
AdfDhtmlTableBasePeer.prototype._cleanUpAdsNode=function(a){if(this.getDomElement()){var b=a.colIndex;if(a=this.FindRowByKey(a.rowKey))if(b=this.FindCellByIndex(a.tr,b))b.removeAttribute(AdfDhtmlTableBasePeer._TWINKLE_TIMER_ID_ATTR),AdfDomUtils.removeCSSClassName(b,AdfDhtmlTableBasePeer._TWINKLE_ON_STYLE_CLASS),AdfDomUtils.addCSSClassName(b,AdfDhtmlTableBasePeer._TWINKLE_OFF_STYLE_CLASS)}};
AdfDhtmlTableBasePeer.prototype.FindRowByKey=function(a){for(var b=null,d=this.GetDatabody().childNodes,e=0;e<d.length&&!b;e++){var f=d[e],g=f.rows;if(g)for(var h=0;h<g.length&&!b;h++){var k=g[h];if(a==k.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY)){b={tr:k,index:f.startRow+h,block:f};break}}}return b};
AdfDhtmlTableBasePeer.prototype.FindCellByIndex=function(a,b){AdfAssert.assert(a!=null,"Unable to find cell by index if the given row is invalid!");var d=null;return d=this._lastFrozen<0||b<=this._lastFrozen?a.cells[b]:AdfDhtmlTableBasePeer._getNestedScrolledTable(a).rows[0].cells[b-this._lastFrozen-1]};
AdfDhtmlTableBasePeer.prototype._getColumnFlex=function(a,b,d,e,f){if(!a)return null;if(d=="multiple"){f=b;f==null&&(f=""+a.getWidth());a=f.length-1;if((""+f).charAt(a)!="%")return null;return Math.abs(parseInt(f.substring(0,a)))}else if(d=="last"){if(b=a.getDisplayIndex(),b==-1&&(b=f),b==e-1&&!a.getRowHeader()&&b>this._lastFrozen)return 1}else if(e=this._stretchedColumnId,e!=null&&(b=a.getClientId(),b.substring(1+b.lastIndexOf(":"))==e&&(b=a.getDisplayIndex(),b==-1&&(b=f),!a.getRowHeader()&&b>this._lastFrozen)))return 1;
return null};AdfDhtmlTableBasePeer.prototype._getColumnActualWidth=function(a,b){var d=100,e=!1,f,f=this.IsEmpty?this._getColumnHeaderFooterSizingCell(a,this.__getColumnHeader(),"t","d2","t2"):this.FindCellByIndex(b,a);try{if(d=parseInt(f.style.width),d>0)return d;else d=100,e=!0}catch(g){d=100,e=!0}e&&AdfLogger.LOGGER.warning("INVALID COLUMN WIDTH FOR COLUMN DISPLAY INDEX: "+a);return d};
AdfDhtmlTableBasePeer.prototype._stretchTheColumns=function(){var a=this._columnStretching;if(!(a==null||a=="none"))if(!(this._nothingFlexible||this.IsEmpty&&this._headerless)){this._stretchingTheColumns=!0;try{this._doColumnStretching(a)}finally{delete this._stretchingTheColumns}}};
AdfDhtmlTableBasePeer.prototype._doColumnStretching=function(a,b){for(var d,e,f,g,h,k=0,l=this.__getVisibleLeafColumns(),e=l.length,f=Array(e),g=Array(e),h=Array(e),m=!0,n=0;n<e;n++){var o=l[n],d=this._getColumnFlex(o,null,a,e,n);d!=null&&(m=!1,f[n]=d,d=""+o.getWidth(),d.lastIndexOf("%")==d.length-1&&(h[n]=d.substring(0,d.length-1),k+=Math.abs(parseInt(h[n]))),g[n]=isNaN(d)?o.getMinimumWidth():d)}if(m)this._nothingFlexible=!0;else{if(a=="multiple")for(x=0;x<h.length;x++)h[x]/=k;var d=this._lastFrozen,
m=this._colCount,n=this.GetDatabody(),k=n.childNodes[0],h=!1,p;this.IsEmpty||(p=k.rows[0],AdfAssert.assert(p!=null,"this.IsEmpty was "+this.IsEmpty+" but there were no rows!"));l=0;d==-1||d+1==m?(d=n.offsetWidth,k=this.IsEmpty?this.__getColumnHeader().firstChild.offsetWidth:k.offsetWidth,l=d-k):this.IsEmpty?(d=this.__getColumnHeader(),k=AdfDhtmlTableBasePeer.__getChildBySubId(d,"t"),l=AdfDhtmlTableBasePeer.__getChildBySubId(d,"d2"),l=AdfDhtmlTableBasePeer.__getChildBySubId(l,"t2"),d=d.parentNode.offsetWidth,
l=d-k.offsetWidth-l.offsetWidth-2):(k=AdfDhtmlTableBasePeer._getNestedScrolledTable(p),d=k.parentNode.offsetWidth,l=d-k.offsetWidth);if(l!=0){k=[];for(n=m=0;n<e;n++)d=f[n],d!=null&&(o=this._getColumnActualWidth(n,p),m+=o,k.push({displayIndex:n,flex:d,minimumWidth:g[n],width:o}));for(var p=m+l,e=k.length,s,d=!1,l=0;!d&&l<e;){m=p;for(f=n=0;f<e;f++)s=k[f],s.atMinimum?(g=s.minimumWidth,m-=g):n+=s.flex;for(var o=m,q=0,f=0;f<e;f++)if(s=k[f],!s.atMinimum){var t=s.flex/n*o,g=Math.floor(t);minimumWidth=s.minimumWidth;
g<minimumWidth?(g=minimumWidth,s.atMinimum=!0,l++):q+=t-g;s.calculatedWidth=g;m-=g}q=Math.round(q);m==q&&(q>0&&(s.calculatedWidth+=q),d=!0)}p=[];for(f=0;f<e;f++)s=k[f],d=s.displayIndex,g=s.calculatedWidth,p.push({displayIndex:d,width:g}),s=g-s.width,s!=0&&(h=!0,this._doResizeColumn(d,null,g,s,!1));this._currentColumnStretchDetails=p}h&&(b||(b=0),b<5&&this._doColumnStretching(a,++b))}};
AdfDhtmlTableBasePeer.prototype._stretchLastBlockColumn=function(a){var b;if(this._lastColWidthOverride!=-1){var d=this._colCount-1;AdfAssert.assert(a.rows!=null,"Unable to stretch the columns in the last fetched block because it contains no rows!");b=this.FindCellByIndex(a.rows[0],d);b=parseInt(b.style.width);this._resizeBlockColumn(a,d,this._lastColWidthOverride-b)}else if(this._currentColumnStretchDetails!=null){AdfAssert.assert(a.rows!=null,"Unable to stretch the columns in the last fetched block because it contains no rows!");
for(var d=this._currentColumnStretchDetails,e=d.length,f=0;f<e;f++){var g=d[f],h=g.displayIndex,b=this.FindCellByIndex(a.rows[0],h),b=parseInt(b.style.width);this._resizeBlockColumn(a,h,g.width-b)}}};
AdfDhtmlTableBasePeer.prototype._collectClientTokens=function(a){for(var b="",d=this.GetDatabody().childNodes,e=0;e<d.length;e++)for(var f=d[e].rows,g=0;g<f.length;g++){var h=f[g].getAttribute(AdfDhtmlTableBasePeer._ROW_KEY);if(a=="flat")b+=h,b+="_";else{var h=h.split(","),k=h.length;b+=h[k-1];b+="_";for(var l=0;l<k-1;l++){var m=h[l];b.match(RegExp("(^|_)"+m+"(_|$)"))||(b+=m,b+="_")}}}return b};AdfDhtmlTableBasePeer.prototype._grabFocus=function(){AdfFocusUtils.focusElement(this.getDomElement())};
AdfDhtmlTableBasePeer.prototype.HandleComponentFocus=function(a){if(this._virtInitialized){if(a.getNativeEventTarget!=void 0&&(a=a.getNativeEventTarget(),a!=this.getDomElement()&&this._isTargetCellEditable(a)&&(this._unclipInputElem(a),void 0!=a.value&&(a.nodeName=="TEXTAREA"||a.type=="text"||a.type=="select-one"))))a._afrOldValue=a.value;this._blurTimeout!=null&&(clearTimeout(this._blurTimeout),delete this._blurTimeout);if(this._focusTimeout==null){if(this._focusTimeoutCallback==null)this._focusTimeoutCallback=
this.createCallback(this._doFocusTimeout);this._focusTimeout=setTimeout(this._focusTimeoutCallback,10)}}};AdfDhtmlTableBasePeer.prototype.HandleComponentBlur=function(){if(this._blurTimeoutCallback==null)this._blurTimeoutCallback=this.createCallback(this._doBlurTimeout);this._blurTimeout=setTimeout(this._blurTimeoutCallback,10)};AdfDhtmlTableBasePeer.prototype.HandleHeaderlessFocus=function(){this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,null,null)};
AdfDhtmlTableBasePeer.prototype._doFocusTimeout=function(){if(this.getComponent()&&!this._rowContextMenuVisible){this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE,!1,null);var a=this._focusManager;a.domElement?this._updateFocusCellStyle(!0):a.objectType!=AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE&&(this._setFirstColumnHeaderFocus(!1,!0)||this.HandleHeaderlessFocus())}delete this._focusTimeout};
AdfDhtmlTableBasePeer.prototype._doBlurTimeout=function(){this.getComponent()&&!this._rowContextMenuVisible&&(this._selUpdateAll(AdfDhtmlTableBasePeer._SEL_UPDATE_ALL_UPDATE,!1,null),this.isInActiveHeirarchy()||this._focusManager.domElement&&this._updateFocusCellStyle(!1));delete this._blurTimeout};
AdfDhtmlTableBasePeer.prototype._handleKeyboardSort=function(a){var b=this._focusManager;if(b.objectType==AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE){var b=b.domElement.id,d=AdfAgent.AGENT.getElementById(AdfRichUIPeer.CreateSubId(b,AdfDhtmlTableBasePeer.__SORT_INDICATOR));if(d){var d=d.getAttribute(AdfDhtmlTableBasePeer._SORTED_TYPE),e=AdfPage.PAGE.findComponent(b).getSortProperty(),b=AdfDhtmlTableBasePeer.__getSortOrderForColumn(b);d!=a&&(b=a==AdfDhtmlTableBasePeer._SORTED_DESCENDING?!1:!0,
AdfTableUtils.queueSortEvent(this.getComponent(),e,b))}}};AdfDhtmlTableBasePeer.prototype.HandleComponentKeyUp=function(a){if(!a.isCanceled())a=AdfAgent.AGENT,a.enableUserSelect(a.getDomDocument().body)};
AdfDhtmlTableBasePeer.prototype.HandleComponentKeyDown=function(a){if(!a.isCanceled()&&this.__isOwnComponentEvent(a)){var b=a.getNativeEvent(),d=AdfAgent.AGENT,e=d.getEventTarget(b),f=b.keyCode,g=!1,h=this._virtInitialized;switch(f){default:g=!0;break;case AdfKeyStroke.ESC_KEY:if(this._reorderTH||this._resizedTH)g=!0;else if(!this._rowContextMenuVisible)if((f=this.GetFocusedRowKey())&&f==this._getActiveRowKey()&&this._isClickToEdit())if(this._cellNavMode){if(void 0!=e._afrOldValue&&e.value!=e._afrOldValue)AdfPage.PAGE.scheduleTimer(null,
AdfDhtmlTableBasePeer._restoreEditableValueOnEsc,e,0);else{if(this._lastCTEIndex==void 0&&(f=this.GetRowKeyAndRow(e,this.getDomElement()),f!=null&&f[0]!=null))this._lastCTEIndex=this._getCellAndIndexForNode(e,f[1]).cellIndex;this._setActiveRowKey(null);this._editableTableReadOnlyMode=!0;this._grabFocus()}d.eatEvent(b)}else{if(!this._isTargetCellEditable(e))this._cellNavMode=!0,d.eatEvent(b)}else this._isTargetCellEditable(e)||(this._selUnselectAll(),this._queueColumnSelectionEvent());break;case AdfKeyStroke.M_KEY:b.ctrlKey&&
b.altKey&&h?this._handleKeyboardContextMenu(b,!0):g=!0;break;case AdfKeyStroke.A_KEY:b.ctrlKey&&!b.altKey&&h?(this._grabFocus(),e=this._isMultipleRowSelect(),f=this._isMultipleRowSelectNoSelectAll(),e&&!f&&!this.getComponent().getSelectedRowKeys()[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]&&this._selSelectAll()):g=!0;break;case AdfKeyStroke.END_KEY:!(g=this._isTargetCellEditable(e))&&b.ctrlKey&&b.shiftKey&&h&&this._handleCtrlShiftEnd(b);break;case AdfKeyStroke.PAGEUP_KEY:(g=this._isTargetCellEditable(e))||
this._handlePageUp(b.altKey,b.ctrlKey,b.shiftKey);break;case AdfKeyStroke.PAGEDOWN_KEY:(g=this._isTargetCellEditable(e))||this._handlePageDown(b.altKey,b.ctrlKey,b.shiftKey);break;case AdfKeyStroke.SPACE_KEY:case 192:h=d.getOS()==AdfAgent.MAC_OS&&f==192&&b.ctrlKey;(g=this._isTargetCellEditable(e))||(h||f==AdfKeyStroke.SPACE_KEY)&&this._handleSpaceKey(f,b);break;case AdfKeyStroke.ENTER_KEY:if(!(g=e.tagName=="TEXTAREA"||e.tagName=="A"))g=this._handleEnterKey(e,b);break;case AdfKeyStroke.HOME_KEY:!(g=
this._isTargetCellEditable(e))&&b.ctrlKey&&h&&this._scrollerScrollToPos(null,0);break;case AdfKeyStroke.F2_KEY:this._handleF2Key(b);break;case AdfKeyStroke.TAB_KEY:g=this._isTargetCellEditable(e)?this._handleTabKey(e,b):!0}g||(a.stopBubbling(),d.eatEvent(b))}};
AdfDhtmlTableBasePeer.prototype._handleKeyboardContextMenu=function(a,b){var d=AdfAgent.AGENT,e=this._focusManager;if(e.objectType==AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE)this._handleColumnContextMenu(a,e.domElement);else if(d=d.getEventTarget(a),b||!this._isTargetCellEditable(d)){var d=this.ResolveContextMenuAlignElement(e.domElement),f=this.GetKeyboardContextMenuAlignHint();this.HandleRowContextMenu(a,e.currency,e.domElement,d,f)}};
AdfDhtmlTableBasePeer.prototype.GetKeyboardContextMenuAlignHint=function(){return null};AdfDhtmlTableBasePeer.prototype.ResolveContextMenuAlignElement=function(a){return a};
AdfDhtmlTableBasePeer.prototype._handleCtrlShiftEnd=function(){var a=this._focusManager,b=a.objectType,a=a.currency;if(b==AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE||b==AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE)if((b=this.GetDatabody())&&b.childNodes.length>0&&b.childNodes[0].rows[0].getAttribute(AdfDhtmlTableBasePeer._ROW_KEY)==a)this._grabFocus(),this.getComponent().getSelectedRowKeys()[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]||this._selSelectAll()};
AdfDhtmlTableBasePeer.prototype._handleF2Key=function(a){var b=AdfAgent.AGENT,a=b.getEventTarget(a);if(this._isClickToEdit()){var d=this.GetFocusedRowKey(),e=this._getActiveRowKey();if(!e||d&&e!=d){if(b=d?d:this._getFirstRowKey())if(this._setActiveRowKey(b),this._editableTableReadOnlyMode&&(b=this._lastCTEIndex,this._editableTableReadOnlyMode=!1,b!=void 0))this._clickEditRequest={cellIndex:b};this._cellNavMode=!0;return}}this._cellNavMode=!1;if(this._isTargetCellEditable(a)&&(d=this.GetRowKeyAndRow(a,
this.getDomElement()),d!=null))a=this._getCellAndIndexForNode(a,d[1]).cell,this._setInputElementCursorAtEndInNode(b,a)};AdfDhtmlTableBasePeer._restoreSelectedItemOnArrowNav=function(a){a.elem.selectedIndex=a.index};
AdfDhtmlTableBasePeer.prototype._handleArrowKeyNavLeftRight=function(a,b,d,e){var f=null,g=AdfAgent.AGENT;if(a==AdfKeyStroke.ARROWRIGHT_KEY){a=this.__getVisibleLeafColumns().length;for(e+=1;e<a;){f=this.FindCellByIndex(b,e);f=this._setFocusOnEditableElementInNode(g,f);if(f!=null){this._dismissTargetPopupsOnArrowNav(d);break}e++}}else for(e-=1;e>=0;){f=this.FindCellByIndex(b,e);f=this._setFocusOnEditableElementInNode(g,f);if(f!=null){this._dismissTargetPopupsOnArrowNav(d);break}e--}f!=null&&g.getPlatform()==
AdfAgent.GECKO_PLATFORM&&f.nodeName=="SELECT"&&f.type=="select-one"&&AdfPage.PAGE.scheduleTimer(null,AdfDhtmlTableBasePeer._restoreSelectedItemOnArrowNav,{index:f.selectedIndex,elem:f},0)};
AdfDhtmlTableBasePeer.prototype._handleArrowKeyNav=function(a,b){var d=this.GetRowKeyAndRow(b,this.getDomElement());if(d!=null){var e=d[0];if(e!=null){var d=d[1],f=this._getCellAndIndexForNode(b,d).cellIndex;this._ctePatternStart=void 0;a==AdfKeyStroke.ARROWUP_KEY||a==AdfKeyStroke.ARROWDOWN_KEY?this._isClickToEdit()?this._clickToEditActivateRow(e,a==AdfKeyStroke.ARROWDOWN_KEY,f):this._setFocusOnEditableRowCell(e,a==AdfKeyStroke.ARROWDOWN_KEY,f):this._handleArrowKeyNavLeftRight(a,d,b,f)}return!1}else return!0};
AdfDhtmlTableBasePeer.prototype._dismissTargetPopupsOnArrowNav=function(a){a=AdfRichUIPeer.getFirstAncestorComponent(a);a!=this.getComponent()&&a.getPeer().cancelAllPopups(a)};
AdfDhtmlTableBasePeer.prototype._handleArrow=function(a,b){switch(this._focusManager.objectType){case AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE:this._handleRowHeaderArrow(a,b);break;case AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE:this._handleColumnHeaderArrow(a,b);break;case AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE:a==AdfKeyStroke.ARROWUP_KEY||a==AdfKeyStroke.ARROWDOWN_KEY?this._handleTableBodyArrowUpDown(a==AdfKeyStroke.ARROWUP_KEY,b.ctrlKey,b.shiftKey):(a==AdfKeyStroke.ARROWLEFT_KEY||
a==AdfKeyStroke.ARROWRIGHT_KEY)&&this.HandleTableBodyArrowLeftRight(a==AdfKeyStroke.ARROWLEFT_KEY,b.ctrlKey,b.shiftKey);break;case AdfDhtmlTableBasePeer._SELECT_ALL_FOCUS_TYPE:this._handleSelectAllArrow(a,b)}};
AdfDhtmlTableBasePeer.prototype._handleRowHeaderArrow=function(a){if(a==AdfKeyStroke.ARROWDOWN_KEY||a==AdfKeyStroke.ARROWUP_KEY){var b=a==AdfKeyStroke.ARROWUP_KEY,d=this._focusManager,a=d.currency;delete this._lastRowKeyInView;d=b?this._getPreviousRowKeyAndRow(a):this._getNextRowKeyAndRow(a);if(d.isAtTop)this._setFirstColumnHeaderFocus(!0);else{var e=d.lastRowKeyInView,a=d.rowKey;if(a!=null)d=d.row,b=this.GetRowHeaderCellFromRow(d),this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,
a,b),this._unclipRow(d);else if(e!=null){if(this.GetScroller(),a=this._currentScrollTop+(b?-this._averageRowHeight:this._averageRowHeight),a>0&&a<this._getScrollHeight())this._lastRowKeyInView=e,this._selectionRequest=b?AdfDhtmlTableBasePeer._FOCUS_RH_ARROW_UP:AdfDhtmlTableBasePeer._FOCUS_RH_ARROW_DOWN,this._scrollerScrollToPos(null,a)}else d=b?this._getLastVisibleRowKeyAndRow():this.GetFirstVisibleRowKeyAndRow(),d.rowKey!=null&&(b=this.GetRowHeaderCellFromRow(d.row),this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,
d.rowKey,b),this._unclipRow(d.row))}}else if(a==AdfKeyStroke.ARROWRIGHT_KEY&&this._focusManager.currency!=null&&this._isRowSelectionEnabled())d=this._focusManager,a=d.currency,d=d.domElement.parentNode,this._selUnselectAll(),this._selSelectRow(a,d),this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,a,d)};
AdfDhtmlTableBasePeer.prototype._handleColumnHeaderArrow=function(a,b){var d=b.ctrlKey,e=b.shiftKey,f=this._virtInitialized;switch(a){case AdfKeyStroke.ARROWRIGHT_KEY:if(f=this._getNextColumnHeaderFocusElement())this._unclipColumnElement(f),!this.getComponent().getDisableColumnReordering()&&d&&e?this._reorderColumnThroughKeyboard(!1):(this.UpdateFocusManager(AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,f),e&&this._isMultipleColumnSelect()&&this._shiftSelectColumnsThroughKeyboard(f));break;
case AdfKeyStroke.ARROWLEFT_KEY:if(f=this._getPrevColumnHeaderFocusElement())this._unclipColumnElement(f),!this.getComponent().getDisableColumnReordering()&&d&&e?this._reorderColumnThroughKeyboard(!0):f.getAttribute(AdfDhtmlTableBasePeer._SELECT_ALL)!=null?this.UpdateFocusManager(AdfDhtmlTableBasePeer._SELECT_ALL_FOCUS_TYPE,null,f):(this.UpdateFocusManager(AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,f),e&&this._isMultipleColumnSelect()&&this._shiftSelectColumnsThroughKeyboard(f));break;case AdfKeyStroke.ARROWUP_KEY:case AdfKeyStroke.ARROWDOWN_KEY:var g=
this._focusManager.domElement;if(g)if(d&&e)f&&this._handleKeyboardSort(AdfKeyStroke.ARROWUP_KEY==a?AdfDhtmlTableBasePeer._SORTED_ASCENDING:AdfDhtmlTableBasePeer._SORTED_DESCENDING);else if(g.colSpan>1){if(f=AdfKeyStroke.ARROWUP_KEY==a?this._resolveImmediateParentColumn(g):this._resolveImmediateChildColumn(g))this._unclipColumnElement(f),this.UpdateFocusManager(AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,f)}else if(AdfKeyStroke.ARROWDOWN_KEY==a&&this._isRowSelectionEnabled()&&(attrs=this.GetFirstVisibleRowKeyAndRow(),
rowKey=attrs.rowKey,rowKey!=null))d=attrs.row,this._selSelectRow(rowKey,d),this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,rowKey,d),this._unclipRow(d)}};AdfDhtmlTableBasePeer.prototype._shiftSelectColumnsThroughKeyboard=function(a){if(this._anchorColumnHeader){var b=[],d=[],e=[],f=[];this._resolveColumns(b,d,this._anchorColumnHeader);this._resolveColumns(e,f,a);this._selUnselectAll();this._selectColumnRange(b,d,e,f)}};
AdfDhtmlTableBasePeer.prototype._reorderColumnThroughKeyboard=function(a){var b=this._focusManager.domElement;if(b&&b.getAttribute(AdfDhtmlTableBasePeer._ROOT_COLUMN)!=null){var d=null;if(a){d=this._getSiblingDomNode(b,!1);if(d==null){var e=AdfAgent.AGENT.getIntAttribute(b,"_d_index",-1);if(e>this._lastFrozen&&this._lastFrozen>=0){var e=AdfDhtmlTableBasePeer.__getChildBySubId(this.__getColumnHeader(),"t"),f=this._isFilterable()?2:1;if(e&&e.rows&&e.rows[f].cells.length>0)d=e.rows[f].cells,d=d[d.length-
1]}}d.getAttribute(AdfDhtmlTableBasePeer._ROW_HEADER)!=null&&(d=null)}else d=this._getSiblingDomNode(b,!0),d==null&&(e=AdfAgent.AGENT.getIntAttribute(b,"_d_index",-1),e<=this._lastFrozen&&(e=AdfDhtmlTableBasePeer.__getChildBySubId(this.__getColumnHeader(),"d2"),e=AdfDhtmlTableBasePeer.__getChildBySubId(e,"t2"),f=this._isFilterable()?2:1,e&&e.rows&&e.rows[f].cells.length>0&&(d=e.rows[f].cells[0])));if(d)this._reorderTH=b,this._targetReorderTH=d,this._insertColumnAfter=a?AdfDhtmlTableBasePeer._isRTL()?
!0:!1:AdfDhtmlTableBasePeer._isRTL()?!1:!0,this._reorderId=this._reorderTH.id,this._reorderColumnComponentsWithoutAnimation(),this._reorderTH=this._targetReorderTH=null,delete this._insertColumnAfter}};
AdfDhtmlTableBasePeer.prototype._getNextColumnHeaderFocusElement=function(){var a=AdfAgent.AGENT,b=this._focusManager.domElement;if(b){if(b.colSpan>1)return this._resolveImmediateChildColumn(b);for(var d=this._getSiblingDomNode(b,!0),e=this._resolveImmediateParentColumn(b),f=e;!d&&f;)f=(d=this._getSiblingDomNode(e,!0))!=null?this._resolveImmediateParentColumn(d):null;if(d){if((d?this._resolveImmediateParentColumn(d):null)!=e)if(e=this._resolveImmediateParentColumn(d))return e;return d}a=a.getIntAttribute(b,
"_d_index",-1);if(this._lastFrozen>=0&&a<=this._lastFrozen&&(a=this.__getColumnHeader(),a=AdfDhtmlTableBasePeer.__getChildBySubId(a,"d2"),a=AdfDhtmlTableBasePeer.__getChildBySubId(a,"t2"),b=this._isFilterable()?2:1,a&&a.rows&&a.rows[b].cells.length>0))return a.rows[b].cells[0];if(this._lastFrozen>=0&&!this.IsEmpty&&(a=this.GetDatabody())&&a.childNodes.length>0)b=a.childNodes[0].rows[0],a=this.GetRowHeaderCellFromRow(b),b=b.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY),this._scrollerScrollToPos(0,null),
this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,b,a)}return null};
AdfDhtmlTableBasePeer.prototype._getPrevColumnHeaderFocusElement=function(){var a=AdfAgent.AGENT,b=this._focusManager.domElement;if(b){for(var d=this._getSiblingDomNode(b,!1),e=this._resolveImmediateParentColumn(b),f=d?this._resolveImmediateParentColumn(d):null,g=e;!d&&g;)g=(d=this._getSiblingDomNode(e,!1))!=null?this._resolveImmediateParentColumn(d):null;if(e!=null&&e!=f)return e;else if(d!=null)return this._resolveBotttomMostChildColumn(d);a=a.getIntAttribute(b,"_d_index",-1);if(this._lastFrozen>=
0&&a>this._lastFrozen){if(a=this.__getColumnHeader(),(a=AdfDhtmlTableBasePeer.__getChildBySubId(a,"t"))&&a.rows)if(b=this._isFilterable()?2:1,a=a.rows[b].cells,b=a.length,b>0)return this._resolveBotttomMostChildColumn(a[b-1])}else this._lastFrozen>=0&&this._setFirstColumnHeaderFocus(!0)}return null};AdfDhtmlTableBasePeer.prototype._getSiblingDomNode=function(a,b){for(var d=b?a.nextSibling:a.previousSibling;d&&d.nodeType!=1;)d=b?d.nextSibling:d.previousSibling;return d};
AdfDhtmlTableBasePeer.prototype._resolveBotttomMostChildColumn=function(a){var b=a;if(a.colSpan>1){var d=a;AdfAssert.assert(d!=null,"Table peer cannot resolve the bottom-most child column if the parent is null!");b=this._resolveImmediateChildColumn(a);for(a=b=this._resolveRightMostSiblingInGroup(d,b);a!=null;)if(d=a,(a=this._resolveImmediateChildColumn(a))!=null)b=a=this._resolveRightMostSiblingInGroup(d,a)}return b};
AdfDhtmlTableBasePeer.prototype._resolveRightMostSiblingInGroup=function(a,b){AdfAssert.assert(a!=null,"Table peer cannot resolve the right-most sibling in a group if the parent is null!");if(a.colSpan>1)for(var d=b,e=a.colSpan;d&&e>d.colSpan;)if(e-=d.colSpan,(d=this._getSiblingDomNode(d,!0))!=null)b=d;return b};
AdfDhtmlTableBasePeer.prototype.__getParentColumn=function(a){AdfAssert.assertPrototype(a,AdfRichColumn);if(!this._headerless&&(a=this._resolveImmediateParentColumn(a.getPeer().getDomElement())))return AdfPage.PAGE.findComponent(a.id);return null};
AdfDhtmlTableBasePeer.prototype._resolveImmediateParentColumn=function(a){for(var b=a.parentNode,d,e=null,f=b.parentNode.parentNode.rows,g=f.length,h=AdfAgent.AGENT,a=h.getIntAttribute(a,"_d_index",-1),k=0;k<g;k++)if(f[k]==b){d=k-1;break}if(d>=0){k=d;for(b=!1;k>=0&&!b;k--){d=f[k].cells;for(g=d.length-1;g>=0;g--){var l=d[g],m=h.getIntAttribute(l,"_d_index",-1);if(l.colSpan>=1&&m<=a&&m+l.colSpan>=a){e=l;b=!0;break}}}}return e};
AdfDhtmlTableBasePeer.prototype._resolveImmediateChildColumn=function(a){for(var b=AdfAgent.AGENT,d=b.getIntAttribute(a,"_d_index",-1),e=a.parentNode,f,a=null,g=e.parentNode.parentNode.rows,h=g.length,k=h-1;k>=0;k--)if(g[k]==e){f=k+1;break}if(f<h){k=f;for(f=!1;k<h&&!f;k++)for(var e=g[k].cells,l=e.length,m=0;m<l;m++){var n=e[m];if(d==b.getIntAttribute(n,"_d_index",-1)){a=n;f=!0;break}}}return a};
AdfDhtmlTableBasePeer.prototype._unclipColumnElement=function(a){if(this.IsEmpty){var b=this.getDomElement(),d=0;if(this._lastFrozen>=0)d=AdfDhtmlTableBasePeer.__getChildBySubId(this.__getColumnHeader(),"t").offsetWidth;if(a.offsetLeft+a.offsetWidth+d>b.clientWidth+b.offsetLeft)b.scrollLeft=a.offsetWidth+a.offsetLeft+d-b.clientWidth;if(b.offsetLeft>a.offsetLeft+d)b.scrollLeft=a.offsetLeft+d}else b=this.GetDatabody(),a.offsetLeft+a.offsetWidth>b.clientWidth+this.__getScrollLeft()-this._frozenWidth?
this._scrollerScrollToPos(a.offsetWidth+a.offsetLeft-b.clientWidth+this._frozenWidth,null):this.__getScrollLeft()>a.offsetLeft&&this._scrollerScrollToPos(a.offsetLeft,null)};
AdfDhtmlTableBasePeer.prototype._handleSelectAllArrow=function(a){switch(a){case AdfKeyStroke.ARROWDOWN_KEY:a=this.GetDatabody().childNodes;if(a.length>0&&(a=a[0].rows[0])){var b=a.getAttribute(AdfDhtmlTableBasePeer._ROW_KEY),d=this.GetRowHeaderCellFromRow(a);this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,b,d);this._unclipRow(a)}break;case AdfKeyStroke.ARROWRIGHT_KEY:b=this.__getColumnHeader(),d=AdfDhtmlTableBasePeer.__getChildBySubId(b,"t"),AdfAssert.assertDomNode(d),a=this._isFilterable()?
2:1,d.rows&&d.rows[a].cells.length>1?this.UpdateFocusManager(AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,d.rows[a].cells[1]):(b=AdfDhtmlTableBasePeer.__getChildBySubId(b,"d2"),d=AdfDhtmlTableBasePeer.__getChildBySubId(b,"t2"),d.rows&&d.rows[a].cells.length>1&&this.UpdateFocusManager(AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,d.rows[a].cells[0]))}};
AdfDhtmlTableBasePeer.prototype._setFirstColumnHeaderFocus=function(a,b){var d=!1;if(this._headerless)return!1;var e=this._selectAllElement;if(e==null){var f=this.__getColumnHeader();if(f==null)return!1;var f=AdfDhtmlTableBasePeer.__getChildBySubId(f,"t"),g=this._isFilterable()?2:1,f=f.rows[g].cells[0];f.getAttribute(AdfDhtmlTableBasePeer._SELECT_ALL)!=null?e=this._selectAllElement=f:a||(this.UpdateFocusManager(AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE,null,f),b||this._unclipColumnElement(f),
d=!0)}e&&(this.UpdateFocusManager(AdfDhtmlTableBasePeer._SELECT_ALL_FOCUS_TYPE,null,e),d=!0);return d};
AdfDhtmlTableBasePeer.prototype._handleTableBodyArrowUpDown=function(a,b,d){var e=this._isRowSelectionEnabled(),f=this._supportsFocusRowNavigation,g=this._currentScrollTop+(a?-this._averageRowHeight:this._averageRowHeight);if(!e&&!f)g>=0&&g<this._getScrollHeight()&&this._scrollerScrollToPos(null,g);else{var h=this.GetLastRowKey();delete this._lastRowKeyInView;var k=a?this._getPreviousRowKeyAndRow(h):this._getNextRowKeyAndRow(h);if(k.isAtTop)this._setFirstColumnHeaderFocus(!1);else{var h=this._isMultipleRowSelect(),
l=k.lastRowKeyInView,m=k.rowKey;if(m!=null){g=k.row;if(e)if(d&&h)this._selIsSelected(m)?this._selUnselectRow(m,g):this._selSelectRow(m,g);else if(!b||!h||!f)this._selUnselectAll(),this._selSelectRow(m,g);this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,m,g);this._unclipRow(g);delete this._selectionRequest}else if(l!=null){if(g>0&&g<this._getScrollHeight()){this._lastRowKeyInView=l;this._selectionRequest=b&&h&&f||!e&&f?a?AdfDhtmlTableBasePeer._FOCUS_ROW_ARROW_UP:AdfDhtmlTableBasePeer._FOCUS_ROW_ARROW_DOWN:
a?AdfDhtmlTableBasePeer._SELECT_ARROW_UP:AdfDhtmlTableBasePeer._SELECT_ARROW_DOWN;if(!d&&!b||!h){b=!1;if(!a&&(a=this.GetRowCount(),a>=0))b=this.GetDatabody().childNodes,b=b[b.length-1],b=b.startRow+b.numRows==a;b||this._selUnselectAll()}this._scrollerScrollToPos(null,g)}}else if(k=a?this._getLastVisibleRowKeyAndRow():this.GetFirstVisibleRowKeyAndRow(),m=k.rowKey,m!=null)g=k.row,e&&this._selSelectRow(m,g),this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,m,g),this._unclipRow(g)}}};
AdfDhtmlTableBasePeer.prototype.HandleTableBodyArrowLeftRight=function(a,b){var d=this.__getScrollLeft()+(a?-20:20);if(b)d=Math.max(0,d),d<this._getScrollWidth()&&this._scrollerScrollToPos(d,null);else if(a&&(d=this._focusManager.currency)){var e=this.FindRowByKey(d);e&&(e=this.GetRowHeaderCellFromRow(e.tr))&&this.UpdateFocusManager(AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE,d,e)}this._hasDetailStamp&&!b&&(d=this.GetFocusedRowKey(),d!=null&&this.getComponent().setDisclosedRowKey(d,!a))};
AdfDhtmlTableBasePeer.prototype._hScrollPage=function(a){var b=this.IsEmpty?this.getDomElement():this._footerless&&!this._isPaged?this.GetScroller():this.GetScroller()[AdfDhtmlTableBasePeer._HSCROLLER];if(b&&b.scrollWidth>b.offsetWidth){var d=b.scrollLeft-(a?-1:1)*(b.clientWidth-b.clientWidth/10),d=a?Math.max(d,0):Math.min(d,b.scrollWidth);AdfAgent.AGENT.scrollToPos(b,d)}};
AdfDhtmlTableBasePeer.prototype._handlePageUp=function(a,b){if(a)this._hScrollPage(!0);else if(this._virtInitialized){var d=this.GetDatabody(),e=this._currentScrollTop-d.offsetHeight,f=e>0-d.offsetHeight,e=e<0?0:e,g=this.getComponent().getSelectedRowKeys(),h=!1,k;for(k in g){h=!0;break}if(!h||b)f&&this._scrollerScrollToPos(null,e);else if(h=this.GetFirstVisibleRowKeyAndRow(),(e=h.rowKey)!=null)h=h.row,g=g[e]!=null&&g[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]==null,this._selUnselectAll(),f&&g?
(this._selectionRequest=AdfDhtmlTableBasePeer._SELECT_PAGE_UP,e=h.offsetTop+h.parentNode.parentNode.startPos-d.offsetHeight,this._scrollerScrollToPos(null,e)):(this._selSelectRow(e,h),this._unclipRow(h))}};
AdfDhtmlTableBasePeer.prototype._handlePageDown=function(a,b){if(a)this._hScrollPage(!1);else if(this._virtInitialized){var d=this.GetDatabody(),e=this.getComponent().getSelectedRowKeys(),f=!1,g;for(g in e){f=!0;break}if(!f||b)e=this._currentScrollTop+d.offsetHeight,e<this._getScrollHeight()&&this._scrollerScrollToPos(null,e);else if(f=this._getLastVisibleRowKeyAndRow(),(d=f.rowKey)!=null)f=f.row,e=e[d]!=null&&e[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]==null,this._selUnselectAll(),e?(this._selectionRequest=
AdfDhtmlTableBasePeer._SELECT_PAGE_DOWN,this._scrollerScrollToPos(null,this._currentScrollTop+(f.offsetTop+f.offsetHeight-(this._currentScrollTop-f.parentNode.parentNode.startPos)))):(this._selSelectRow(d,f),this._unclipRow(f))}};
AdfDhtmlTableBasePeer.prototype._getLastVisibleRowKeyAndRow=function(){for(var a=AdfAgent.AGENT,b=this.GetDatabody(),d=b.childNodes,e={},f=d.length-1;f>=0&&!e.rowKey;--f)for(var g=d[f].startPos,h=d[f].rows,k=h.length-1;k>=0;--k){var l=h[k];if(l.offsetTop-(this._currentScrollTop-g)+AdfDhtmlTableBasePeer._MAXIMUM_ROW_REVEAL<b.offsetHeight){g=a.getAttribute(l,AdfDhtmlTableBasePeer._ROW_KEY);e.rowKey=g;e.row=l;break}}return e};
AdfDhtmlTableBasePeer.prototype.GetFirstVisibleRowKeyAndRow=function(a){var b=this._cachedFirstVisibleRowKeyAndRow;if(b)return b;for(var d=AdfAgent.AGENT,e=this.GetDatabody().childNodes,f=e.length,b={},a=a==void 0?AdfDhtmlTableBasePeer._MAXIMUM_ROW_REVEAL:a,g=0;g<f&&!b.rowKey;++g){var h=e[g],k=h.startPos,l=h.rows,m=0;if(l!=null)m=l.length;for(var n=0;n<m;++n)if(h=l[n],h.offsetTop+h.offsetHeight+k-a>this._currentScrollTop){k=d.getAttribute(h,AdfDhtmlTableBasePeer._ROW_KEY);b.rowKey=k;b.row=h;break}}return this._cachedFirstVisibleRowKeyAndRow=
b};
AdfDhtmlTableBasePeer.prototype._getNextRowKeyAndRow=function(a){for(var b=AdfAgent.AGENT,d=this.GetDatabody().childNodes,e=d.length,f={},g=0;g<e&&!f.rowKey;++g)for(var h=d[g].rows,k=h.length,l=0;l<k;++l){var m=h[l],n=b.getAttribute(m,AdfDhtmlTableBasePeer._ROW_KEY);if(a==null){f.rowKey=n;f.row=m;break}else if(n==a){f.lastRowKeyInView=n;if(l+1<k){m=h[l+1];if(this._hasDetailStamp&&AdfAgent.AGENT.getAttribute(m,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1))if(l+2<k)m=h[l+2];else if(g+1<e&&d[g+1].rows.length>0)m=
d[g+1].rows[0];else return f;n=b.getAttribute(m,AdfDhtmlTableBasePeer._ROW_KEY);f.rowKey=n;f.row=m}else if(g+1<e&&(h=d[g+1].rows,h.length>0))m=h[0],n=b.getAttribute(m,AdfDhtmlTableBasePeer._ROW_KEY),f.rowKey=n,f.row=m;break}}return f};
AdfDhtmlTableBasePeer.prototype._getPreviousRowKeyAndRow=function(a){for(var b=AdfAgent.AGENT,d=this.GetDatabody().childNodes,e={},f=d.length-1;f>=0&&!e.rowKey;--f)for(var g=d[f],h=d[f].rows,k=h.length-1;k>=0;--k){var l=h[k],m=b.getAttribute(l,AdfDhtmlTableBasePeer._ROW_KEY);if(a==null){e.rowKey=m;e.row=l;break}else if(m==a){e.lastRowKeyInView=m;if(k-1>=0){l=h[k-1];if(this._hasDetailStamp&&AdfAgent.AGENT.getAttribute(l,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1))if(k-2>=0)l=h[k-2];else if(f-1>=0&&
d[f-1].rows.length>0)l=d[f-1].rows[d[f-1].rows.length-1];else return e;m=b.getAttribute(l,AdfDhtmlTableBasePeer._ROW_KEY);e.rowKey=m;e.row=l}else if(f-1>=0){if(h=d[f-1].rows,h.length>0)l=h[h.length-1],m=b.getAttribute(l,AdfDhtmlTableBasePeer._ROW_KEY),e.rowKey=m,e.row=l}else if(b.getIntAttribute(g,"_startRow",-1)==0)e.isAtTop=!0;break}}return e};
AdfDhtmlTableBasePeer.prototype._handleSpaceKey=function(a,b){var d=this._focusManager;switch(d.objectType){case AdfDhtmlTableBasePeer._SELECT_ALL_FOCUS_TYPE:this._grabFocus();this.getComponent().getSelectedRowKeys()[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]||this._selSelectAll();break;case AdfDhtmlTableBasePeer._ROW_HEADER_FOCUS_TYPE:var e=this.GetRowKeyAndRow(d.domElement,this.getDomElement());e!=null&&(this._grabFocus(),this._doRowSelection(b,e[0],e[1]));break;case AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE:if(this._isColumnSelectionEnabled()){var e=
[],f=[];this._anchorColumnHeader=d=d.domElement;this._resolveColumns(e,f,d);this._doColumnSelections(b,e,f)}break;case AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE:if(this._supportsFocusRowNavigation)e=this._focusManager.currency,e!=null&&(this._selIsSelected(e)?b.ctrlKey&&this._selUnselectRow(e,this._focusManager.domElement):this._selSelectRow(e,this._focusManager.domElement))}};
AdfDhtmlTableBasePeer.prototype._handleEnterKey=function(a,b){var d=AdfAgent.AGENT,e=this._focusManager;if(this._isTargetCellFilter(a))d.getPlatform()==AdfAgent.GECKO_PLATFORM&&this._currentScrollLeft>0&&AdfFocusUtils.focusElement(this.getDomElement()),this._handleFilterCellAction();else if(this._isTargetCellEditable(a)){if(e=this.GetRowKeyAndRow(a,this.getDomElement()),e!=null&&(d=e[0],d!=null))e=this._getCellAndIndexForNode(a,e[1]),e=this._ctePatternStart!=void 0&&!b.shiftKey?this._ctePatternStart:
e.cellIndex,this._cellNavMode=!0,this._isClickToEdit()?this._clickToEditActivateRow(d,!b.shiftKey,e):this._setFocusOnEditableRowCell(d,!b.shiftKey,e)}else if(this._focusManager.objectType==AdfDhtmlTableBasePeer._COLUMN_HEADER_FOCUS_TYPE){if((e=e.domElement)&&d.getElementById(AdfRichUIPeer.CreateSubId(e.id,AdfDhtmlTableBasePeer.__SORT_INDICATOR))!=null)d=AdfPage.PAGE.findComponent(e.id).getSortProperty(),e=AdfDhtmlTableBasePeer.__getSortOrderForColumn(e.id),AdfTableUtils.queueSortEvent(this.getComponent(),
d,e==null?!0:!e)}else if(this._isClickToEdit()&&this.GetFocusedRowKey()!=null)if(this._editableTableReadOnlyMode){if(this._setActiveRowKey(this.GetFocusedRowKey()),this._editableTableReadOnlyMode=!1,e=this._lastCTEIndex,e!=void 0)this._clickEditRequest={cellIndex:e}}else this._clickToEditActivateRow(this.GetFocusedRowKey(),!b.shiftKey,this._lastCTEIndex);else return!0};
AdfDhtmlTableBasePeer.prototype._setFocusOnEditableRowCell=function(a,b,d){var e=b?this._getNextRowKeyAndRow(a):this._getPreviousRowKeyAndRow(a),a=e.rowKey;if(a!=null){var b=AdfAgent.AGENT,e=e.row,d=this.FindCellByIndex(e,d),f=!0;this._setFocusOnEditableElementInNode(b,d)==null&&this._setFocusOnEditableElementInNode(b,e)==null&&(f=!1);f&&this._isRowSelectionEnabled()&&!this._selIsSelected(a)&&(this._selUnselectAll(),this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,a,e),this._selSelectRow(a,
e))}};AdfDhtmlTableBasePeer.prototype._indexOfDomElement=function(a,b){for(var d=a.length,e=0;e<d;e++)if(a[e]==b)return e;return-1};
AdfDhtmlTableBasePeer.prototype._getFirstInputElementInNode=function(a,b){var d=a.getDomDocument(),e=null;if(d.evaluate)for(var d=d.evaluate('.//input[not(@type="hidden")]|.//select|.//textarea|.//button|.//a|.//*[@tabindex>=0]',b,null,XPathResult.ANY_TYPE,null),f=d.iterateNext();f;){if(!f.disabled&&f.tabIndex!=-1&&(f.nodeName!="A"||f.href)){e=f;break}f=d.iterateNext()}else for(var d=b.getElementsByTagName("*"),g=d.length,h=AdfDhtmlTableBasePeer._INPUT_REGEXP,k=0;k<g;k++){var f=d[k],l=f.getAttribute("tabIndex",
2);if(l!=null&&l>=0&&l!=32768&&l!=65535||f.tagName.match(h))if(!f.disabled&&l!=-1&&(f.nodeName!="A"||f.href)){e=f;break}}return e};AdfDhtmlTableBasePeer.prototype._setFocusOnEditableElementInNode=function(a,b){var d=this._getFirstInputElementInNode(a,b);if(d){var e=d.nodeName=="INPUT";if(a.getPlatform()!=AdfAgent.GECKO_PLATFORM||!(e&&d.type=="file")){var f=AdfPage.PAGE.getActiveDomElement();f&&f.blur&&f.blur();AdfFocusUtils.focusElement(d);e&&typeof d.select!=void 0&&d.select();return d}}return null};
AdfDhtmlTableBasePeer.prototype._setInputElementCursorAtEndInNode=function(a,b){var d=this._getFirstInputElementInNode(a,b);if(d&&(d.nodeName=="INPUT"&&d.type=="text"||d.nodeName=="TEXTAREA")){var e=d.value.length;d.selectionStart!=null?(d.setSelectionRange(e,e),d.blur(),d.focus(),e=d.ownerDocument.createEvent("KeyboardEvent"),e.initKeyEvent!=void 0?e.initKeyEvent("keypress",!0,!0,null,!1,!1,!1,!1,27,0):e.initUIEvent("keypress",!0,!0,window,1),d.dispatchEvent(e)):(e=d.createTextRange(),e.collapse(!1),
e.select());return d}return null};AdfDhtmlTableBasePeer.prototype._unclipRow=function(a){AdfAssert.assert(a!=null,"Unable to unclipRow without a valid row being passed in!");var b=this.GetDatabody(),d=a.offsetTop+a.parentNode.parentNode.startPos;d<this._currentScrollTop?this._scrollerScrollToPos(null,d):(a=a.offsetTop+a.offsetHeight-(this._currentScrollTop-a.parentNode.parentNode.startPos),a>b.offsetHeight&&this._scrollerScrollToPos(null,this._currentScrollTop+(a-b.offsetHeight)))};
AdfDhtmlTableBasePeer.prototype.UpdateFocusManager=function(a,b,d){var e=this._focusManager;e.domElement!=null&&this._updateFocusCellStyle(!1);e.objectType=a;e.currency=b;e.domElement=d;this._updateFocusCellStyle(!0)};AdfDhtmlTableBasePeer.prototype._updateFocusCellStyle=function(a){var b=this._focusManager;a&&b.domElement?AdfDomUtils.addCSSClassName(b.domElement,AdfDhtmlTableBasePeer._FOCUSED_CLASS):!a&&b.domElement&&AdfDomUtils.removeCSSClassName(b.domElement,AdfDhtmlTableBasePeer._FOCUSED_CLASS)};
AdfDhtmlTableBasePeer.prototype._isFilterable=function(){return this.getDomElement().getAttribute(AdfDhtmlTableBasePeer._FILTERABLE)!=null};AdfDhtmlTableBasePeer.prototype._isTargetCellFilter=function(a){for(var b=this.getDomElement(),d=AdfAgent.AGENT,e=d.getAttribute(a,AdfDhtmlTableBasePeer._FILTER_COLUMN);e==null;){if(a==null||a==b)return!1;a=a.parentNode;if(a==null||a.nodeType!=1)break;e=d.getAttribute(a,AdfDhtmlTableBasePeer._FILTER_COLUMN)}return e!=null};
AdfDhtmlTableBasePeer.prototype._handleFilterCellAction=function(){var a=this.getComponent();a.queueEvent(new AdfQueryEvent(a))};AdfDhtmlTableBasePeer.prototype.getRowKeyForEvent=function(a){a=a.getNativeEventTarget();if(this._getTargetRowHeader(a)==null){var b=this.getDomElement(),a=this.GetRowKeyAndRow(a,b);if(a!=null)return a[0]}return null};
AdfDhtmlTableBasePeer.prototype.applyDragReadyStateForRowKeys=function(a,b,d){AdfAssert.assertArray(d);a=this._getDomNodesForDrag(d);b=0;for(d=a.length;b<d;++b)AdfDomUtils.addCSSClassName(a[b],AdfRichUIPeer.DRAG_READY_STYLECLASS);return a};AdfDhtmlTableBasePeer.prototype.ClearDragReadyState=function(a){AdfAssert.assertArray(a);for(var b=0,d=a.length;b<d;++b)AdfDomUtils.removeCSSClassName(a[b],AdfRichUIPeer.DRAG_READY_STYLECLASS)};
AdfDhtmlTableBasePeer.prototype.applyDragSourceStateForRowKeys=function(a,b,d){AdfAssert.assertArray(d);a=this._getDomNodesForDrag(d);b=0;for(d=a.length;b<d;++b)AdfDomUtils.addCSSClassName(a[b],AdfRichUIPeer.DRAG_SOURCE_STYLECLASS);return a};AdfDhtmlTableBasePeer.prototype.ClearDragSourceState=function(a){AdfAssert.assertArray(a);for(var b=0,d=a.length;b<d;++b)AdfDomUtils.removeCSSClassName(a[b],AdfRichUIPeer.DRAG_SOURCE_STYLECLASS)};
AdfDhtmlTableBasePeer.prototype.getDragOffsetForRowKeys=function(a,b){var d=a.getNativeEventTarget(),e=this.getDomElement(),f=this.GetRowKeyAndRow(d,e),e=d=0,g=AdfAgent.AGENT;if(f!=null)for(var h=f[0],f=f[1],k=0;k<b.length;k++)if(b[k]==h){h=g.getElementPosition(f);g=g.getMousePosition(a.getNativeEvent());d=g.x-h.x;e+=g.y-h.y;this._lastFrozen>=0&&(d-=AdfDhtmlTableBasePeer.__getChildBySubId(this.__getColumnHeader(),"t").offsetWidth);break}else{var l=this.FindRowByKey(b[k]);AdfAssert.assert(l!=null);
e+=l.tr.offsetHeight}return{x:d,y:e}};
AdfDhtmlTableBasePeer.prototype.getDragNodeForRowKeys=function(a){AdfAssert.assertArray(a);for(var b=AdfAgent.AGENT.getCapabilities()[AdfAgent.CAP_TOUCH_SCREEN]!=AdfAgent.CAP_TOUCH_SCREEN_NONE,d=0,e=b?this.getDomDocument().createElement("div"):this.getDomDocument().createElement("table"),a=this._getDomNodesForDrag(a),f=0,g=a.length;f<g;++f){var h=a[f];b?d+=h.offsetHeight:(h=this._cloneCellForDrag(h),e.insertRow(-1).appendChild(h))}if(b)e=AdfAgent.AGENT.createDraggableNode(e),e.style.height=d+"px",
e.style.width=this.getDomElement().offsetWidth+"px";return e};
AdfDhtmlTableBasePeer.prototype._getDomNodesForDrag=function(a){for(var b=[],d=this._lastFrozen,e=this.GetDatabody(),f=0;f<a.length;++f){var g=this.FindRowByKey(a[f]);if(g){var g=g.tr,h=g.parentNode.parentNode.startPos;g.offsetTop+g.offsetHeight+h-AdfDhtmlTableBasePeer._MAXIMUM_ROW_REVEAL>this._currentScrollTop&&g.offsetTop-(this._currentScrollTop-h)+AdfDhtmlTableBasePeer._MAXIMUM_ROW_REVEAL<e.offsetHeight&&(h=d>=0?this._getInnerTableCell(g,d+1):g.cells[0],h==null&&(h=g.cells[0]),b.push(h))}}return b};
AdfDhtmlTableBasePeer.prototype._cloneCellForDrag=function(a){var b=a.cloneNode(!0),d=AdfAgent.AGENT;d.copyStyle(a,b);a=b.style;a.width="";a.borderRight=a.borderBottom="0px";d.setOpacity(b,50);return b};
AdfDhtmlTableBasePeer.prototype.getRowKeyAndOrientationFromHints=function(a,b,d){AdfAssert.assertNumber(a);AdfAssert.assertNumber(b);AdfAssert.assert(d!=null);var e=d[AdfStampedDropTarget.HINT_LAST_ROWKEY],f=d[AdfStampedDropTarget.HINT_LAST_ROWKEY_BOUNDS],g=d[AdfStampedDropTarget.HINT_LAST_DROP_ORIENTATION];if(e&&f&&(AdfAssert.assertString(e),AdfAssert.assertObject(f),a>=f.left&&b>=f.top&&a<=f.right&&b<=f.bottom)){d[AdfStampedDropTarget.ROW_KEY]=e;d[AdfStampedDropTarget.DROP_ORIENTATION]=g;return}this._getRowKeyAndOrientationForPosition(a,
b,d)};
AdfDhtmlTableBasePeer.prototype._getRowKeyAndOrientationForPosition=function(a,b,d){AdfAssert.assertNumber(a);AdfAssert.assertNumber(b);var e=this.GetDatabody(),f=AdfDomUtils.getElementAtPoint(e,a,b);if(f&&(f=this.GetRowKeyAndRow(f,this.getDomElement()),f!=null)){d[AdfStampedDropTarget.ROW_KEY]=f[0];d[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_ON;return}this.IsEmpty?(d[AdfStampedDropTarget.ROW_KEY]=null,d[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_AFTER):AdfAgent.AGENT.pointInElementBounds(e,
a,b)?(d[AdfStampedDropTarget.ROW_KEY]=this._getLastRowKey(),d[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_AFTER):(d[AdfStampedDropTarget.ROW_KEY]=null,d[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_ON)};
AdfDhtmlTableBasePeer.prototype.showDragFeedback=function(a,b,d,e){AdfAssert.assertPrototype(a,AdfDnDContext);AdfAssert.assertStringOrNull(b);AdfAssert.assertNumber(d);AdfAssert.assertStringOrNull(e);d==AdfDnDContext.ACTION_NONE&&(AdfDomUtils.removeCSSClassName(this.GetDatabody(),AdfDhtmlTableBasePeer._DROP_TARGET_CLASS),b=null);if(e!=b&&(e&&(a=this.FindRowByKey(e))&&AdfDomUtils.removeCSSClassName(a.tr,AdfDhtmlTableBasePeer._DROP_TARGET_CLASS),b&&(a=this.FindRowByKey(b))))AdfDomUtils.addCSSClassName(a.tr,
AdfDhtmlTableBasePeer._DROP_TARGET_CLASS),AdfDomUtils.removeCSSClassName(this.GetDatabody(),AdfDhtmlTableBasePeer._DROP_TARGET_CLASS);b==null&&d!=AdfDnDContext.ACTION_NONE&&AdfDomUtils.addCSSClassName(this.GetDatabody(),AdfDhtmlTableBasePeer._DROP_TARGET_CLASS)};AdfDhtmlTableBasePeer.prototype.getRowKeyBounds=function(a){if(!a)return null;return(a=this.FindRowByKey(a))?AdfAgent.AGENT.getElementPageBounds(a.tr):null};
AdfDhtmlTableBasePeer.prototype.ShiftIndex=function(a,b,d){for(;a;)a.startRow+=b,a=d?a.nextSibling:a.previousSibling};AdfDhtmlTableBasePeer.prototype.IsReceivingActiveEvents=function(){return this._activeDataCount!=-1};AdfDhtmlTableBasePeer.prototype.RemoveAllBlocks=function(a){for(var b=a.childNodes,d=b.length-1;d>=0;d--)this.UnregisterNode(b[d]),a.removeChild(b[d])};
AdfDhtmlTableBasePeer.prototype._getFirstRowKey=function(){var a=this.GetDatabody().childNodes;if(a.length>0)return this._getBlockFirstRowKey(a[0]);return null};AdfDhtmlTableBasePeer.prototype._getLastRowKey=function(){var a=this.GetDatabody().childNodes,b=a.length;if(b>0)return this._getBlockLastRowKey(a[b-1]);return null};
AdfDhtmlTableBasePeer.prototype._getBlockFirstRowKey=function(a){AdfAssert.assert(a.rows!=null&&a.rows.length>0,"Unable to get row key by index when the block contains no rows!");return AdfAgent.AGENT.getAttribute(a.rows[0],AdfDhtmlTableBasePeer._ROW_KEY)};
AdfDhtmlTableBasePeer.prototype._getBlockLastRowKey=function(a){AdfAssert.assert(a.rows!=null&&a.rows.length>0,"Unable to get row key by index when the block contains no rows!");var b=AdfAgent.AGENT,a=a.rows[a.rows.length-1],d=b.getAttribute(a,AdfDhtmlTableBasePeer._ROW_KEY);d==null&&a.previousSibling&&(d=b.getAttribute(a.previousSibling,AdfDhtmlTableBasePeer._ROW_KEY));return d};AdfDhtmlTableBasePeer.prototype._isImmediateContentDelivery=function(a){return a.getContentDelivery()=="immediate"};
AdfDhtmlTableBasePeer.prototype._isInlineDataAvailable=function(a){return a.getProperty("_afrDataInline")};
AdfDhtmlTableBasePeer.prototype._sizeRegionsForFrozenColumns=function(a,b){if(!(this._lastFrozen<0||this._colCount==this._lastFrozen+1)){for(var d=a.firstChild;d;)this._sizeBlockForFrozenColumns(d,b),d=d.nextSibling;d=this.__getColumnHeader();if(d!=null)d=AdfDhtmlTableBasePeer.__getChildBySubId(d,"d2"),d.style.width=Math.max(b-this._frozenWidth,0)+"px";d=this._getColumnFooter();if(d!=null)d=AdfDhtmlTableBasePeer.__getChildBySubId(d,"fd2"),d.style.width=Math.max(b-this._frozenWidth,0)+"px"}};
AdfDhtmlTableBasePeer.prototype._sizeBlockForFrozenColumns=function(a,b){if(!(this._lastFrozen<0)){AdfAssert.assert(a.rows!=null&&a.rows[0]!=null,"Unable to _sizeBlockForFrozenColumns when block contains no rows!");var d=a.rows[0].cells;if(d.length!=this._lastFrozen+1&&(d=d[d.length-1],d.style.width=Math.max(b-this._frozenWidth,0)+"px",a.style.width=b+"px",AdfAgent.AGENT.getPlatform()==AdfAgent.WEBKIT_PLATFORM)){var e=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"COLGROUP");if(e){for(e=e.childNodes[e.childNodes.length-
1];e&&e.tagName!="COL";)e=e.previousSibling;if(e)e.style.width=d.style.width,d.firstChild.style.width=d.style.width}}}};
AdfDhtmlTableBasePeer.prototype._registerInnerScrollCallback=function(a){if(!(this._lastFrozen<0)){AdfAssert.assert(a.rows!=null&&a.rows[0]!=null,"Unable to register inner scroll callback when the block contains no rows!");var b=a.rows[0].cells,d=b.length;if(d!=this._lastFrozen+1)for(var e=0;e<a.rows.length;e++)b=a.rows[e].cells,AdfDhtmlTableBasePeer.FindFirstChildByTagName(b[d-1],"DIV").onscroll=this._innerTableScrollCallback}};
AdfDhtmlTableBasePeer._getNestedScrolledTable=function(a){AdfAssert.assert(a!=null,"Unable to get the nested scrolled table without a valid row passed in!");a=a.cells;a=AdfDhtmlTableBasePeer.FindFirstChildByTagName(a[a.length-1],"DIV");return AdfDhtmlTableBasePeer.FindFirstChildByTagName(a,"TABLE")};AdfDhtmlTableBasePeer._isRTL=function(){return AdfPage.PAGE.getLocaleContext().isRightToLeft()};
AdfDhtmlTableBasePeer.prototype._getExpandAction=function(a){var b=AdfPage.PAGE.getLookAndFeel(),d=b.getStyleClass(AdfDhtmlTableBasePeer._ICON_STYLE_EXPANDED),e=a.parentNode.className;if(d==a.className||d==e)return"collapse";b=b.getStyleClass(AdfDhtmlTableBasePeer._ICON_STYLE_COLLAPSED);if(b==a.className||b==e)return"expand";return null};AdfDhtmlTableBasePeer.prototype.ComponentScrollTopChanged=function(a,b,d){this.scrollToPos(-1,d,!0);return!1};
AdfDhtmlTableBasePeer.prototype.ComponentScrollLeftChanged=function(a,b,d){this.scrollToPos(d,-1,!0);return!1};AdfDhtmlTableBasePeer.prototype.ComponentDisclosedRowKeysChanged=function(a,b,d,e){this._savedDisclosedState=e;a=AdfCollections.removeAll(e,d);d=AdfCollections.removeAll(d,e);b=e=!1;a!=null&&!AdfCollections.isEmpty(a)&&(this.HandleComponentCollapseEvent(a),e=!0);d!=null&&!AdfCollections.isEmpty(d)&&(this.HandleComponentExpandEvent(a),b=!0);AdfAssert.assert(!(e&&b))};
AdfDhtmlTableBasePeer.prototype.HandleComponentCollapseEvent=function(){this._queueCollapseFetchEvent()};AdfDhtmlTableBasePeer.prototype.HandleComponentExpandEvent=function(){this._queueExpandFetchEvent()};
AdfDhtmlTableBasePeer.prototype._changeDetailIcon=function(a,b){for(var d=AdfAgent.AGENT,e=null,f=a.cells,g=0;g<f.length;g++)if(d.getAttribute(f[g],AdfDhtmlTableBasePeer._DETAIL_COLUMN_MARKER,!1)){e=f[g];break}if(e){if(d=AdfDhtmlTableBasePeer.FindFirstChildByTagName(e,"A"))f=b?AdfDhtmlTableBasePeer._ICON_STYLE_EXPANDED:AdfDhtmlTableBasePeer._ICON_STYLE_COLLAPSED,e=AdfPage.PAGE.getLookAndFeel(),f=e.getStyleClass(f),d.className=f,e=b?e.getTranslatedString(AdfDhtmlTableBasePeer._EXPANDED_NODE_KEY):e.getTranslatedString(AdfDhtmlTableBasePeer._COLLAPSED_NODE_KEY),
d.title=e;(d=this._getDisclosureIcon(d))&&AdfDomUtils.swapIcon(d,b?AdfDhtmlTableBasePeer._ICON_EXPANDED:AdfDhtmlTableBasePeer._ICON_COLLAPSED)}};AdfDhtmlTableBasePeer.prototype._getDisclosureIcon=function(a){var b=AdfAgent.getAgent();if(a.firstChild!=null&&(a=a.firstChild,b=b.getNodeName(a).toLowerCase(),b=="img"||b=="span"||b=="#text"))return a;return null};AdfDhtmlTableBasePeer.prototype._getEstimatedRowCount=function(a){return AdfAgent.getAgent().getIntAttribute(a,"_estRowCount",-1)};
AdfDhtmlTableBasePeer._getBlockRowCount=function(a){var b=0,d=AdfAgent.getAgent();if(d.getAttribute(a,AdfDhtmlTableBasePeer._HAS_DETAIL_MARKER,!1))for(var a=a.rows,e=0;e<a.length;e++)d.getAttribute(a[e],AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1)||b++;else return a.rows.length;return b};
AdfDhtmlTableBasePeer.prototype.__isOwnComponentEvent=function(a){for(var a=a.getSource(),b=this.getComponent(),d=!1,e=AdfPage.PAGE.getDomWindow().AdfUITree!=null;!d&&a;)if(a==b)d=!0;else{if(a instanceof AdfUITable||e&&a instanceof AdfUITree||a instanceof AdfUIPopup)break;a=a.getParent()}return d};AdfDhtmlTableBasePeer.prototype._isClickToEdit=function(){return this.getComponent().getEditingMode()==AdfDhtmlTableBasePeer._EDIT_MODE_CLICKTOEDIT};AdfDhtmlTableBasePeer.prototype._getActiveRowKey=function(){return this.getComponent().getProperty("_afrActiveRowKey")};
AdfDhtmlTableBasePeer.prototype.ComponentActiveRowKeyChanged=function(a,b,d){this._setActiveRowKey(d);return!1};
AdfDhtmlTableBasePeer.prototype._setActiveRowKey=function(a){if(AdfTableDataFetchEvent.CLICK_EDIT_ACTIVE_ROW!=this._pendingFetch&&!this._ignoreActiveRowKeyChange){var b=null;this._ignoreActiveRowKeyChange=!0;try{var d=this.getComponent(),e=d.getProperty("_afrActiveRowKey");d.setProperty("_afrActiveRowKey",a,!1,AdfUIComponent.PROPAGATE_ALWAYS);d.setProperty("activeRowKey",a,!1,AdfUIComponent.PROPAGATE_ALWAYS);b=this._queueFetchEvent(!1,AdfTableDataFetchEvent.CLICK_EDIT_ACTIVE_ROW,-1,a);e&&b?(b.setOldClientKey(e),
this._oldActiveRowKey=e):b||(d.setProperty("_afrActiveRowKey",e,!1,AdfUIComponent.PROPAGATE_ALWAYS),d.setProperty("activeRowKey",e,!1,AdfUIComponent.PROPAGATE_ALWAYS))}finally{this._ignoreActiveRowKeyChange=!1}return b}};
AdfDhtmlTableBasePeer.prototype._restoreActiveRowKey=function(){this._ignoreActiveRowKeyChange=!0;try{var a=this.getComponent();a.setProperty("_afrActiveRowKey",this._oldActiveRowKey,!1,AdfUIComponent.PROPAGATE_NEVER);a.setProperty("activeRowKey",this._oldActiveRowKey,!1,AdfUIComponent.PROPAGATE_NEVER);delete this._oldActiveRowKey}finally{this._ignoreActiveRowKeyChange=!1}};
AdfDhtmlTableBasePeer.prototype._getCellAndIndexForNode=function(a,b){for(var d=AdfAgent.AGENT,e=this.getDomElement(),f=null,g=-1,h=null;null!=a&&a!=e&&g==-1;)if(d.getNodeName(a)=="TD"){var k=a.parentNode;if(k==b){g=this._indexOfDomElement(b.cells,a);h=a;break}else if(this._lastFrozen>=0&&(f==null&&(f=AdfDhtmlTableBasePeer._getNestedScrolledTable(b).rows[0]),k==f)){g=this._lastFrozen+this._indexOfDomElement(f.cells,a)+1;h=a;break}a=k}else a=a.parentNode;return{cellIndex:g,cell:h}};
AdfDhtmlTableBasePeer.prototype._saveClickToEditRequest=function(a,b){var d=this._getCellAndIndexForNode(AdfAgent.AGENT.getEventTarget(a),b),e={};e.cellIndex=d.cellIndex;this._clickEditRequest=e};
AdfDhtmlTableBasePeer.prototype._processClickToEditRequest=function(a){var b=AdfAgent.AGENT,d=this._clickEditRequest;if(d){var e=this._getActiveRowKey();this._lastCTEIndex=d?d.cellIndex:void 0;this._grabFocus();if(e){var f=this.FindRowByKey(e);if(f){f=f.tr;AdfAssert.assertDomElement(f);if(!d||d.activateCellType)if(d&&d.activateCellType=="last")for(b=this.__getVisibleLeafColumns().length-1;b>=0;){d=this._getInputElementsInNode(this.FindCellByIndex(f,b));if(d.length>0){AdfFocusUtils.focusElement(d[d.length-
1]);break}b--}else this._setFocusOnEditableElementInNode(b,f);else d=this.FindCellByIndex(f,d.cellIndex),AdfAssert.assertDomElement(d),this._setFocusOnEditableElementInNode(b,d)==null&&this._setFocusOnEditableElementInNode(b,f);a&&this._isRowSelectionEnabled()&&!this._selIsSelected(e)&&(this._selUnselectAll(),this.UpdateFocusManager(AdfDhtmlTableBasePeer._TABLE_BODY_FOCUS_TYPE,e,f),this._selSelectRow(e,f));this._clickEditRequest&&delete this._clickEditRequest;this._processClickToEditRequestTimerId&&
delete this._processClickToEditRequestTimerId}}}};
AdfDhtmlTableBasePeer.prototype._getInputElementsInNode=function(a){var b=AdfAgent.AGENT.getDomDocument(),d=[];if(b.evaluate){a=b.evaluate(".//input|.//select|.//textarea|.//button|.//a",a,null,XPathResult.ANY_TYPE,null);for(b=a.iterateNext();b;)!b.disabled&&b.tabIndex!=-1&&(b.nodeName!="A"||b.href)&&d.push(b),b=a.iterateNext()}else for(var a=a.getElementsByTagName("*"),e=a.length,f=/^INPUT|SELECT|BUTTON|^A\b|TEXTAREA/,g=0;g<e;g++)b=a[g],b.tagName.match(f)&&!b.disabled&&b.tabIndex!=-1&&(b.nodeName!=
"A"||b.href)&&d.push(b);return d};
AdfDhtmlTableBasePeer.prototype._handleTabKey=function(a,b){var d=this.GetRowKeyAndRow(a,this.getDomElement()),e=b.shiftKey,f=!0;if(d!=null){var g=d[1];if(g!=null){this._cellNavMode=!0;var h=this._getCellAndIndexForNode(a,g),k=h.cell;if(k){var l=h.cellIndex;if(!this._ctePatternStart)this._ctePatternStart=l;if(this._isClickToEdit()&&this._getActiveRowKey()!=null){var k=this._getInputElementsInNode(k),m=k.length;if(m>0)if(!e&&AdfDomUtils.isAncestorOrSelf(k[m-1],a)){if(this._hasDetailStamp&&(h=g.nextSibling)&&
AdfAgent.AGENT.getAttribute(h,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1))if(k=this._getInputElementsInNode(h),k.length>0)return!0;h=this.__getVisibleLeafColumns().length;e=l>=h-1;if(!e){for(l++;l<h;){k=this._getInputElementsInNode(this.FindCellByIndex(g,l));if(k.length>0)break;l++}e=l==h}e&&(this._clickToEditActivateRow(d[0],!0),f=!1)}else if(e&&AdfDomUtils.isAncestorOrSelf(k[0],a)){l=h.cellIndex==0;if(!l){for(l=h.cellIndex-1;l>=0;){k=this._getInputElementsInNode(this.FindCellByIndex(g,l));if(k.length>
0)break;l--}l=l==-1}l&&(this._clickToEditActivateRow(d[0],!1),f=!1)}}}}}else if(!e&&this._hasDetailStamp&&this._isClickToEdit())return this._handleTabKeyInCTEDetailRegion(a);return f};
AdfDhtmlTableBasePeer.prototype._handleTabKeyInCTEDetailRegion=function(a){for(var b=this.getDomElement(),d=a.parentNode,e=AdfAgent.AGENT,f=!0;d&&d!=b;){if(e.getNodeName(d)=="TR"&&e.getAttribute(d,AdfDhtmlTableBasePeer._DETAIL_ROW_MARKER,!1)){elems=this._getInputElementsInNode(d);elems.length>0&&elems[elems.length-1]==a&&(this._clickToEditActivateRow(e.getAttribute(d.previousSibling,AdfDhtmlTableBasePeer._ROW_KEY),!0),f=!1);break}d=d.parentNode}return f};
AdfDhtmlTableBasePeer.prototype._clickToEditActivateRow=function(a,b,d){delete this._lastRowKeyInView;var e=b?this._getNextRowKeyAndRow(a):this._getPreviousRowKeyAndRow(a);if(!e.isAtTop){var f=e.rowKey,g=e.lastRowKeyInView;if(f!=null)this._setActiveRowKey(f),this._unclipRow(e.row),this._clickEditRequest=d!=void 0?{cellIndex:d}:{activateCellType:!b?"last":"first"},b=AdfPage.PAGE.getActiveDomElement(),g=this.getComponent().getProperty("activeRowKey"),a!=g&&b&&b.blur&&b.blur();else if(g!=null){a=this.GetScroller();
if(!this._footerless||this._isPaged)a=a[AdfDhtmlTableBasePeer._VSCROLLER];d=this._currentScrollTop+(b?this._averageRowHeight:-this._averageRowHeight);if(d>0&&d<this._getScrollHeight())this._lastRowKeyInView=g,AdfAgent.AGENT.scrollToPos(a,null,d),this._clickEditRequest={activateRowType:b?"next":"previous"}}}};
AdfDhtmlTableBasePeer.prototype._processClickToEditActivateRequest=function(){var a=this._clickEditRequest;if(a&&a.activateRowType){var b=a.activateRowType=="next";attrs=b?this._getNextRowKeyAndRow(this._lastRowKeyInView):this._getPreviousRowKeyAndRow(this._lastRowKeyInView);a.activateCellType=b?"first":"last";attrs.rowKey&&this._setActiveRowKey(attrs.rowKey);delete this._lastRowKeyInView}};
AdfDhtmlTableBasePeer.prototype._restoreScrollPosition=function(){var a=this.getComponent().getScrollLeft();a>=0&&this.scrollToPos(a,-1,!0)};AdfDhtmlTableBasePeer.prototype._unclipInputElem=function(a){var b=AdfAgent.AGENT,d=this.GetScroller();if(d){if(!this._footerless||this._isPaged)d=d[AdfDhtmlTableBasePeer._HSCROLLER];var e=b.getElementLeft(a),f=b.getElementLeft(d);e+a.offsetWidth>f+d.clientWidth&&b.scrollToPos(d,this._currentScrollLeft+(a.offsetWidth+e-(f+d.clientWidth)),null)}};
AdfDhtmlTableBasePeer.prototype.scrollColumnIntoView=function(a,b){AdfAssert.assert(a!=null||b!=null);var d=AdfAgent.AGENT;if(!b&&(b=d.getElementById(a),!b))return;if(!(d.getIntAttribute(b,"_d_index",-1)<=this._lastFrozen)){var e=this.GetScroller();if(!this._footerless||this._isPaged)e=e[AdfDhtmlTableBasePeer._HSCROLLER];var f=b.offsetLeft;if(f!=this._currentScrollLeft){var g=this._colScrollAnimationDuration;if(g==void 0)g=AdfPage.PAGE,this._colScrollAnimationDuration=g=g.isAnimationEnabled()?parseInt(g.getLookAndFeel().getSkinProperty("af|table-tr-column-scroll-animation-duration")):
0;g>0?AdfDhtmlElementAnimator.animate(AdfDhtmlElementAnimator.FRAME_METHOD_SLOW_FAST_SLOW,g,[{element:e,properties:{scrollLeft:f}}],null,null,null):d.scrollToPos(e,f,null)}}};AdfDhtmlTableBasePeer.prototype.getRowIndex=function(a){AdfAssert.assertString(a);AdfAssert.assert(a!=null,"Row Key cannot be null");var b=-1;if(a=this.FindRowByKey(a))b=a.index;return b};
AdfDhtmlTableBasePeer.prototype.getRowKey=function(a){AdfAssert.assertNumber(a);AdfAssert.assert(a>=0,"index must be greater than or equal to 0");for(var b=null,d=this.GetDatabody().childNodes,e=d.length,f=0;f<e;f++){var g=d[f],h=g.startRow;if(a>=h&&a<h+g.numRows){b=AdfAgent.AGENT.getAttribute(g.rows[a-h],AdfDhtmlTableBasePeer._ROW_KEY);break}}return b};AdfDhtmlTableBasePeer.prototype._clearColumnSelectionEventAddedSet=function(){this._colSelEventSelectedColIds={}};
AdfDhtmlTableBasePeer.prototype._clearColumnSelectionEventRemovedSet=function(){this._colSelEventUnselectedColIds={}};AdfDhtmlTableBasePeer.prototype._clearColumnSelectionEventChangedSets=function(){this._colSelEventSelectedColIds={};this._colSelEventUnselectedColIds={}};AdfDhtmlTableBasePeer.prototype._hasColumnSelectionEventChangedSets=function(){return!AdfCollections.isEmpty(this._colSelEventSelectedColIds)||!AdfCollections.isEmpty(this._colSelEventUnselectedColIds)};
AdfDhtmlTableBasePeer.prototype._queueColumnSelectionEvent=function(){if(this._hasColumnSelectionEventChangedSets()){var a=this.getComponent();AdfTableUtils.queueColumnSelectionEvent(a,this._colSelEventSelectedColIds,this._colSelEventUnselectedColIds);this._clearColumnSelectionEventChangedSets()}};
AdfDhtmlTableBasePeer.prototype.ConvertClientIdToLocator=function(a,b,d,e){b=a.getClientId();a=AdfStrings.count(b,":");AdfAssert.assert(d.indexOf(b)>=0);d=d.substring(b.length+1);b=d.indexOf(":");b>0&&(d=this.FindRowByKey(d.substring(0,b)),e.push([a+1,d?d.index:null]))};
AdfDhtmlTableBasePeer.prototype.convertLocatorToClientId=function(a,b){var d=a.getClientId(),e=null,f=this.GetDatabody();if(f!=null)for(var f=f.childNodes,g=0;g<f.length&&!e;g++){var h=f[g],k=h.startRow;if(b>=k&&b<k+h.numRows){e=h.rows[b-k].getAttribute(AdfDhtmlTableBasePeer._ROW_KEY);break}}return e?d+":"+e:null};
AdfDhtmlTableBasePeer.prototype._computeAutoHeight=function(){var a=AdfAgent.AGENT,b=0,d=this._autoHeightRows;if(d>0){var e=a.getPlatform()==AdfAgent.GECKO_PLATFORM,f=this.GetFirstVisibleRowKeyAndRow().row;if(f)for(var g=this.GetDatabody().childNodes,h=g.length,k=0,l=0;l<h&&k<d;l++){var m=g[l].rows,n=0;if(m!=null)n=m.length;for(var o=0;o<n&&k<d;o++)if(f===m[o]||k>0){k++;var p;e?(p=a.getComputedStyle(m[o]),p=parseFloat(p.height)):p=m[o].offsetHeight;b+=p}}}return e?Math.round(b):b};
AdfDhtmlTableBasePeer.prototype._setOuterHeightForBodyHeight=function(a){var b=this.getDomElement(),d=this._getScrollbarHeight(),e=a+this._cachedCHHeight+this._cachedCFHeight+this._cachedNBHeight+d;this._sizeOuterContainer(b,e);if(!this.IsEmpty){var f=this.GetScroller(),g=AdfAgent.getAgent();if(f!=null&&g.getPlatform()==AdfAgent.IE_PLATFORM&&this.GetRowCount()<2){var h=null,k=0,g=g.getVersion();if(g>7&&g<9){h=f;if(!this._footerless||this._isPaged)h=f[AdfDhtmlTableBasePeer._HSCROLLER];if(this._averageRowHeight!=
null)k=this._averageRowHeight,h.style.minHeight=8+k+"px"}}this._setScrollerHeight(e,this._cachedCHHeight,this._cachedCFHeight,this._cachedNBHeight);this._setScrollerWidth(b.clientWidth,this._frozenWidth);e=this._getScrollbarHeight();d!=e&&(e=a+this._cachedCHHeight+this._cachedCFHeight+e,this._sizeOuterContainer(b,e),this._setScrollerHeight(e,this._cachedCHHeight,this._cachedCFHeight,this._cachedNBHeight));this.SizeDatabody(this.GetDatabody(),b.clientWidth,b.clientHeight);if(h!=null)h.style.minHeight=
k+"px"}};AdfDhtmlTableBasePeer.prototype._sizeOuterContainer=function(a,b){var d=AdfAgent.AGENT;if(d.getBoxSizing(a)=="border-box"){var e=AdfAgent.getCSSLengthAsInt,d=d.getComputedStyle(a);a.style.height=b+e(d.paddingTop)+e(d.paddingBottom)+e(d.marginTop)+e(d.marginBottom)+e(d.borderTopWidth)+e(d.borderBottomWidth)+"px"}else a.style.height=b+"px"};
AdfDhtmlTableBasePeer.prototype.AdjustAutoHeight=function(){var a=this.GetPanelCollectionPeer();if(a&&a.isDetached()){var a=this.getDomElement(),b=a.clientHeight;this.__fixPanelCollectionDimensions(!0);this.SizeDatabody(this.GetDatabody(),a.clientWidth,b);this.IsEmpty||this._setScrollerHeight(b,this._cachedCHHeight,this._cachedCFHeight,this._cachedNBHeight)}else if(this.isHeightAutoSized()&&!this.BusyAnimating()){var b=this.GetDatabody(),d=!this.IsEmpty?this._computeAutoHeight():b.offsetHeight,e=
AdfAgent.AGENT,e=e.getPlatform()==AdfAgent.IE_PLATFORM&&e.getVersion()<9&&e.getVersion()>7;if(this.IsEmpty||d!=b.offsetHeight||e&&this.GetRowCount()<2)this._setOuterHeightForBodyHeight(d),a&&this.__fixPanelCollectionDimensions(!1);this._checkAutoHeightScrollbar(b);!this._stretchingTheColumns&&!this._desendentResizeQueued&&this._doStretch()}};
AdfDhtmlTableBasePeer.prototype._queueDescendantResize=function(){if(!this._desendentResizeQueued){this._desendentResizeQueued=!0;try{AdfPage.PAGE.__queueDescendantResizeNotifySource(this.getComponent()),AdfPage.PAGE.__doDescendantResizeNotify()}finally{delete this._desendentResizeQueued}}};AdfDhtmlTableBasePeer.prototype._doStretch=function(){this._stretchTheColumns();this._queueDescendantResize();return-1};
AdfDhtmlTableBasePeer.prototype._checkAutoHeightScrollbar=function(a){var b=a.childNodes,d=this._autoHeightRows;if(this._allRowsAvailableOnClient(b,b.length)&&this.GetRowCount()<=d&&(b=this._getScrollerClientHeight(),b!=this._canvasHeight))this._canvasHeight=b,this._setFakeCanvasHeight(b),b=this.getDomElement(),this._setScrollerWidth(b.clientWidth,this._frozenWidth),this.SizeDatabody(a,b.clientWidth,b.clientHeight)};
AdfDhtmlTableBasePeer.prototype._getRTLScrollAdjustment=function(){var a=AdfAgent.getAgent();if(a.getPlatform()==AdfAgent.IE_PLATFORM&&a.getVersion()>7){a=this.GetScroller();if(!this._footerless||this._isPaged)a=a[AdfDhtmlTableBasePeer._HSCROLLER];return a.scrollWidth-a.clientWidth-this._currentScrollLeft}else return this._currentScrollLeft};AdfDhtmlTableBasePeer.prototype.ApplyTooltipTitle=function(a){var b=this._getOnlyTextNode(a);b&&this._isCellTruncated(a)&&a.setAttribute("title",b.nodeValue)};
AdfDhtmlTableBasePeer.prototype.setBusy=function(a,b){AdfAgent.AGENT.supportsTransientStyleClasses()&&AdfDhtmlTableBasePeer.superclass.setBusy.call(this,a,b)};
AdfRichUIPeer.createPeerClass(AdfDhtmlTableBasePeer,"AdfDhtmlTablePeer",!1);AdfDhtmlTablePeer.InitSubclass=function(){AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_IN_EVENT_TYPE,AdfUIInputEvent.MOUSE_OUT_EVENT_TYPE)};AdfDhtmlTablePeer.prototype.__getColumnResizeMargin=function(){return 3};
AdfDhtmlTablePeer.prototype.HandleComponentMouseOver=function(a){if(!this._resizedTH&&!this._reorderTH){var b=AdfAgent.AGENT,d=a.getNativeEventTarget();if(d!=null){var e=d.tagName;(e=="TD"||e=="TH")&&d.noWrap&&!d.title&&this.ApplyTooltipTitle(d);if(this._hoverHighlightRow&&(d=this.GetRowKeyAndRow(d,this.getDomElement()),d!=null)){b=d[1];AdfDomUtils.containsCSSClassName(b,AdfDhtmlTableBasePeer._SELECTED_CLASS)||AdfDomUtils.addCSSClassName(b,AdfDhtmlTableBasePeer._HIGHLIGHTED_CLASS);return}}if(!this._headerless&&
(a=this._getParentTH(a.getNativeEvent()))&&a.colSpan<2)if(a=AdfRichUIPeer.CreateSubId(a.id,AdfDhtmlTableBasePeer.__SORT_INDICATOR),b=b.getElementById(a),b!=null&&(a=b.getAttribute(AdfDhtmlTableBasePeer._SORTED_TYPE),d=b.getAttribute(AdfDhtmlTableBasePeer._SUPPORTS_HOVER),a==null&&d))b.style.display=""}};
AdfDhtmlTablePeer.prototype.HandleComponentMouseOut=function(a){if(!this._resizedTH&&!this._reorderTH){var b=AdfAgent.AGENT;if(this._hoverHighlightRow){var d=this.GetRowKeyAndRow(a.getNativeEventTarget(),this.getDomElement());if(d!=null){AdfDomUtils.removeCSSClassName(d[1],AdfDhtmlTableBasePeer._HIGHLIGHTED_CLASS);return}}this._headerless||(a=this._getParentTH(a.getNativeEvent()))&&a.colSpan<2&&this._hideColumnSortableIndicator(b,a)}};
function AdfStampedDragSource(a,b,d){arguments.length&&this.Init(a,b,d)}AdfObject.createSubclass(AdfStampedDragSource,AdfDragSource);AdfStampedDragSource.prototype.Init=function(a,b,d){AdfStampedDragSource.superclass.Init.call(this,a,b);this._modelName=d};AdfStampedDragSource.prototype.getModelName=function(){return this._modelName};
AdfStampedDragSource.prototype.isAvailable=function(a,b){AdfAssert.assertPrototype(a,AdfDnDContext);AdfAssert.assertPrototype(b,AdfUIInputEvent);AdfAssert.DEBUG&&AdfDnDContext.assertUserAction(a.getUserAction());this.getComponent().getPeer();return this.AreDraggedRowKeysAvailable(b)?!0:AdfStampedDragSource.superclass.GetDragTransferable.call(this,b)!=null};AdfStampedDragSource.prototype.getRowKeyDataFlavor=function(){if(this.getComponent()){var a=this._modelName;if(a)return AdfDataFlavor.getRowKeyDataFlavor(a)}return null};
AdfStampedDragSource.prototype.GetDragTransferable=function(a){var b=AdfStampedDragSource.superclass.GetDragTransferable.call(this,a);this.getComponent();var d=this._modelName;if(d&&d.length&&(a=this._getRowKeys(a),AdfAssert.assertArrayOrNull(a),a)){var e=[],f=[];if(b!=null)for(var g=b.getTransferDataFlavors(),h=g.length,k=0;k<h;k++){var l=g[k];e.push(l);f.push(b.getTransferData(l))}b=AdfDataFlavor.getRowKeyDataFlavor(d);f.push(a);e.push(b);return new AdfObjectTransferable(f,e)}return b};
AdfStampedDragSource.prototype.GetDragOffset=function(a){var b=this._getRowKeys(a);return b?this.GetDragOffsetForRowKeys(a,b):{x:a.getOffsetX(),y:a.getOffsetY()}};AdfStampedDragSource.prototype.GetDragOffsetForRowKeys=function(a,b){AdfAssert.assertArray(b);return this.getComponent().getPeer().getDragOffsetForRowKeys(a,b)};
AdfStampedDragSource.prototype.GetDragOverFeedback=function(a){AdfAssert.assertPrototype(a,AdfUIInputEvent);var b=this._getRowKeys(a);return b?this.GetDragOverFeedbackForRowKeys(b):AdfStampedDragSource.superclass.GetDragOverFeedback.call(this,a)};AdfStampedDragSource.prototype.applyDragReadyState=function(a){AdfAssert.assertPrototype(a,AdfUIInputEvent);var b=this._getRowKeys(a);return b?this.ApplyDragReadyStateForRowKeys(a,b):AdfStampedDragSource.superclass.applyDragReadyState.call(this,a)};
AdfStampedDragSource.prototype.ApplyDragReadyStateForRowKeys=function(a,b){AdfAssert.assertArray(b);var d=this.getComponent(),e=d.getPeer();return e.applyDragReadyStateForRowKeys?e.applyDragReadyStateForRowKeys(d,a,b):AdfStampedDragSource.superclass.applyDragReadyState.call(this,a)};
AdfStampedDragSource.prototype.applyDragSourceState=function(a){AdfAssert.assertPrototype(a,AdfDomUIInputEvent);var b=this._getRowKeys(a);return b?this.ApplyDragSourceStateForRowKeys(a,b):AdfStampedDragSource.superclass.applyDragSourceState.call(this,a)};
AdfStampedDragSource.prototype.ApplyDragSourceStateForRowKeys=function(a,b){AdfAssert.assertArray(b);var d=this.getComponent(),e=d.getPeer();return e.applyDragSourceStateForRowKeys?e.applyDragSourceStateForRowKeys(d,a,b):AdfStampedDragSource.superclass.applyDragSourceState.call(this,a)};AdfStampedDragSource.prototype.GetDragOverFeedbackForRowKeys=function(a){AdfAssert.assertArray(a);return this.getComponent().getPeer().getDragNodeForRowKeys(a)};
AdfStampedDragSource.prototype.GetDraggedRowKeys=function(a){AdfAssert.assert(a);return[a]};AdfStampedDragSource.prototype.AreDraggedRowKeysAvailable=function(a){return this._getRowKeys(a)!=null};AdfStampedDragSource.prototype._getRowKeys=function(a){return(a=this.getComponent().getPeer().getRowKeyForEvent(a))?this.GetDraggedRowKeys(a):null};
function AdfTableDragSource(a,b,d){arguments.length&&this.Init(a,b,d)}AdfObject.createSubclass(AdfTableDragSource,AdfStampedDragSource);AdfTableDragSource.prototype.GetDraggedRowKeys=function(a){AdfAssert.assert(a);var b=this.getComponent().getSelectedRowKeys();if(b!=null&&b[AdfDhtmlTableBasePeer.SELECTALL_KEY_PROPERTY]==null&&b[a]!=null){var a=[],d;for(d in b)a.push(d);return a}else return[a]};
AdfTableDragSource.prototype.AreDraggedRowKeysAvailable=function(a){return this.getComponent().getPeer().getRowKeyForEvent(a)!=null};