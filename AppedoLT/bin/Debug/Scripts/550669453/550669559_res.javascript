function BuildLargeCalender(t) { data = t; var e = 1, a = "<tr>", n = "</tr>", l = "", r = ""; $.each(data, function (t, i) { var s = new Date(i.OnwardDate), c = $(".calenderLarge"); l = l + "<td><div id='ccDvDay_" + t + "' class='dayDiv'>", l = l + "<span><span class='caleDay'>" + s.getDate() + "</span><span style='font-size:10px;'>" + monthNames[s.getMonth()] + "</span></span>"; var o = t; i.CalendarFareItems.length > 0 && $.each(i.CalendarFareItems, function (t, e) { r += "<div class='dvFare' style='display:none'><span id='ccLblBest' style='display:none;' class='dayBest'>Best Price</span>", r = r + "<a id='ccLnkFare' href='javascript:void(0);' onclick='showSearch(this," + t + "," + o + ");' title='Click here to book' class='dayFare'>₹ " + e.TotalRate + "</a>", r = r + "<span style='width:100%'><img src='../../Optimizer_Themes/images/calOnward.png' class='imgIcon' /><span id='ccLblAirLineOw' class='dayAirLine'>" + e.OnwardAirline + "</span></span>", null != e.ReturnAirlineCode && (r = r + "<span style='width:100%'><img src='../../Optimizer_Themes/images/calReturn.png' class='imgIcon' /><span id='ccLblAirLineRt' class='dayAirLine'>" + e.ReturnAirline + "</span></span>"), r += "</div>" }), l = l + r + "</div></td>", r = "", e % 7 == 0 && (c.append(a + l + n), l = ""), e += 1 }), showAllAirline() } function showAllAirline() { $(".ccCblAirlines input[type='checkbox']").prop("checked", !0), FilterCalender() } function BuildMediumCalender(t) { data = t; var e = 1, a = "<tr>", n = "</tr>", l = "", r = "", i = !1, s = $("#ccTxtDateOW").val(); $.each(data, function (t, c) { var o = new Date(c.OnwardDate); 1 == o.getDate() && (i = i ? !1 : !0); var d = "dayDiv", h = o.getDate() > 9 ? o.getDate() : "0" + o.getDate(), p = o.getMonth() + 1 > 9 ? o.getMonth() + 1 : "0" + (o.getMonth() + 1), u = h + "/" + p + "/" + o.getFullYear(), m = $(".calenderMedium"); if (l = l + "<td><div id='ccDvDay_" + t + "' class='" + d + "'>", i) { u == s && (d = "dayDiv sDay"), l = l + "<span><span class='caleDay'>" + o.getDate() + "</span></span>"; var f = t; if (c.CalendarFareItems.length > 0) { var v = c.CalendarFareItems.sort(function (t, e) { return t.TotalRate - e.TotalRate })[0]; r += "<div class='dvFare' >", r = r + "<a id='ccLnkFare' href='javascript:void(0);' onclick='showMediumSearch(this,0," + f + ");' title='Click here to book' class='dayFare'>₹ " + v.TotalRate + "</a>", r += "</div>" } } l = l + r + "</div></td>", r = "", e % 7 == 0 && (m.append(a + l + n), l = ""), e += 1 }) } function BuildSmallCalender(t) { dataSmall = t; var e = 1, a = "<tr>", n = "</tr>", l = "", r = "", i = !1, s = $("#ccTxtDateOW").val(); $.each(dataSmall, function (t, c) { var o = new Date(c.OnwardDate); 1 == o.getDate() && (i = i ? !1 : !0); var d = "dayDiv", h = o.getDate() > 9 ? o.getDate() : "0" + o.getDate(), p = o.getMonth() + 1 > 9 ? o.getMonth() + 1 : "0" + (o.getMonth() + 1), u = h + "/" + p + "/" + o.getFullYear(), m = $(".smlCalDv").find(".calenderSmall"); if (l = l + "<td><div id='ccDvDay_" + t + "' class='" + d + "'>", i) { u == s && (d = "dayDiv sDay"); var f = t; if (c.CalendarFareItems.length > 0) { var v = c.CalendarFareItems.sort(function (t, e) { return t.TotalRate - e.TotalRate })[0]; l = l + "<a id='ccLnkFare' href='javascript:void(0);' onclick='showSmallSearch(this,0," + f + ");' title='₹ " + v.TotalRate + "'><span><span class='caleDay'>" + o.getDate() + "</span></span></a>" } else l = l + "<span><span class='caleDay'>" + o.getDate() + "</span></span>" } l = l + r + "</div></td>", r = "", e % 7 == 0 && (m.append(a + l + n), l = ""), e += 1 }) } function showSearch(t, e, a) { var n = data[parseInt(a)], l = n.CalendarFareItems[parseInt(e)]; $(".secFrom").text(l.FromSector), $(".secTo").text(l.ToSector); var r = new Date(n.OnwardDate); if ($(".spnPrice").text("₹ " + l.TotalRate), $(".lblOwDate").text(r.getDate() + "-" + monthNames[r.getMonth()] + "-" + r.getFullYear()), $(".lblOwTime").text(l.OnwardTime.substr(0, 5)), $(".lblOwAirline").text(l.OnwardAirline), null != l.ReturnAirlineCode) { $(".rtFltRw").show(); var i = new Date(l.ReturnDate); $(".lblRtDate").text(i.getDate() + "-" + monthNames[i.getMonth()] + "-" + i.getFullYear()), $(".lblRtTime").text(l.ReturnTime.substr(0, 5)), $(".lblRtAirline").text(l.ReturnAirline), $(".trRtnFlight").css("display", "block") } else $(".rtFltRw").hide(); $(".calSearch").css({ top: $(t).offset().top + 35, left: $(t).offset().left - 70, position: "absolute", padding: "5px" }), $(".calSearch").show() } function showMediumSearch(t, e, a) { var n = data[parseInt(a)], l = n.CalendarFareItems.sort(function (t, e) { return t.TotalRate - e.TotalRate })[0]; $(".spnPrice").text("₹ " + l.TotalRate), $(".secFrom").text(l.FromSector), $(".secTo").text(l.ToSector); var r = new Date(n.OnwardDate); if ($(".lblOwDate").text(r.getDate() + "-" + monthNames[r.getMonth()] + "-" + r.getFullYear()), $(".lblOwTime").text(l.OnwardTime.substr(0, 5)), $(".lblOwAirline").text(l.OnwardAirline), null != l.ReturnAirlineCode) { $(".rtFltRw").show(); var i = new Date(l.ReturnDate); $(".lblRtDate").text(i.getDate() + "-" + monthNames[i.getMonth()] + "-" + i.getFullYear()), $(".lblRtTime").text(l.ReturnTime.substr(0, 5)), $(".lblRtAirline").text(l.ReturnAirline), $(".trRtnFlight").css("display", "block") } else $(".rtFltRw").hide(); $(".calSearch").css({ top: $(t).offset().top + 25, left: $(t).offset().left - 90, position: "absolute", padding: "5px" }), $(".calSearch").show() } function showSmallSearch(t, e, a) { var n = dataSmall[parseInt(a)], l = n.CalendarFareItems.sort(function (t, e) { return t.TotalRate - e.TotalRate })[0]; $(".spnPrice").text("₹ " + l.TotalRate), $(".secFrom").text(l.FromSector), $(".secTo").text(l.ToSector); var r = new Date(n.OnwardDate); if ($(".lblOwDate").text(r.getDate() + "-" + monthNames[r.getMonth()] + "-" + r.getFullYear()), $(".lblOwTime").text(l.OnwardTime.substr(0, 5)), $(".lblOwAirline").text(l.OnwardAirline), null != l.ReturnAirlineCode) { $(".rtFltRw").show(); var i = new Date(l.ReturnDate); $(".lblRtDate").text(i.getDate() + "-" + monthNames[i.getMonth()] + "-" + i.getFullYear()), $(".lblRtTime").text(l.ReturnTime.substr(0, 5)), $(".lblRtAirline").text(l.ReturnAirline), $(".trRtnFlight").css("display", "block") } else $(".rtFltRw").hide(); $(".calSearch").css({ top: $(t).offset().top + 26, left: $(t).offset().left - 106, position: "absolute", padding: "5px" }), $(".calSearch").show() } function FilterCalender() { var t = $(".ccCblAirlines input[type='checkbox']").map(function () { return this.checked ? $("label[for=" + this.getAttribute("id") + "]").text() : void 0 }).get(); $(".dvFare").css("display", "none"), $(".dayDiv").each(function () { var e = $(this), a = e.find(".dayFare").map(function () { var e = $.trim($(this).parent().find("#ccLblAirLineOw").text()); return -1 != t.indexOf(e) ? parseFloat($.trim($(this).html().split(" ")[1])) : void 0 }); a = a.sort(function (t, e) { return isNaN(t) || isNaN(e) ? t > e ? 1 : -1 : t - e }), e.find(".dvFare").each(function () { var e = $.trim($(this).find("#ccLblAirLineOw").text()); if (-1 == t.indexOf(e)) $(this).css("display", "none"); else { var n = parseFloat($.trim($(this).find(".dayFare").html().split(" ")[1])); if (n == a[0]) return $(this).css("display", "block"), !1; $(this).css("display", "none") } }) }), FindBestFare() } function FindBestFare() { var t = $(".dayDiv").find(".dayFare").map(function () { return $(this).parent().is(":visible") ? parseFloat($.trim($(this).html().split(" ")[1])) : void 0 }); t = t.sort(function (t, e) { return isNaN(t) || isNaN(e) ? t > e ? 1 : -1 : t - e }), $(".dvFare").each(function () { parseFloat($.trim($(this).find(".dayFare").html().split(" ")[1])) == t[0] && $(this).find(".dayBest").css("display", "block") }) } function CloseSearch() { $(".calSearch").css("display", "none") } var data, dataSmall, monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];